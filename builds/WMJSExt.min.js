var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var n=0;return function(){return n<c.length?{done:!1,value:c[n++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,n,x){if(c==Array.prototype||c==Object.prototype)return c;c[n]=x.value;return c};$jscomp.getGlobal=function(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var n=0;n<c.length;++n){var x=c[n];if(x&&x.Math==Math)return x}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(c,n){var x=$jscomp.propertyToPolyfillSymbol[n];if(null==x)return c[n];x=c[x];return void 0!==x?x:c[n]};
$jscomp.polyfill=function(c,n,x,y){n&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(c,n,x,y):$jscomp.polyfillUnisolated(c,n,x,y))};$jscomp.polyfillUnisolated=function(c,n,x,y){x=$jscomp.global;c=c.split(".");for(y=0;y<c.length-1;y++){var w=c[y];if(!(w in x))return;x=x[w]}c=c[c.length-1];y=x[c];n=n(y);n!=y&&null!=n&&$jscomp.defineProperty(x,c,{configurable:!0,writable:!0,value:n})};
$jscomp.polyfillIsolated=function(c,n,x,y){var w=c.split(".");c=1===w.length;y=w[0];y=!c&&y in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var S=0;S<w.length-1;S++){var L=w[S];if(!(L in y))return;y=y[L]}w=w[w.length-1];x=$jscomp.IS_SYMBOL_NATIVE&&"es6"===x?y[w]:null;n=n(x);null!=n&&(c?$jscomp.defineProperty($jscomp.polyfills,w,{configurable:!0,writable:!0,value:n}):n!==x&&(void 0===$jscomp.propertyToPolyfillSymbol[w]&&(x=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[w]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(w):$jscomp.POLYFILL_PREFIX+x+"$"+w),$jscomp.defineProperty(y,$jscomp.propertyToPolyfillSymbol[w],{configurable:!0,writable:!0,value:n})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(c){if(c)return c;var n=function(S,L){this.$jscomp$symbol$id_=S;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:L})};n.prototype.toString=function(){return this.$jscomp$symbol$id_};var x="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",y=0,w=function(S){if(this instanceof w)throw new TypeError("Symbol is not a constructor");return new n(x+(S||"")+"_"+y++,S)};return w},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),x=0;x<n.length;x++){var y=$jscomp.global[n[x]];"function"===typeof y&&"function"!=typeof y.prototype[c]&&$jscomp.defineProperty(y.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return c},"es6",
"es3");$jscomp.iteratorPrototype=function(c){c={next:c};c[Symbol.iterator]=function(){return this};return c};$jscomp.createTemplateTagFirstArg=function(c){return c.raw=c};$jscomp.createTemplateTagFirstArgWithRaw=function(c,n){c.raw=n;return c};$jscomp.makeIterator=function(c){var n="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return n?n.call(c):$jscomp.arrayIterator(c)};$jscomp.arrayFromIterator=function(c){for(var n,x=[];!(n=c.next()).done;)x.push(n.value);return x};
$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(c){var n=function(){};n.prototype=c;return new n};
$jscomp.getConstructImplementation=function(){function c(){function x(){}new x;Reflect.construct(x,[],function(){});return new x instanceof x}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(c())return Reflect.construct;var n=Reflect.construct;return function(x,y,w){x=n(x,y);w&&Reflect.setPrototypeOf(x,w.prototype);return x}}return function(x,y,w){void 0===w&&(w=x);w=$jscomp.objectCreate(w.prototype||Object.prototype);return Function.prototype.apply.call(x,w,y)||
w}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},n={};try{return n.__proto__=c,n.a}catch(x){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,n){c.__proto__=n;if(c.__proto__!==n)throw new TypeError(c+" is not extensible");return c}:null;
$jscomp.inherits=function(c,n){c.prototype=$jscomp.objectCreate(n.prototype);c.prototype.constructor=c;if($jscomp.setPrototypeOf){var x=$jscomp.setPrototypeOf;x(c,n)}else for(x in n)if("prototype"!=x)if(Object.defineProperties){var y=Object.getOwnPropertyDescriptor(n,x);y&&Object.defineProperty(c,x,y)}else c[x]=n[x];c.superClass_=n.prototype};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(c){if(!(c instanceof Object))throw new TypeError("Iterator result "+c+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(c){this.yieldResult=c};
$jscomp.generator.Context.prototype.throw_=function(c){this.abruptCompletion_={exception:c,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(c){this.abruptCompletion_={return:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(c){this.abruptCompletion_={jumpTo:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(c,n){this.nextAddress=n;return{value:c}};
$jscomp.generator.Context.prototype.yieldAll=function(c,n){c=$jscomp.makeIterator(c);var x=c.next();$jscomp.generator.ensureIteratorResultIsObject_(x);if(x.done)this.yieldResult=x.value,this.nextAddress=n;else return this.yieldAllIterator_=c,this.yield(x.value,n)};$jscomp.generator.Context.prototype.jumpTo=function(c){this.nextAddress=c};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(c,n){this.catchAddress_=c;void 0!=n&&(this.finallyAddress_=n)};$jscomp.generator.Context.prototype.setFinallyBlock=function(c){this.catchAddress_=0;this.finallyAddress_=c||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(c,n){this.nextAddress=c;this.catchAddress_=n||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(c){this.catchAddress_=c||0;c=this.abruptCompletion_.exception;this.abruptCompletion_=null;return c};$jscomp.generator.Context.prototype.enterFinallyBlock=function(c,n,x){x?this.finallyContexts_[x]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=c||0;this.finallyAddress_=n||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(c,n){n=this.finallyContexts_.splice(n||0)[0];if(n=this.abruptCompletion_=this.abruptCompletion_||n){if(n.isException)return this.jumpToErrorHandler_();void 0!=n.jumpTo&&this.finallyAddress_<n.jumpTo?(this.nextAddress=n.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=c};$jscomp.generator.Context.prototype.forIn=function(c){return new $jscomp.generator.Context.PropertyIterator(c)};
$jscomp.generator.Context.PropertyIterator=function(c){this.object_=c;this.properties_=[];for(var n in c)this.properties_.push(n);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var c=this.properties_.pop();if(c in this.object_)return c}return null};$jscomp.generator.Engine_=function(c){this.context_=new $jscomp.generator.Context;this.program_=c};
$jscomp.generator.Engine_.prototype.next_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,c,this.context_.next_);this.context_.next_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(c){this.context_.start_();var n=this.context_.yieldAllIterator_;if(n)return this.yieldAllStep_("return"in n?n["return"]:function(x){return{value:x,done:!0}},c,this.context_.return);this.context_.return(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],c,this.context_.next_);this.context_.throw_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(c,n,x){try{var y=c.call(this.context_.yieldAllIterator_,n);$jscomp.generator.ensureIteratorResultIsObject_(y);if(!y.done)return this.context_.stop_(),y;var w=y.value}catch(S){return this.context_.yieldAllIterator_=null,this.context_.throw_(S),this.nextStep_()}this.context_.yieldAllIterator_=null;x.call(this.context_,w);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var c=this.program_(this.context_);if(c)return this.context_.stop_(),{value:c.value,done:!1}}catch(n){this.context_.yieldResult=void 0,this.context_.throw_(n)}this.context_.stop_();if(this.context_.abruptCompletion_){c=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(c.isException)throw c.exception;return{value:c.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(c){this.next=function(n){return c.next_(n)};this.throw=function(n){return c.throw_(n)};this.return=function(n){return c.return_(n)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(c,n){n=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(n));$jscomp.setPrototypeOf&&c.prototype&&$jscomp.setPrototypeOf(n,c.prototype);return n};
$jscomp.asyncExecutePromiseGenerator=function(c){function n(y){return c.next(y)}function x(y){return c.throw(y)}return new Promise(function(y,w){function S(L){L.done?y(L.value):Promise.resolve(L.value).then(n,x).then(S,w)}S(c.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(c){return $jscomp.asyncExecutePromiseGenerator(c())};$jscomp.asyncExecutePromiseGeneratorProgram=function(c){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(c)))};
$jscomp.polyfill("Reflect",function(c){return c?c:{}},"es6","es3");$jscomp.polyfill("Reflect.construct",function(c){return $jscomp.construct},"es6","es3");$jscomp.polyfill("Reflect.setPrototypeOf",function(c){if(c)return c;if($jscomp.setPrototypeOf){var n=$jscomp.setPrototypeOf;return function(x,y){try{return n(x,y),!0}catch(w){return!1}}}return null},"es6","es5");
$jscomp.polyfill("Promise",function(c){function n(){this.batch_=null}function x(L){return L instanceof w?L:new w(function(P,G){P(L)})}if(c&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return c;n.prototype.asyncExecute=function(L){if(null==this.batch_){this.batch_=[];var P=this;this.asyncExecuteFunction(function(){P.executeBatch_()})}this.batch_.push(L)};
var y=$jscomp.global.setTimeout;n.prototype.asyncExecuteFunction=function(L){y(L,0)};n.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var L=this.batch_;this.batch_=[];for(var P=0;P<L.length;++P){var G=L[P];L[P]=null;try{G()}catch(T){this.asyncThrow_(T)}}}this.batch_=null};n.prototype.asyncThrow_=function(L){this.asyncExecuteFunction(function(){throw L;})};var w=function(L){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var P=this.createResolveAndReject_();
try{L(P.resolve,P.reject)}catch(G){P.reject(G)}};w.prototype.createResolveAndReject_=function(){function L(T){return function(R){G||(G=!0,T.call(P,R))}}var P=this,G=!1;return{resolve:L(this.resolveTo_),reject:L(this.reject_)}};w.prototype.resolveTo_=function(L){if(L===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(L instanceof w)this.settleSameAsPromise_(L);else{a:switch(typeof L){case "object":var P=null!=L;break a;case "function":P=!0;break a;default:P=!1}P?this.resolveToNonPromiseObj_(L):
this.fulfill_(L)}};w.prototype.resolveToNonPromiseObj_=function(L){var P=void 0;try{P=L.then}catch(G){this.reject_(G);return}"function"==typeof P?this.settleSameAsThenable_(P,L):this.fulfill_(L)};w.prototype.reject_=function(L){this.settle_(2,L)};w.prototype.fulfill_=function(L){this.settle_(1,L)};w.prototype.settle_=function(L,P){if(0!=this.state_)throw Error("Cannot settle("+L+", "+P+"): Promise already settled in state"+this.state_);this.state_=L;this.result_=P;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};w.prototype.scheduleUnhandledRejectionCheck_=function(){var L=this;y(function(){if(L.notifyUnhandledRejection_()){var P=$jscomp.global.console;"undefined"!==typeof P&&P.error(L.result_)}},1)};w.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var L=$jscomp.global.CustomEvent,P=$jscomp.global.Event,G=$jscomp.global.dispatchEvent;if("undefined"===typeof G)return!0;"function"===typeof L?L=new L("unhandledrejection",{cancelable:!0}):
"function"===typeof P?L=new P("unhandledrejection",{cancelable:!0}):(L=$jscomp.global.document.createEvent("CustomEvent"),L.initCustomEvent("unhandledrejection",!1,!0,L));L.promise=this;L.reason=this.result_;return G(L)};w.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var L=0;L<this.onSettledCallbacks_.length;++L)S.asyncExecute(this.onSettledCallbacks_[L]);this.onSettledCallbacks_=null}};var S=new n;w.prototype.settleSameAsPromise_=function(L){var P=this.createResolveAndReject_();
L.callWhenSettled_(P.resolve,P.reject)};w.prototype.settleSameAsThenable_=function(L,P){var G=this.createResolveAndReject_();try{L.call(P,G.resolve,G.reject)}catch(T){G.reject(T)}};w.prototype.then=function(L,P){function G(ba,ia){return"function"==typeof ba?function(la){try{T(ba(la))}catch(ma){R(ma)}}:ia}var T,R,O=new w(function(ba,ia){T=ba;R=ia});this.callWhenSettled_(G(L,T),G(P,R));return O};w.prototype.catch=function(L){return this.then(void 0,L)};w.prototype.callWhenSettled_=function(L,P){function G(){switch(T.state_){case 1:L(T.result_);
break;case 2:P(T.result_);break;default:throw Error("Unexpected state: "+T.state_);}}var T=this;null==this.onSettledCallbacks_?S.asyncExecute(G):this.onSettledCallbacks_.push(G);this.isRejectionHandled_=!0};w.resolve=x;w.reject=function(L){return new w(function(P,G){G(L)})};w.race=function(L){return new w(function(P,G){for(var T=$jscomp.makeIterator(L),R=T.next();!R.done;R=T.next())x(R.value).callWhenSettled_(P,G)})};w.all=function(L){var P=$jscomp.makeIterator(L),G=P.next();return G.done?x([]):new w(function(T,
R){function O(la){return function(ma){ba[la]=ma;ia--;0==ia&&T(ba)}}var ba=[],ia=0;do ba.push(void 0),ia++,x(G.value).callWhenSettled_(O(ba.length-1),R),G=P.next();while(!G.done)})};return w},"es6","es3");$jscomp.polyfill("Object.is",function(c){return c?c:function(n,x){return n===x?0!==n||1/n===1/x:n!==n&&x!==x}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(n,x){var y=this;y instanceof String&&(y=String(y));var w=y.length;x=x||0;for(0>x&&(x=Math.max(x+w,0));x<w;x++){var S=y[x];if(S===n||Object.is(S,n))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,n,x){if(null==c)throw new TypeError("The 'this' value for String.prototype."+x+" must not be null or undefined");if(n instanceof RegExp)throw new TypeError("First argument to String.prototype."+x+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(n,x){return-1!==$jscomp.checkStringArgs(this,n,"includes").indexOf(n,x||0)}},"es6","es3");
$jscomp.iteratorFromArray=function(c,n){c instanceof String&&(c+="");var x=0,y=!1,w={next:function(){if(!y&&x<c.length){var S=x++;return{value:n(S,c[S]),done:!1}}y=!0;return{done:!0,value:void 0}}};w[Symbol.iterator]=function(){return w};return w};$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(n,x){return x})}},"es8","es3");
$jscomp.findInternal=function(c,n,x){c instanceof String&&(c=String(c));for(var y=c.length,w=0;w<y;w++){var S=c[w];if(n.call(x,S,w,c))return{i:w,v:S}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(n,x){return $jscomp.findInternal(this,n,x).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(n,x,y){var w=this.length||0;0>x&&(x=Math.max(0,w+x));if(null==y||y>w)y=w;y=Number(y);0>y&&(y=Math.max(0,w+y));for(x=Number(x||0);x<y;x++)this[x]=n;return this}},"es6","es3");$jscomp.typedArrayFill=function(c){return c?c:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Array.from",function(c){return c?c:function(n,x,y){x=null!=x?x:function(P){return P};var w=[],S="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];if("function"==typeof S){n=S.call(n);for(var L=0;!(S=n.next()).done;)w.push(x.call(y,S.value,L++))}else for(S=n.length,L=0;L<S;L++)w.push(x.call(y,n[L],L));return w}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var c={},n=Object.create(new $jscomp.global.Proxy(c,{get:function(x,y,w){return x==c&&"q"==y&&w==n}}));return!0===n.q}catch(x){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(c,n){return Object.prototype.hasOwnProperty.call(c,n)};
$jscomp.polyfill("WeakMap",function(c){function n(){if(!c||!Object.seal)return!1;try{var T=Object.seal({}),R=Object.seal({}),O=new c([[T,2],[R,3]]);if(2!=O.get(T)||3!=O.get(R))return!1;O.delete(T);O.set(R,4);return!O.has(T)&&4==O.get(R)}catch(ba){return!1}}function x(){}function y(T){var R=typeof T;return"object"===R&&null!==T||"function"===R}function w(T){if(!$jscomp.owns(T,L)){var R=new x;$jscomp.defineProperty(T,L,{value:R})}}function S(T){if(!$jscomp.ISOLATE_POLYFILLS){var R=Object[T];R&&(Object[T]=
function(O){if(O instanceof x)return O;Object.isExtensible(O)&&w(O);return R(O)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(n())return c;var L="$jscomp_hidden_"+Math.random();S("freeze");S("preventExtensions");S("seal");var P=0,G=function(T){this.id_=(P+=Math.random()+1).toString();if(T){T=$jscomp.makeIterator(T);for(var R;!(R=T.next()).done;)R=R.value,this.set(R[0],R[1])}};G.prototype.set=function(T,R){if(!y(T))throw Error("Invalid WeakMap key");
w(T);if(!$jscomp.owns(T,L))throw Error("WeakMap key fail: "+T);T[L][this.id_]=R;return this};G.prototype.get=function(T){return y(T)&&$jscomp.owns(T,L)?T[L][this.id_]:void 0};G.prototype.has=function(T){return y(T)&&$jscomp.owns(T,L)&&$jscomp.owns(T[L],this.id_)};G.prototype.delete=function(T){return y(T)&&$jscomp.owns(T,L)&&$jscomp.owns(T[L],this.id_)?delete T[L][this.id_]:!1};return G},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(c){function n(){if($jscomp.ASSUME_NO_NATIVE_MAP||!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var G=Object.seal({x:4}),T=new c($jscomp.makeIterator([[G,"s"]]));if("s"!=T.get(G)||1!=T.size||T.get({x:4})||T.set({x:4},"t")!=T||2!=T.size)return!1;var R=T.entries(),O=R.next();if(O.done||O.value[0]!=G||"s"!=O.value[1])return!1;O=R.next();return O.done||4!=O.value[0].x||"t"!=O.value[1]||!R.next().done?!1:!0}catch(ba){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(n())return c;var x=new WeakMap,y=function(G){this.data_={};this.head_=L();this.size=0;if(G){G=$jscomp.makeIterator(G);for(var T;!(T=G.next()).done;)T=T.value,this.set(T[0],T[1])}};y.prototype.set=function(G,T){G=0===G?0:G;var R=w(this,G);R.list||(R.list=this.data_[R.id]=[]);R.entry?R.entry.value=T:(R.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:G,value:T},R.list.push(R.entry),
this.head_.previous.next=R.entry,this.head_.previous=R.entry,this.size++);return this};y.prototype.delete=function(G){G=w(this,G);return G.entry&&G.list?(G.list.splice(G.index,1),G.list.length||delete this.data_[G.id],G.entry.previous.next=G.entry.next,G.entry.next.previous=G.entry.previous,G.entry.head=null,this.size--,!0):!1};y.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=L();this.size=0};y.prototype.has=function(G){return!!w(this,G).entry};y.prototype.get=function(G){return(G=
w(this,G).entry)&&G.value};y.prototype.entries=function(){return S(this,function(G){return[G.key,G.value]})};y.prototype.keys=function(){return S(this,function(G){return G.key})};y.prototype.values=function(){return S(this,function(G){return G.value})};y.prototype.forEach=function(G,T){for(var R=this.entries(),O;!(O=R.next()).done;)O=O.value,G.call(T,O[1],O[0],this)};y.prototype[Symbol.iterator]=y.prototype.entries;var w=function(G,T){var R=T&&typeof T;"object"==R||"function"==R?x.has(T)?R=x.get(T):
(R=""+ ++P,x.set(T,R)):R="p_"+T;var O=G.data_[R];if(O&&$jscomp.owns(G.data_,R))for(G=0;G<O.length;G++){var ba=O[G];if(T!==T&&ba.key!==ba.key||T===ba.key)return{id:R,list:O,index:G,entry:ba}}return{id:R,list:O,index:-1,entry:void 0}},S=function(G,T){var R=G.head_;return $jscomp.iteratorPrototype(function(){if(R){for(;R.head!=G.head_;)R=R.previous;for(;R.next!=R.head;)return R=R.next,{done:!1,value:T(R)};R=null}return{done:!0,value:void 0}})},L=function(){var G={};return G.previous=G.next=G.head=G},
P=0;return y},"es6","es3");
$jscomp.polyfill("Set",function(c){function n(){if($jscomp.ASSUME_NO_NATIVE_SET||!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var y=Object.seal({x:4}),w=new c($jscomp.makeIterator([y]));if(!w.has(y)||1!=w.size||w.add(y)!=w||1!=w.size||w.add({x:4})!=w||2!=w.size)return!1;var S=w.entries(),L=S.next();if(L.done||L.value[0]!=y||L.value[1]!=y)return!1;L=S.next();return L.done||L.value[0]==y||4!=L.value[0].x||L.value[1]!=L.value[0]?!1:S.next().done}catch(P){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(n())return c;var x=function(y){this.map_=new Map;if(y){y=$jscomp.makeIterator(y);for(var w;!(w=y.next()).done;)this.add(w.value)}this.size=this.map_.size};x.prototype.add=function(y){y=0===y?0:y;this.map_.set(y,y);this.size=this.map_.size;return this};x.prototype.delete=function(y){y=this.map_.delete(y);this.size=this.map_.size;return y};x.prototype.clear=function(){this.map_.clear();this.size=0};x.prototype.has=
function(y){return this.map_.has(y)};x.prototype.entries=function(){return this.map_.entries()};x.prototype.values=function(){return this.map_.values()};x.prototype.keys=x.prototype.values;x.prototype[Symbol.iterator]=x.prototype.values;x.prototype.forEach=function(y,w){var S=this;this.map_.forEach(function(L){return y.call(w,L,L,S)})};return x},"es6","es3");
$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(c,n){for(var x=1;x<arguments.length;x++){var y=arguments[x];if(y)for(var w in y)$jscomp.owns(y,w)&&(c[w]=y[w])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.values",function(c){return c?c:function(n){var x=[],y;for(y in n)$jscomp.owns(n,y)&&x.push(n[y]);return x}},"es8","es3");
$jscomp.polyfill("Math.hypot",function(c){return c?c:function(n){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var x,y,w;for(x=w=0;x<arguments.length;x++)w=Math.max(w,Math.abs(arguments[x]));if(1E100<w||1E-100>w){if(!w)return w;for(x=y=0;x<arguments.length;x++){var S=Number(arguments[x])/w;y+=S*S}return Math.sqrt(y)*w}for(x=y=0;x<arguments.length;x++)S=Number(arguments[x]),y+=S*S;return Math.sqrt(y)}},"es6","es3");
$jscomp.polyfill("Math.sign",function(c){return c?c:function(n){n=Number(n);return 0===n||isNaN(n)?n:0<n?1:-1}},"es6","es3");$jscomp.polyfill("Math.log1p",function(c){return c?c:function(n){n=Number(n);if(.25>n&&-.25<n){for(var x=n,y=1,w=n,S=0,L=1;S!=w;)x*=n,L*=-1,w=(S=w)+L*x/++y;return w}return Math.log(1+n)}},"es6","es3");$jscomp.polyfill("Math.log10",function(c){return c?c:function(n){return Math.log(n)/Math.LN10}},"es6","es3");
$jscomp.polyfill("Math.log2",function(c){return c?c:function(n){return Math.log(n)/Math.LN2}},"es6","es3");$jscomp.polyfill("Math.expm1",function(c){return c?c:function(n){n=Number(n);if(.25>n&&-.25<n){for(var x=n,y=1,w=n,S=0;S!=w;)x*=n/++y,w=(S=w)+x;return w}return Math.exp(n)-1}},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(n){return n})}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(c){return c?c:function(n,x){var y=$jscomp.checkStringArgs(this,n,"endsWith");n+="";void 0===x&&(x=y.length);x=Math.max(0,Math.min(x|0,y.length));for(var w=n.length;0<w&&0<x;)if(y[--x]!=n[--w])return!1;return 0>=w}},"es6","es3");var WMJSExtApplications=[];Ext.define("webmapjsext.WMJSExt.LayerPropertiesPanel",{extend:"Ext.tab.Panel",alias:"WMJSExtLayerPropertiesPanel",initComponent:function(){var c=this;c.applyColorScaleRange=function(){var x=c.getComponent("wmsextensions").getComponent("colorscalerangeminvalue").getValue(),y=c.getComponent("wmsextensions").getComponent("colorscalerangemaxvalue").getValue();c.WMJSLayerObject.wmsextensions({colorscalerange:x+","+y});c.WMJSLayerObject.draw("LayerPropertiesPanel::applyColorScaleRange")};c.applyWMSVersion=
function(){var x=c.getComponent("wmsversionpanel").getComponent("wmsversion").getValue();c.WMJSLayerObject.version=x;c.WMJSLayerObject.draw("LayerPropertiesPanel::applyWMSVersion")};c.projectionStore=Ext.create("Ext.data.Store",{fields:["title","srs","bbox"],data:{items:[]},proxy:{type:"memory",reader:{type:"json",root:"items"}}});var n=function(){Ext.create("Ext.window.Window",{width:"90%",height:"90%",autoDestroy:!0,closeAction:"close",maximizable:!0,layout:"fit",items:[Ext.create("WCSPanel",{autoDestroy:!0,
closeAction:"close",WMJSLayer:c.WMJSLayerObject})]}).show()};Ext.apply(this,{layout:"fit",frame:!1,border:!1,margin:0,items:[{xtype:"panel",title:I18n.color_range.text,margin:6,itemId:"wmsextensions",items:[{itemId:"colorscalerangeminvalue",xtype:"numberfield",fieldLabel:I18n.min_value.text,value:0,margin:6,listeners:{specialkey:function(x,y){y.getKey()==y.ENTER&&c.applyColorScaleRange()}}},{itemId:"colorscalerangemaxvalue",xtype:"numberfield",fieldLabel:I18n.max_value.text,value:"1.0",margin:6,listeners:{specialkey:function(x,
y){y.getKey()==y.ENTER&&c.applyColorScaleRange()}}}],buttons:[{xtype:"button",text:I18n.reset.text,handler:function(){c.WMJSLayerObject.wmsextensions({colorscalerange:""});c.WMJSLayerObject.draw("LayerPropertiesPanel::reset")}},{xtype:"button",text:I18n.apply.text,handler:function(){c.applyColorScaleRange()}}]},{xtype:"panel",title:I18n.wms_version.text,margin:6,itemId:"wmsversionpanel",items:[{itemId:"wmsversion",xtype:"textfield",labelWidth:250,margin:6,fieldLabel:I18n.wms_version.text,value:c.WMJSLayerObject.version,
listeners:{specialkey:function(x,y){y.getKey()==y.ENTER&&c.applyWMSVersion()}}},{xtype:"checkbox",itemId:"usewms130comaptmode",labelWidth:250,fieldLabel:I18n.wms_comp_mode.text,margin:6,listeners:{change:function(x,y){c.WMJSLayerObject.wms130bboxcompatibilitymode=y;c.WMJSLayerObject.draw("LayerPropertiesPanel::WMS1.3.0CompatMode")}}}]},{xtype:"panel",title:I18n.projections.text,margin:6,itemId:"wmsprojectionpanel",layout:"fit",items:[{xtype:"grid",border:!1,store:c.projectionStore,columns:[{text:I18n.title.text,
dataIndex:"title",flex:2},{text:I18n.epsg_code.text,dataIndex:"srs",flex:1},{text:I18n.bounding_box.text,dataIndex:"bbox",flex:2}],listeners:{select:{fn:function(x,y){x=y.get("bbox");y=y.get("srs");c.WMJSLayerObject.parentMaps[0].setProjection({srs:y,bbox:x});c.WMJSLayerObject.parentMaps[0].draw("wmsprojectionpanel")}}}}],listeners:{show:{fn:function(){c.projectionStore.removeAll();for(var x=0;x<c.WMJSLayerObject.projectionProperties.length;x++){var y=c.WMJSLayerObject.projectionProperties[x].srs;
try{y=epsgDescriptionLookup[c.WMJSLayerObject.projectionProperties[x].srs]}catch(w){}isDefined(y)||(y=c.WMJSLayerObject.projectionProperties[x].srs);c.projectionStore.add({title:y,srs:c.WMJSLayerObject.projectionProperties[x].srs,bbox:c.WMJSLayerObject.projectionProperties[x].bbox})}}}}},{xtype:"panel",title:I18n.file_metadata.text,margin:6,itemId:"wmsfilemetadatapanel",layout:"fit",listeners:{show:{fn:function(){c.getComponent("wmsfilemetadatapanel").update('<a target="_blank" href="'+c.WMJSLayerObject.service+
"&service=wms&request=getmetadata&format=image/png&srs=EPSG:4326&layer="+c.WMJSLayerObject.name+'">'+I18n.show_file_metadata.text+"</a>")}}}},{xtype:"panel",title:I18n.download_data_wcs.text,margin:6,itemId:"wcs",layout:"fit",items:[{xtype:"button",text:I18n.show.text,handler:function(){n()}}],listeners:{show:{fn:function(){n()}}}}],listeners:{afterlayout:{fn:function(){}}}});webmapjsext.WMJSExt.LayerPropertiesPanel.superclass.initComponent.apply(this,arguments)}});Ext.define("webmapjsext.WMJSExt.StylePanel",{extend:"Ext.panel.Panel",alias:"WMJSExtStylePanel",initComponent:function(){var c=this;c.buildData=function(){var n=[];if(!this.WMJSLayerObject.styles)return{name:I18n.default.text,title:I18n.default.text,abstracttext:I18n.no_styles_available.text};for(var x=0;x<c.WMJSLayerObject.styles.length;x++){var y={title:c.WMJSLayerObject.styles[x].title,name:c.WMJSLayerObject.styles[x].name,abstracttext:c.WMJSLayerObject.styles[x].abstracttext,legend:c.WMJSLayerObject.styles[x].legendURL};
n.push(y);0==x&&(c.defaultStyle=y)}return n};c.store=Ext.create("Ext.data.Store",{fields:[{name:"title",type:"string"},{name:"name",type:"string"},{name:"legend",type:"string"},{name:"abstracttext",type:"string"}]});c.grid=Ext.create("Ext.grid.Panel",{store:c.store,columns:[{header:I18n.title.text,dataIndex:"title",width:180},{header:I18n.name.text,dataIndex:"name",width:100},{header:I18n.description.text,dataIndex:"abstracttext",flex:!0}],border:0,listeners:{itemclick:{fn:function(n,x,y,w,S,L){c.itemclick&&
c.itemclick(c,{name:x.get("name"),title:x.get("title")})}},itemmouseenter:{fn:function(n,x,y,w,S,L){n=x.get("legend");c.legendWindow||(c.legendWindow=Ext.create("Ext.window.Window",{header:!1,layout:"auto",width:200,minHeight:300,autoDestroy:!1,closeAction:"hide",autoScroll:!1}));x=c.getPosition()[0]+c.getWidth()+10;y=c.getPosition()[1];c.legendWindow.showAt([x,y]);c.legendWindow.update('<img class="legendimage" src="'+n+'&transparent=true"/>')}},itemmouseleave:{fn:function(){c.legendWindow.hide()}}}});
c.loadStyles=function(n){c.WMJSLayerObject=n;c.store.loadRawData(c.buildData())};Ext.apply(this,{closable:!0,border:!1,layout:"fit",maxHeight:300,autoScroll:!0,items:[this.grid]});this.superclass.initComponent.apply(this,arguments)}});Ext.define("webmapjsext.WMJSExt.DimensionPanel",{extend:"Ext.panel.Panel",alias:"WMJSExtDimensionPanel",initComponent:function(c){var n=this;n.dimension.linked=this.Linked;n.currentValue=void 0;n.currentSize=void 0;var x=0;try{x=this.dimension.getIndexForValue(this.dimension.defaultValue)}catch(w){}if(n.dimension.currentValue)try{x=this.dimension.getIndexForValue(n.dimension.currentValue)}catch(w){}-1==x&&(x=n.dimension.size()-1);n.currentIndex=x;try{n.dimension.currentValue=n.dimension.getValueForIndex(x)}catch(w){error("WMJSExtDimensionPanel: getValueForIndex "+
x+" failed")}n.dimSlider=Ext.create("Ext.slider.Single",{width:50,useTips:!1,region:"center",value:x,minValue:0,maxValue:n.dimension.size()-1,increment:1,listeners:{drag:{fn:function(w){n.sliderChanged(w.getValue())}},change:{fn:function(w){n.sliderChanged(w.getValue())}}}});n.dimCheck=Ext.create("Ext.form.Checkbox",{margin:"0 0 0 0",bodyStyle:{"background-color":"white"},frame:!1,border:!1,plain:!0,checked:n.dimension.linked,handler:function(w,S){console.log("CHECKBOX",y[1].disabled);y[1].setDisabled(!S);
n.dimension.linked=S}});n.setValue=function(w){if(w===n.currentValue&&n.dimension.size()===n.currentSize)n.dimension.size();else return n._setValue(w)};n._setValue=function(w){n.currentValue=w;n.currentSize=n.dimension.size();try{if(w==WMJSDateTooEarlyString)n.currentIndex=0,n.dimensionValueLabel.setValueText(WMJSDateTooEarlyString);else if(w==WMJSDateTooLateString)n.currentIndex=n.dimension.size()-1,n.dimensionValueLabel.setValueText(WMJSDateTooLateString);else if(n.currentIndex=this.dimension.getIndexForValue(w),
-1!=n.currentIndex)n.dimensionValueLabel.setValueText(n.getValue());else{var S=parseISO8601DateToDate(w),L=parseISO8601DateToDate(n.dimension.get(0)),P=parseISO8601DateToDate(n.dimension.get(n.dimension.size()-1));S.getTime()<L.getTime()?(console.log("SOY YO",WMJSDateTooEarlyString),n.dimensionValueLabel.setValueText(WMJSDateTooEarlyString),n.layer.setDimension(n.dimension.name,WMJSDateTooEarlyString),n.currentIndex=0):S.getTime()>P.getTime()?(console.log(" o AQUI",w),n.dimensionValueLabel.setValueText(WMJSDateTooLateString),
n.layer.setDimension(n.dimension.name,WMJSDateTooLateString),n.currentIndex=n.dimension.size()-1):(console.log(" O AQUI",w),n.dimensionValueLabel.setValueText(WMJSDateOutSideRange),n.layer.setDimension(n.dimension.name,WMJSDateOutSideRange))}}catch(G){n.dimensionValueLabel.setValueText(WMJSDateOutSideRange),n.layer.setDimension(n.dimension.name,WMJSDateOutSideRange),n.currentIndex=0,console.log("CATCH")}n.dimSlider.suspendEvents();n.dimSlider.setValue(n.currentIndex,!1);n.dimSlider.resumeEvents()};
n.checkReferenceTime=function(w){for(var S=w=-1,L=0;L<n.dimensionPanels.length;L++){var P=n.layer.getDimension(n.dimensionPanels[L].dimension.name);"time"==P.name&&"ISO8601"==P.units&&(S=L);"reference_time"==P.name&&"ISO8601"==P.units&&(w=L);"forecast_reference_time"==P.name&&"ISO8601"==P.units&&(w=L)}n.dimSlider.suspendEvents();if(-1!=S&&-1!=w){var G=n.layer.getDimension(n.dimensionPanels[S].dimension.name),T=n.layer.getDimension(n.dimensionPanels[w].dimension.name);G.getValue()<T.getValue()&&(console.log("time should be increased:  "+
G.getValue()+"<"+T.getValue()),w=T.getValue(),n.dimensionPanels[S].dimSlider.setValue(G.getIndexForValue(w)+1,!1));w=this.Parent.WMJSLayer.parentMaps[0].getBBOX();L="&BBOX="+w.left+","+w.bottom+","+w.right+","+w.top;w=this.Parent.WMJSLayer.service+"service=WMS&REQUEST=GetMap&FORMAT=image/png";w=w+"&layers="+this.Parent.WMJSLayer.name;w=w+"&WIDTH=870&HEIGHT=919&CRS=EPSG%3A3857"+L+"&FORMAT=image/png&TRANSPARENT=TRUE&";for(L=0;L<this.Parent.WMJSLayer.dimensions.length;L++)"time"==this.Parent.WMJSLayer.dimensions[L].name&&
(w=w+"&time="+this.Parent.WMJSLayer.dimensions[L].currentValue),this.Parent.WMJSLayer.dimensions[L].name.includes("reference_time")&&(w=w+"&DIM_forecast_reference_time="+this.Parent.WMJSLayer.dimensions[L].currentValue);try{fetch(w).then(function(R){if(200==R.status)console.log("OK");else if(T.getValue()!=G.getValue()){R=(new Date(T.getValue())).getTime();var O=(new Date(T.defaultValue)).getTime();R=(new Date(G.defaultValue)).getTime()-(O-R);R=(new Date(R)).toISOString();n.layer.setDimension(G.name,
R);n.dimensionPanels[S].setValue(R);n.layer.draw("DimensionPanel::sliderChanged")}})}catch(R){console.log("ERROR",R)}}n.dimSlider.resumeEvents()};n.sliderChanged=function(w){var S=n.Parent.getUpdateStatus();n.Parent.setUpdateStatus(!1);try{n.layer.parentMaps[0].stopAnimating()}catch(L){n.Parent.setUpdateStatus(S)}n.currentIndex=w;n.dimensionValueLabel.setValueText(n.getValue());n.layer.setDimension(n.dimension.name,n.getValue());isDefined(n.dateTimeWindow)&&n.dateTimeWindow.setDimension(this.dimension);
n.checkReferenceTime(n.dimension);n.layer.draw("DimensionPanel::sliderChanged");n.Parent.setUpdateStatus(S)};n.getValue=function(){return n.dimension.get(n.currentIndex)};n.dimensionValueLabel=Ext.create("Ext.form.Label",{cls:"dimensionValueLabel",xtype:"label",region:"center",text:n.getValue()});n.dimensionTitleLabel=Ext.create("Ext.form.Label",{cls:"dimensionTitleLabel",xtype:"label",region:"center",text:""});n.dimensionPositionLabel=Ext.create("Ext.form.Label",{cls:"dimensionPositionLabel",xtype:"label",
region:"center",text:""});n.dimensionValueLabel.setValueText=function(w){if(w==WMJSDateOutSideRange||w==WMJSDateTooEarlyString||w==WMJSDateTooLateString){try{n.dimensionValueLabel.getEl().setStyle("backgroundColor","#FFAAAA")}catch(S){}n.dimensionPositionLabel.setText(" - (-/"+(n.dimension.size()-1+1)+")")}else{try{n.dimensionValueLabel.getEl().setStyle("backgroundColor","white")}catch(S){}n.dimensionPositionLabel.setText(" - ("+(n.currentIndex+1)+"/"+(n.dimension.size()-1+1)+")")}n.dimensionValueLabel.setText(w);
n.dimensionTitleLabel.setText(I18n.dimension.text+" "+n.dimension.name+" in "+n.dimension.units)};n.dimensionValueLabel.setValueText(n.getValue());var y=[];y.push(n.dimensionValueLabel);n.dimensionOptionsList=[];"ISO8601"==n.dimension.units&&(x=Ext.create(Ext.button.Button,{xtype:"button",text:"Set time",disabled:!this.Linked,tooltip:"Only enabled if checkbox ticked",region:"east",handler:function(){timeselectorWindow.show()}}),y.push(x),x=!1,n.layer.name&&-1!=n.layer.name.indexOf("GOME")&&(x=!0),
x&&(x=Ext.create("Ext.data.Store",{fields:[{name:"title",type:"string"},{name:"name",type:"string"}],data:[{title:"No duration",name:""},{title:"1 Second",name:"PT1S"},{title:"10 Seconds",name:"PT10S"},{title:"12 Seconds",name:"PT12S"},{title:"30 Seconds",name:"PT30S"},{title:"1 Minute",name:"PT1M"},{title:"5 Minutes",name:"PT5M"},{title:"10 Minutes",name:"PT10M"},{title:"15 Minutes",name:"PT15M"},{title:"30 Minutes",name:"PT30M"},{title:"60 Minutes",name:"PT1H"},{title:"90 Minutes",name:"PT1H30M"},
{title:"180 Minutes",name:"PT3H"},{title:"360 Minutes",name:"PT6H"},{title:"Daily",name:"P1D"}]}),x=Ext.create("Ext.form.ComboBox",{fieldLabel:"Choose duration",store:x,queryMode:"local",displayField:"title",valueField:"name",region:"center",listeners:{select:function(w,S){n.timeRangeDuration=S[0].get("name");w=n.dimension.getValue();try{w=n.layer.parentMaps[0].getDimension(n.dimension.name).currentValue}catch(L){}-1!=w.indexOf("/")&&(w=w.split("/")[0]);n.dimension.setTimeRangeDuration(n.timeRangeDuration);
n.dimSlider.setMaxValue(n.dimension.size()-1);console.log("Setting value back:"+w);n.layer.setDimension(n.dimension.name,w);n._setValue(w);n.layer.draw("DimensionPanel::sliderChanged")}}}),n.dimensionOptionsList.push(x)));n.dimensionValuePanel={type:"panel",layout:"border",background:"white",bodyStyle:{"background-color":"white"},border:!1,items:y};Ext.apply(this,{margin:"0",padding:"5 3 5 3",border:!1,frame:!1,plain:!0,bodyStyle:{"background-color":"white"},layout:{type:"vbox",align:"stretch"},items:[{xtype:"panel",
height:22,plain:!0,border:!1,layout:"hbox",items:[n.dimensionTitleLabel,n.dimensionPositionLabel]},{xtype:"panel",height:24,margin:"0 0 0 0",frame:!1,border:!1,plain:!0,layout:"border",bodyStyle:{"background-color":"white"},items:[{xtype:"panel",region:"west",width:13,frame:!1,border:!1,layout:"border",items:[n.dimCheck]},{xtype:"panel",region:"center",frame:!1,border:!1,plain:!0,layout:"border",items:[{xtype:"panel",layout:"fit",frame:!1,border:!1,plain:!0,region:"center",items:[n.dimSlider],bodyStyle:{"background-color":"white"}},
{xtype:"panel",region:"east",width:40,layout:"hbox",border:!1,frame:!1,bodyStyle:{"background-color":"white"},items:[{xtype:"button",text:"&lt;",width:20,height:22,handler:function(){var w=n.Parent.getUpdateStatus();n.Parent.setUpdateStatus(!1);n.dimSlider.setValue(n.dimSlider.getValue()-1);n.Parent.setUpdateStatus(w)}},{xtype:"button",text:"&gt;",width:20,height:22,handler:function(){var w=n.Parent.getUpdateStatus();n.Parent.setUpdateStatus(!1);n.dimSlider.setValue(n.dimSlider.getValue()+1);n.Parent.setUpdateStatus(w)}}]}]}]},
{xtype:"panel",height:22,plain:!0,border:!1,layout:"fit",items:[n.dimensionValuePanel]},{xtype:"panel",plain:!0,border:!1,layout:"fit",items:n.dimensionOptionsList}]});this.superclass.initComponent.apply(this,arguments)}});Ext.define("webmapjsext.WMJSExt.MapPanel",{extend:"Ext.panel.Panel",alias:"WMJSExtMapPanel",initComponent:function(){var c=this;c.webmapjsid=c.id+"wmjs";c.pointinfobutton=c.id+"pib";c.baseLayer=void 0;Ext.apply(this,{html:'<div id="'+c.webmapjsid+'"/>',layout:"fit",frame:!1,border:!1,margin:0,listeners:{afterlayout:{fn:function(){if(!c.webMapJS){initWMJS();c.webMapJS=new WMJSMap(Ext.fly(c.webmapjsid).dom);c.webMapJS.setWMJSTileRendererTileSettings(WMJSTileRendererTileSettings);c.webMapJS.setBaseURL("./webmapjs/");
c.webMapJS.requestProxy="./webmapjs_php/MakeRequest.php?";for(var n=[],x=0;x<baseLayerConfiguration.length;x++)if(new WMJSLayer(baseLayerConfiguration[x]),0==x){var y=new WMJSLayer(baseLayerConfiguration[x]);c.baseLayer=y;n.push(y);y=new WMJSLayer(baseLayerConfiguration[x]);y.enabled=!1;n.push(y)}else y=new WMJSLayer(baseLayerConfiguration[x]),n.push(y);c.webMapJS.setBaseLayers(n);n=c.getSize();c.webMapJS.setSize(n.width,n.height);c.webMapJS.setProjection(defaultProjection);c.webMapJS.draw("resize event")}}},
resize:{fn:function(n,x,y){isDefined(c.webMapJS)&&(n=c.getSize(),c.webMapJS.setSize(n.width,n.height),c.webMapJS.draw("resize event"))}}}});this.superclass.initComponent.apply(this,arguments)}});Ext.define("webmapjsext.WMJSExt.ServicePanel",{extend:"Ext.panel.Panel",alias:"WMJSExtServicePanel",initComponent:function(){var c=this;c.store=Ext.create("Ext.data.TreeStore",{root:{text:"Ext JS",id:"src",name:"test",expanded:!0},fields:["text","name"],folderSort:!0,sorters:[{property:"text",direction:"ASC"}]});c.selectedLayerName=c.name;c.tree=Ext.create("Ext.tree.Panel",{store:c.store,hideHeaders:!0,rootVisible:!1,fields:["text","name"],border:0,listeners:{itemclick:{fn:function(n,x,y,w,S,L){c.itemclick&&
(c.selectedLayerName=x.get("name"),1==x.get("leaf")&&c.itemclick(c,c.selectedLayerName,c.service))}}}});c.buildTreeFromNodes=function(n){if(0!=isDefined(c.service)&&0!=c.service.length){c.setLoading("Reading getCapabilities ...");c.WMSService=WMJSGetServiceFromStore(c.service,xml2jsonrequestURL);var x=function(w){c.tree.getRootNode().removeAll();c.tree.getRootNode().appendChild(w);c.setLoading(!1)},y=function(w){error("WMJSExtServicePanel: Unable to do GetCapabilities: "+w);Ext.Msg.alert("WMJSExtServicePanel",
"Exception:\n"+w);c.tree.getRootNode().removeAll();c.setLoading(!1)};try{c.WMSService.getNodes(x,y,n,xml2jsonrequestURL)}catch(w){y(w)}}};Ext.apply(this,{closable:!1,border:!1,layout:"fit",autoScroll:!0,listeners:{afterrender:{fn:function(){c.buildTreeFromNodes()}}},items:[this.tree]});this.superclass.initComponent.apply(this,arguments)}});var webmapjsext_WMJSExt_ServicePanels=[];
Ext.define("webmapjsext.WMJSExt.ServicePanelManager",{extend:"Ext.panel.Panel",alias:"WMJSExtServicePanelManager",requires:["webmapjsext.WMJSExt.ServicePanel"],initComponent:function(){this.getServicePanel=function(c,n){for(var x=0;x<webmapjsext_WMJSExt_ServicePanels.length;x++)if(webmapjsext_WMJSExt_ServicePanels[x].service==c)return webmapjsext_WMJSExt_ServicePanels[x].layerpanel=n,webmapjsext_WMJSExt_ServicePanels[x].window;var y=[];webmapjsext_WMJSExt_ServicePanels.push(y);y.layerpanel=n;y.service=
c;y.servicePanel=Ext.create("webmapjsext.WMJSExt.ServicePanel",{header:!1,constrain:!0,autoDestroy:!1,height:400,service:y.layerpanel.WMJSLayer.service,name:y.layerpanel.WMJSLayer.name,border:0,itemclick:function(w,S){y.layerpanel.setLayer(S)}});y.window=Ext.create("webmapjsext.WMJSExt.WindowFader",{title:I18n.layers.text,autoDestroy:!1,closeAction:"hide",autoScroll:!0,floating:!0,animate:!0,constrain:!0,width:500,items:[y.servicePanel],bbar:[{iconCls:"button_refresh",handler:function(){y.window.refresh()}},
{text:I18n.embed.text,tooltip:"Embed layer view",handler:function(){y.window.hide();y.layerpanel.add(Ext.create("webmapjsext.WMJSExt.ServicePanel",{title:I18n.layers.text,header:!0,collapsible:!0,service:y.layerpanel.WMJSLayer.service,name:y.layerpanel.WMJSLayer.name,border:2,itemclick:function(w,S,L){y.layerpanel.setLayer(S,L)}}))}},{scale:"small",tooltip:I18n.add_new_layer.tooltip,iconCls:"layer_logos button_layerlist_layernew",handler:function(){Ext.create("webmapjsext.WMJSExt.DataPanel",{dataPanelClicked:function(w){y.layerpanel.service=
w.service;y.layerpanel.name=w.layer;y.layerpanel.WMJSLayer.service=y.layerpanel.service;y.layerpanel.WMJSLayer.name=y.layerpanel.name;y.layerpanel.parseLayer(!0,function(S,L){isDefined(w.ready)&&w.ready(n,y.layerpanel.parentWebMapJS)});return n},webMapJS:y.layerpanel.parentWebMapJS}).show()}}]});y.window.refresh=function(){y.servicePanel.buildTreeFromNodes(!0)};return y.window}}});var webmapjsext_WMJSExt_LayerPanel_ServicePanelManager,getServicePanelManager=function(){webmapjsext_WMJSExt_LayerPanel_ServicePanelManager||(webmapjsext_WMJSExt_LayerPanel_ServicePanelManager=Ext.create("webmapjsext.WMJSExt.ServicePanelManager",{}));return webmapjsext_WMJSExt_LayerPanel_ServicePanelManager};
Ext.define("webmapjsext.WMJSExt.LayerPanel",{extend:"Ext.panel.Panel",alias:"WMJSExtLayerPanel",requires:"webmapjsext.WMJSExt.DimensionPanel webmapjsext.WMJSExt.StylePanel webmapjsext.WMJSExt.LayerPropertiesPanel Ext.form.field.Checkbox Ext.form.Label Ext.layout.container.Border Ext.slider.Single Ext.grid.Panel".split(" "),initComponent:function(){var c=this,n=auto_load,x=null;console.log("setTimeout() Ejemplo...",x);isDefined(c.opacity)||(c.opacity=1);c.WMJSLayer=new WMJSLayer({service:c.service,
name:c.name,style:c.style,opacity:c.opacity,transparent:c.transparent,enabled:c.enabled,updatetime:c.updatetime});c.reload=function(y){y=c.getDimensionPanel("time").dimension;var w=void 0,S=void 0;w=c.getDimensionPanel("forecast_reference_time");c.getDimensionPanel("time");isDefined(w)&&(w=w.dimension,S=w.currentValue);var L=y.dimMaxValue;y=c.WMJSLayer.service+"&service=WMS&request=GetCapabilities";var P=new ol.format.WMSCapabilities,G=function(T,R){console.log("Reload ON");isDefined(R)?console.log("Update for Reference_Time",
new Date):isDefined(T)};if(!y.includes("files")&&n)try{fetch(y).then(function(T){return T.text()}).then(function(T){T=P.read(T).Capability.Layer.Layer;T=$jscomp.makeIterator(T);for(var R=T.next();!R.done;R=T.next()){var O=R.value;if(O.Name==c.name){var ba=void 0;R=void 0;O=$jscomp.makeIterator(O.Dimension);for(var ia=O.next();!ia.done;ia=O.next())ia=ia.value,"time"==ia.name&&(ba=ia),"forecast_reference_time"==ia.name&&(R=ia);O=ba.default;ba=ba.values.split("/")[1];isDefined(R)?(R=R.default,console.log("REF",
R,S),S!=R&&c.parseLayer(!0,G(O,R))):(console.log("TIME",ba,L,O),L!=ba&&c.parseLayer(!0,G(O,void 0)))}}})}catch(T){console.log(e)}};c.getUpdateTime=function(y){return"PT1D"==y?216E5:"PT12H"==y?108E5:"PT6H"==y?72E5:"PT3H"==y?36E5:"PT1H30M"==y?18E5:"PT1H"==y?12E5:"PT30M"==y?6E5:"PT15M"==y?3E5:"PT10M"==y?18E4:"PT5M"==y?12E4:"PT3M"==y||"PT1M"==y?6E4:null};c.getUpdateStatus=function(){return n};c.setUpdateStatus=function(y){n=y};c.opacitySliderChanged=function(y){c.WMJSLayer&&(c.WMJSLayer.setOpacity(y/
100),c.opacity=y,0==c.WMJSLayer.enabled?0<y&&(c.WMJSLayer.display(!0),c.hideShowButton.setIconCls("button_layer_visible"),c.WMJSLayer.draw("LayerPanel::Opacity")):0==y&&(c.opacity_backup=100,c.hideShowButton.setIconCls("button_layer_hidden"),c.WMJSLayer.display(!1),c.WMJSLayer.draw("LayerPanel::Opacity")))};c.opacitySlider=Ext.create("Ext.slider.Single",{width:50,useTips:!1,animate:!1,value:100*c.opacity,minValue:0,maxValue:100,increment:1,tooltip:"transparency",listeners:{drag:{fn:function(y){c.opacitySliderChanged(y.getValue())}},
change:{fn:function(y){c.opacitySliderChanged(y.getValue())}}}});c.hideShowButton=Ext.create("Ext.button.Button",{xtype:"button",tooltip:I18n.hide_or_display_layer.tooltip,iconCls:!0===c.WMJSLayer.enabled?"button_layer_visible":"button_layer_hidden",handler:function(y,w){c.WMJSLayer.display(!c.WMJSLayer.enabled);0==c.WMJSLayer.enabled?(this.setIconCls("button_layer_hidden"),c.opacity_backup=c.opacitySlider.getValue(),c.opacitySlider.setValue(0)):(this.setIconCls("button_layer_visible"),c.opacitySlider.setValue(c.opacity_backup));
c.WMJSLayer.draw("LayerPanel::HideShow")}});c.hideShowLegendButton=Ext.create("Ext.button.Button",{xtype:"button",tooltip:I18n.hide_or_display_legend.tooltip,iconCls:!0===c.WMJSLayer.displayLegendInMapEnable?"button_scale_on":"button_scale_off",handler:function(y,w){c.WMJSLayer.displayLegendInMap(!c.WMJSLayer.displayLegendInMapEnable);0==c.WMJSLayer.displayLegendInMapEnable?this.setIconCls("button_scale_off"):this.setIconCls("button_scale_on");c.WMJSLayer.draw("LayerPanel::HideShow")}});c.hideShowAutoButton=
Ext.create("Ext.button.Button",{xtype:"button",tooltip:I18n.auto_update_layer.tooltip,iconCls:!0===n?"button_update_on":"button_update_off",handler:function(y,w){n=!n;0==n?this.setIconCls("button_update_off"):(this.setIconCls("button_update_on"),c.reload());c.WMJSLayer.draw("LayerPanel::HideShow")}});c.select=function(){for(var y=c.parentPanelList.items,w=0;w<y.getCount();w++)y.get(w).unselect();try{c.getEl().dom.style.border="3px solid #8080FF"}catch(S){}c.selected=!0};c.unselect=function(){try{c.getEl().dom.style.border=
"3px solid #777"}catch(y){}c.selected=!1};c.setOpacity=function(y){c.opacitySlider.setValue(100*y);c.opacity=100*y};c.dimCallBackAdded=!1;c.dimensionPanels=[];c.parseLayer=function(y,w){if(0!=isDefined(this.WMJSLayer.service)&&0!=this.WMJSLayer.service.length){c.setLoading("Reading GetCapabilities ...");for(var S=[],L=0;L<c.WMJSLayer.dimensions.length;L++)S.push(this.WMJSLayer.dimensions[L].clone());c.dimensionPanels=[];c.dimUpdate=function(){for(var G=0;G<c.dimensionPanels.length;G++){var T=c.WMJSLayer.getDimension(c.dimensionPanels[G].dimension.name);
c.dimensionPanels[G].setValue(T.getValue())}};c.setDimension=function(G,T){var R=c.getDimensionPanel(G);isDefined(R)?(c.WMJSLayer.setDimension(G,T),R.setValue(T)):error("WMJSExtLayerPanel::Dimension "+G+" not found")};c.getDimensionPanel=function(G){for(var T=0;T<c.dimensionPanels.length;T++)if(c.dimensionPanels[T].dimension.name===G)return c.dimensionPanels[T]};var P=function(G){var T=G;G.message&&(T=G.message);c.setLoading(!1);G="Unable to parse layer "+c.WMJSLayer.name+"\n"+T;c.WMJSLayer.hasError=
!0;error(G)};L=function(G){if(void 0!=c.WMJSLayer.parentMaps[0])if(c.WMJSLayer!=G)isDefined(G)&&P("WMJSExtLayerPanel internal error:\n"+G),w&&w(c),c.afterlayerready&&c.afterlayerready(c);else if(c.WMJSLayer.hasError){c.setLoading(!1);c.productButton.setText(c.WMJSLayer.path+c.WMJSLayer.title);c.styleButton.setText("");var T=c.WMJSLayer.lastError;isDefined(T)||(T="An error occurred connecting to WMS server");c.setTitle(T);error(T);G=new WMJSTimer;T=T.replaceAll("\n","<br/>");G.init(10,function(){Ext.Msg.alert(I18n.unable_to_connect_server.text,
I18n.unable_to_connect_server.text+"<br/><br/>"+T)});w&&w(c);c.afterlayerready&&c.afterlayerready(c)}else{c.WMJSLayer.getLayerRelative(function(la,ma,ua){c.productButton.setText("("+(ma+1)+"/"+ua+") "+c.WMJSLayer.title)},function(la){c.productButton.setText(c.WMJSLayer.path+c.WMJSLayer.title)});c.setStyleText(c.WMJSLayer.getStyleObject(c.WMJSLayer.currentStyle));c.dimensionPanels=[];c.dimensionPanelContainer.removeAll();var R=sync_layer,O="";for(G=0;G<c.WMJSLayer.dimensions.length;G++){for(var ba=
0;ba<S.length;ba++)S[ba].name==c.WMJSLayer.dimensions[G].name&&(c.WMJSLayer.setDimension(S[ba].name,S[ba].defaultValue),"time"==S[ba].name&&(R=S[ba].linked));ba=Ext.create("WMJSExtDimensionPanel",{dimension:c.WMJSLayer.dimensions[G],layer:c.WMJSLayer,dimensionPanels:c.dimensionPanels,Linked:R,Parent:c});c.dimensionPanels.push(ba);c.dimensionPanelContainer.add(ba);0<O.length&&(O+=", ");O+=c.WMJSLayer.dimensions[G].name}c.afterlayerready&&(w&&w(c),c.afterlayerready(c));for(G=0;G<c.WMJSLayer.dimensions.length;G++)R=
c.WMJSLayer.parentMaps[0].getDimension(c.WMJSLayer.dimensions[G].name),isDefined(R)&&c.WMJSLayer.dimensions[G].setClosestValue(R.defaultValue);c.setLoading(!1);for(G=0;G<c.WMJSLayer.dimensions.length;G++)R=c.WMJSLayer.parentMaps[0].getDimension(c.WMJSLayer.dimensions[G].name),c.dimensionPanels[G].setValue(c.WMJSLayer.dimensions[G].defaultValue),isDefined(R)&&R.defaultValue!=c.WMJSLayer.dimensions[G].defaultValue&&c.WMJSLayer.parentMaps[0].addListener("ondimchange",c.dimUpdate,!0),c.dimensionPanels[G].sliderChanged(c.WMJSLayer.dimensions[G].getIndexForValue(c.WMJSLayer.dimensions[G].defaultValue));
c.WMJSLayer.parentMaps[0].rebuildMapDimensions();0==c.dimCallBackAdded&&(c.WMJSLayer.parentMaps[0].addListener("ondimchange",c.dimUpdate,!0),c.dimCallBackAdded=!0);try{c.styleButton.loadStyles()}catch(la){}var ia=!1;isDefined(c.name)&&0<c.name.length&&(ia=!0);c.setTitle("Layer "+c.WMJSLayer.name);if(!1===ia){if(1==c.autoChooseLayer){c.autoChooseLayer=!1;c.WMJSLayer.autoSelectLayer(function(la){c.setLayer(la.name);c.WMJSLayer.zoomToLayer();ia=!0});return}c.productButton.showService()}c.WMJSLayer.WMJSService?
c.layerAbstractPanel.update("<span style='margin:5px;display:block;padding:5px;'><b>"+I18n.layer.text+"</b><table class='adagucviewer_wmsjsext_layerpanel_abstract'><tr><td style='width:50px;'><i>"+I18n.title.text+"</i></td><td>"+c.WMJSLayer.title+"</td></tr><tr><td><i>"+I18n.name.text+"</i></td><td>"+c.WMJSLayer.name+"</td></tr><tr><td><i>"+I18n.abstract.text+"</i></td><td>"+c.WMJSLayer.abstract+"</td></tr></table><hr/><b>"+I18n.service.text+"</b><table class='adagucviewer_wmsjsext_layerpanel_abstract'><tr><td><i>"+
I18n.title.text+"</i></td><td> "+c.WMJSLayer.WMJSService.title+"</td></tr><tr><td><i>"+I18n.service.text+"</i></td><td>"+c.WMJSLayer.WMJSService.onlineresource+"</td></tr><tr><td><i>"+I18n.abstract.text+"</i></td><td>"+c.WMJSLayer.WMJSService.abstract+"</td></tr></table></span>"):c.layerAbstractPanel.update("...");G=function(){var la=c.WMJSLayer.parentMaps[0].getLegendGraphicURLForLayer(c.WMJSLayer),ma=c.WMJSLayer.parentMaps[0].getLegendStore();if(c.layerLegendPanel.getEl()){var ua=$(c.layerLegendPanel.getEl().dom).find("canvas")[0].getContext("2d");
(la=ma.getImageForSrc(la))?(ua.rect(0,0,90,250),ua.fillStyle="white",ua.fill(),ua.drawImage(la.getElement()[0],0,0)):(ua.rect(0,0,90,250),ua.fillStyle="gray",ua.fill())}};c.WMJSLayer.parentMaps[0].getListener().addToCallback("onlegendready",G,!0);G();void 0==c.updatetime&&(console.log("TIME UNDEFINED"),G=864E5,void 0!=c.WMJSLayer.getDimension("time")&&(G=c.WMJSLayer.getDimension("time").values,G=getUpdateTime(G.slice(G.lastIndexOf("/")+1))),console.log("PT",G),c.updatetime=G);null==x&&(console.log("Pongo el timer"),
x=setInterval(c.reload,c.updatetime,c.updatetime),console.log(x,c.updatetime))}};try{if(c.WMJSLayer.parseLayer(L,y,"LayerPanel::parseLayer",xml2jsonrequestURL),!0===y)try{console.log("clearing cache"),c.WMJSLayer&&c.WMJSLayer.parentMaps&&0<c.WMJSLayer.parentMaps.length&&(c.WMJSLayer.parentMaps[0].clearImageStore(),c.WMJSLayer.parentMaps[0].loadLegendInline(!0))}catch(G){console.error(G)}}catch(G){P(G)}}};c.duplicateLayer=function(){createNewLayerPanel(c.parentWebMapJS,c.WMJSLayer)};c.productButton=
Ext.create("Ext.button.Button",{text:I18n.please_select_product.text,textAlign:"left",iconAlign:"right",iconCls:"button_combobox",tooltip:I18n.select_layer_product_from_service.tooltip,handler:function(y){void 0==c.service||0==c.service.length?Ext.create("webmapjsext.WMJSExt.DataPanel",{dataPanelClicked:function(w){c.service=w.service;c.name=w.layer;c.WMJSLayer.service=c.service;c.WMJSLayer.name=c.name;c.parseLayer(!0,function(S,L){isDefined(w.ready)&&w.ready(c,c.parentWebMapJS)},!0);return c},webMapJS:c.parentWebMapJS}).show():
y.showService()}});c.productButton.showService=function(){var y=getServicePanelManager();c.servicePanelWindow=y.getServicePanel(c.service,c);c.servicePanelWindow.showAt([this.getPosition()[0]+32,this.getPosition()[1]])};c.styleButton=Ext.create("Ext.button.Button",{text:I18n.default.text,textAlign:"left",iconAlign:"right",iconCls:"button_combobox",tooltip:I18n.change_style_layer.tooltip,handler:function(){c.styleButton.loadStyles();c.stylePanel.showAt([this.getPosition()[0]+32,this.getPosition()[1]])},
listeners:{afterrender:{fn:function(){c.stylePanel||(c.stylePanel=Ext.create("webmapjsext.WMJSExt.WindowFader",{title:I18n.available_styles.text,width:650,autoDestroy:!1,closeAction:"hide",items:[Ext.create("WMJSExtStylePanel",{header:!1,WMJSLayerObject:c.WMJSLayer,border:0,itemclick:function(y,w){c.setStyle(c.WMJSLayer.getStyleObject(w.name))}})]}));c.styleButton.loadStyles=function(){if(c.stylePanel&&(c.stylePanel.getComponent(0).loadStyles(c.WMJSLayer),c.styleButton.setText("default"),0<c.WMJSLayer.currentStyle.length)){var y=
c.WMJSLayer.currentStyle;c.styleButton.setText(y);try{c.setStyleText(c.WMJSLayer.getStyleObject(c.WMJSLayer.currentStyle))}catch(w){}}}}}}});c.dimensionPanelContainer=Ext.create("Ext.panel.Panel",{border:!1,padding:1,collapsed:!1,collapsible:!0,title:I18n.dimensions.text,cls:"WMJSExtLayerPanelDimensionHeader"});c.servicePanelContainer=Ext.create("webmapjsext.WMJSExt.ServicePanel",{title:I18n.layers.text,cls:"WMJSExtLayerPanelDimensionHeader",header:!0,collapsible:!0,collapsed:!0,service:c.WMJSLayer.service,
name:c.WMJSLayer.name,border:2,itemclick:function(y,w,S){c.setLayer(w,S)}});c.layerInfoPanelContainer=Ext.create("Ext.panel.Panel",{border:!1,frame:!1,height:35,padding:"3 3 3 3",layout:"border",items:[{xtype:"panel",region:"center",layout:"fit",border:!1,frame:!1,items:[c.productButton]},{style:{borderColor:"#EEE",borderStyle:"solid",borderWidth:"0px",backgroundColor:"#FFF"},xtype:"panel",region:"east",itemId:"layerinfo",width:40,layout:"hbox",border:!1,frame:!1,padding:"0 0 0 0",items:[{xtype:"button",
text:"&lt;",width:20,height:29,handler:function(){c.WMJSLayer.getPreviousLayer(function(y){c.setLayer(y.name)})}},{xtype:"button",text:"&gt;",width:20,height:29,handler:function(){c.WMJSLayer.getNextLayer(function(y){c.setLayer(y.name)})}}]}]});c.setLayer=function(y,w){c.WMJSLayer.name=y;isDefined(w)&&(c.WMJSLayer.service=w);c.parseLayer(void 0,void 0,!0);c.WMJSLayer.draw("LayerPanel::setLayer");c.servicePanelWindow&&c.servicePanelWindow.hide();c.stylePanel&&c.styleButton.loadStyles()};c.setStyleText=
function(y){0==isDefined(y)?c.styleButton.setText("default"):c.styleButton.setText("("+(y.index+1)+"/"+y.nrOfStyles+") "+y.title)};c.setStyle=function(y){try{c.WMJSLayer.setStyle(y.name)}catch(w){}c.WMJSLayer.draw("LayerPanel::setStyle");c.stylePanel.hide();c.setStyleText(y)};c.styleInfoPanelContainer=Ext.create("Ext.panel.Panel",{border:!1,frame:!1,height:32,padding:"0 3 3 3",layout:"border",items:[{xtype:"panel",region:"center",layout:"fit",border:!1,frame:!1,items:[c.styleButton]},{style:{borderColor:"#EEE",
borderStyle:"solid",borderWidth:"0px",backgroundColor:"#FFF"},xtype:"panel",region:"east",width:40,layout:"hbox",border:!1,frame:!1,items:[{xtype:"button",text:"&lt;",width:20,height:29,handler:function(){c.setStyle(c.WMJSLayer.getStyleObject(c.WMJSLayer.currentStyle,-1))}},{xtype:"button",text:"&gt;",width:20,height:29,handler:function(){c.setStyle(c.WMJSLayer.getStyleObject(c.WMJSLayer.currentStyle,1))}}]}]});c.animationButton={listeners:{afterrender:{fn:function(y){c.WMJSLayer.parentMaps[0].isAnimating&&
y.setIconCls("button_stop_animation");c.WMJSLayer.parentMaps[0].addListener("onstopanimation",function(){y.setIconCls("button_play_animation")},!0);c.WMJSLayer.parentMaps[0].addListener("onstartanimation",function(){y.setIconCls("button_stop_animation")},!0)}}},scale:"small",iconCls:"button_play_animation",tooltip:I18n.start_or_stop_animation.tooltip,handler:function(y){if(c.WMJSLayer.parentMaps[0].isAnimating)c.WMJSLayer.parentMaps[0].stopAnimating(),y.setIconCls("button_play_animation");else if(y.setIconCls("button_stop_animation"),
y=c.WMJSLayer.getDimension("time"),void 0==y)alert(I18n.no_time_dimension_in_layer.text);else{!1===c.WMJSLayer.getDimension("time").linked&&(c.WMJSLayer.getDimension("time").linked=!0,c.parseLayer(!1,void 0));for(var w=[],S=y.size(),L=void 0,P=0;P<c.WMJSLayer.dimensions.length;P++)c.WMJSLayer.dimensions[P].name.includes("reference_time")&&(L=c.WMJSLayer.dimensions[P]);isDefined(L)?(refMaxValue=L.currentValue,P=y.getIndexForValue(refMaxValue)):P=S-24;L=S;var G=y.getIndexForValue(y.currentValue);G=
L-1-G;P-=G;L-=G;0>P&&(L+=-P,P=0);0>L&&(L=0);P>S-1&&(P=S-1);for(L>S&&(L=S);P<L;P++)w.push({name:y.name,value:y.getValueForIndex(P)});c.WMJSLayer.parentMaps[0].draw(w)}}};c.moveUp=function(){var y=c.up("panel"),w=y.items.indexOf(c);0<w&&(y.move(w,w-1),c.WMJSLayer.moveUp())};c.moveDown=function(){var y=c.up("panel"),w=y.items.indexOf(c);w<y.items.length-1&&(y.move(w,w+1),c.WMJSLayer.moveDown())};c.layerLegendPanel=Ext.create("Ext.panel.Panel",{xtype:"panel",region:"west",html:"<canvas width=90 height=250></canvas>",
border:!1,frame:!1,plain:!0,width:90});c.layerAbstractPanel=Ext.create("Ext.panel.Panel",{xtype:"panel",region:"center",layout:"fit",autoScroll:!0,border:!1,frame:!1,plain:!0});Ext.apply(this,{margin:"0 0 2 0",frame:!0,plain:!0,padding:"0 0 0 0",collapsible:!1,closable:!0,hideCollapseTool:!1,header:!0,layout:{type:"vbox",align:"stretch"},items:[c.layerInfoPanelContainer,c.styleInfoPanelContainer,c.dimensionPanelContainer,c.servicePanelContainer,{xtype:"panel",layout:"border",frame:!1,border:!1,plain:!0,
title:"Service info",cls:"WMJSExtLayerPanelDimensionHeader",collapsible:!0,collapsed:!0,height:250,region:"center",items:[c.layerAbstractPanel,c.layerLegendPanel]}],bbar:[{xtype:"button",tooltip:I18n.move_layer_up.tooltip,iconCls:"button_layerlist_layerup",handler:function(y,w){c.moveUp()}},{xtype:"button",tooltip:I18n.move_layer_down.tooltip,iconCls:"button_layerlist_layerdown",handler:function(y,w){c.moveDown()}},{iconCls:"button_settings_icon",tooltip:I18n.layer_properties.tooltip,handler:function(y,
w){c.propertiesPanel||(c.propertiesPanel=Ext.create("Ext.window.Window",{title:I18n.properties_for.text+c.WMJSLayer.title,width:600,autoDestroy:!1,closeAction:"hide",layout:"fit",items:[Ext.create("WMJSExtLayerPropertiesPanel",{header:!1,WMJSLayerObject:c.WMJSLayer,border:0,itemclick:function(S,L){}})]}));c.propertiesPanel.showAt(y.getPosition())}},{iconCls:"button_refresh",tooltip:I18n.reload_this_layer.tooltip,handler:function(){isDefined(c.servicePanelWindow)&&c.servicePanelWindow.refresh(!0);
c.parseLayer(!0,void 0,!0)}},c.animationButton,,{xtype:"tbfill"},{xtype:"label",text:I18n.opacity.text},c.opacitySlider,c.hideShowButton,c.hideShowLegendButton,c.hideShowAutoButton,{scale:"small",iconCls:"button_zoomfullextent",tooltip:I18n.zoom_to_this_layer.tooltip,handler:function(){c.WMJSLayer.zoomToLayer()}}],listeners:{render:function(y){if(y.header)y.header.on("click",function(){c.select()});c.select()},afterrender:{fn:function(){c.parseLayer(void 0,void 0,!0)}},beforeclose:function(y){c.WMJSLayer.parentMaps[0].stopAnimating();
c.WMJSLayer.remove();clearInterval(x)}}});this.callParent(arguments);c.parseLayer(void 0,void 0,!0)}});Ext.define("webmapjsext.WMJSExt.DataPanel",{extend:"Ext.window.Window",alias:"WMJSExtDataPanel",initComponent:function(){var c=this,n=this.dataPanelClicked;DataSelectorModel=Ext.define("DataSelectorModel",{extend:"Ext.data.Model",fields:[{name:"title"},{name:"abs"},{name:"thumbnail"},{name:"service"},{name:"layer"},{name:"style"},{name:"srs"},{name:"bbox"},{name:"baselayerservice"},{name:"baselayername"},{name:"opacity"}]});var x=Ext.create("Ext.data.Store",{model:"DataSelectorModel",data:dataChooserConfiguration}),
y=function(w,S){var L=function(T){T=G.getComponent("AddCustomWMSPanel").getComponent("customwmsurltextarea").getValue();T=WMJScheckURL(T);if(5>T.length)alert("Invalid url given.");else{try{Ext.state.Manager.set("formFieldValues",T)}catch(R){console.log(R)}c.layerPanel=w({service:T,ready:function(R,O){isDefined(R)?R.WMJSLayer.hasError?(new WMJSTimer).init(10,function(){Ext.Msg.alert(I18n.unable_to_connect_server.text,I18n.unable_to_connect_server.text+"<br/><br/>"+layerPanel.WMJSLayer.lastError)}):
G.hide():G.hide()}})}},P=Ext.create("Ext.form.field.Text",{itemId:"customwmsurltextarea",emptyText:I18n.enter_wms_version_url.text,height:25,margin:10,stateful:!0,listeners:{specialkey:function(T,R){R.getKey()==R.ENTER&&L(S)},afterrender:function(T){if(T=Ext.state.Manager.get("formFieldValues"))console.log(T),P.setValue(T)}}});var G=Ext.create("Ext.window.Window",{title:I18n.add_custom_service.text,width:620,height:200,autoDestroy:!0,autoScroll:!1,modal:!0,layout:"border",items:[{xtype:"panel",region:"north",
layout:"fit",border:!1,itemId:"AddCustomWMSPanel",items:[P]},{xtype:"label",margin:10,html:"Add your own WMS version 1.1.1 server address in the box above. For example:<br> https://geoservices.knmi.nl/cgi-bin/RADNL_OPER_R___25PCPRR_L3.cgi? ",region:"center"}],buttons:[{text:I18n.add.text,handler:function(){L(S)}}]});G.show()};c.showCustomWMSWindow=function(){y(c.dataPanelClicked,c.webMapJS)};Ext.apply(this,{title:I18n.add_layers_and_services.text,width:.8*$(window).width(),height:.8*$(window).height(),
autoDestroy:!0,modal:!0,autoScroll:!0,id:"images-view",buttons:[{scale:"large",text:"BACK",handler:function(){c.close();Ext.create("webmapjsext.WMJSExt.FolderPanel",{dataPanelClicked:n,webMapJS:mainWebmapJS.webMapJS}).show()}},{scale:"large",text:I18n.add_custom_wms_service.text,handler:function(){c.close();y(c.dataPanelClicked,c.webMapJS)}},{scale:"large",text:"CLOSE",handler:function(){c.close()}}],items:Ext.create("Ext.view.View",{store:x,tpl:'<tpl for=".">;<div class="thumb-wrap" id="{title}">;<div class="thumb"><img src="{thumbnail}" title="{abs}"></div>;<span class="x-editable">{title}</span></div>;</tpl>;<div class="x-clear"></div>'.split(";"),
trackOver:!0,overItemCls:"x-item-over",itemSelector:"div.thumb-wrap",emptyText:"No images to display",listeners:{itemclick:function(w,S){c.dataPanelClicked({title:S.get("title"),thumbnail:S.get("thumbnail"),service:S.get("service"),layer:S.get("layer"),srs:S.get("srs"),bbox:S.get("bbox"),style:S.get("style"),baselayerservice:S.get("baselayerservice"),baselayername:S.get("baselayername"),opacity:S.get("opacity")});c.close()}}})});webmapjsext.WMJSExt.DataPanel.superclass.initComponent.apply(this,arguments)}});var defaultBaselayer={service:"https://geoservices.knmi.nl/cgi-bin/worldmaps.cgi?",name:"world_line"};
Ext.define("webmapjsext.WMJSExt.BaseMapSelector",{extend:"Ext.panel.Panel",alias:"WMJSExtBaseMapSelector",requires:["Ext.form.field.Checkbox","Ext.form.Label","Ext.layout.container.Border","Ext.slider.Single","Ext.grid.Panel"],initComponent:function(){var c=this.webmapjsext;OverlaySelectorModel=Ext.define("OverlaySelectorModel",{extend:"Ext.data.Model",fields:[{name:"title"},{name:"enabled",type:"bool"},{name:"type"},{name:"layer",type:"object"},{name:"name"}]});var n=Ext.create("Ext.data.Store",
{model:"OverlaySelectorModel"});Ext.apply(this,{autoScroll:!0,plain:!0,frame:!1,border:!1,bodyCls:"layerlistbg",title:" ",tooltip:I18n.basemaps_overlays.tooltip,iconCls:"button_basemaps32",defaultType:"checkbox",layout:"anchor",items:Ext.create("Ext.grid.Panel",{header:!1,bodyCls:"layerlistbg",autoScroll:!1,plain:!0,frame:!1,border:!1,store:n,columns:[{text:"",dataIndex:"enabled",xtype:"checkcolumn",width:30,listeners:{checkchange:function(x,y,w){n.getAt(y).get("layer").enabled=w;c.webMapJS.draw("WMJSExtMapTypePanel::enableLayer")}}},
{text:I18n.title.text,dataIndex:"title",flex:2},{text:I18n.layer.text,dataIndex:"name",flex:1},{text:I18n.type.text,dataIndex:"type"}],columnLines:!0,iconCls:"icon-grid"}),listeners:{show:{fn:function(){for(var x=[],y=c.webMapJS.getBaseLayers(),w=0;w<y.length;w++){var S=y[w].title;0==w&&(S="Default base layer");x.push({title:S,layer:y[w],name:y[w].name,enabled:y[w].enabled,type:1==y[w].keepOnTop?"overlay":"baselayer"})}n.loadRawData(x)}}}});this.superclass.initComponent.apply(this,arguments)}});defaultBaselayer={service:"https://geoservices.knmi.nl/wms?DATASET=baselayers&",name:"countryborders"};
Ext.define("webmapjsext.WMJSExt.MapTypeSelector",{extend:"Ext.panel.Panel",alias:"WMJSExtMapTypeSelector",requires:["Ext.form.field.Checkbox","Ext.form.Label","Ext.layout.container.Border","Ext.slider.Single","Ext.grid.Panel"],initComponent:function(){var c=this.maptypeclicked;MapTypeSelectorModel=Ext.define("MapTypeSelectorModel",{extend:"Ext.data.Model",fields:[{name:"title"},{name:"bbox"},{name:"srs"},{name:"url"},{name:"baselayer"}]});var n=Ext.create("Ext.data.Store",{model:"MapTypeSelectorModel",
data:mapTypeConfiguration});Ext.apply(this,{id:"maptypeselector",title:" ",tooltip:I18n.predefined_areas.tooltip,iconCls:"button_maptype32",autoScroll:!0,plain:!0,frame:!1,border:!1,baseCls:"layerlistbg",cls:"layerlistbg",items:[Ext.create("Ext.view.View",{title:"Baselayers",plain:!0,frame:!1,border:!1,cls:"layerlistbg",store:n,tpl:'<tpl for=".">;<div class="thumb-wrap" id="{title}">;<div class="thumb"><img src="{url}" title="{title}"></div>;<span class="x-editable">{title}</span></div>;</tpl>;<div class="x-clear"></div>'.split(";"),
trackOver:!0,overItemCls:"x-item-over",itemSelector:"div.thumb-wrap",emptyText:"No images to display",prepareData:function(x){var y=[x.bbox[0],x.bbox[1],x.bbox[2],x.bbox[3]];if(1.375<(x.bbox[2]-x.bbox[0])/(x.bbox[3]-x.bbox[1])){var w=(x.bbox[2]-x.bbox[0])/1.375;w=(w-(x.bbox[3]-x.bbox[1]))/2;y[1]=x.bbox[1]-w;y[3]=x.bbox[3]+w}else w=1.375*(x.bbox[3]-x.bbox[1]),w=(w-(x.bbox[2]-x.bbox[0]))/2,y[0]=x.bbox[0]-w,y[2]=x.bbox[2]+w;w=defaultBaselayer.service;var S=defaultBaselayer.name;x.baselayer.service&&
x.baselayer.name&&(w=x.baselayer.service,S=x.baselayer.name);x.url=w+"service=WMS&request=GetMap&styles=&width=160&height=120&format=image/png";x.url+="&layers="+S;x.url+="&version=1.1.1";x.url+="&bbox="+y[0]+","+y[1]+","+y[2]+","+y[3];x.url+="&srs="+x.srs;return x},listeners:{itemclick:function(x,y){c(y)}}})]});this.superclass.initComponent.apply(this,arguments)}});Ext.define("webmapjsext.WMJSExt.AnimationPanel",{extend:"Ext.panel.Panel",alias:"WMJSExtAnimationPanel",requires:["Ext.form.field.ComboBox","Ext.form.field.Picker","Ext.form.field.Trigger","Ext.layout.container.Form"],initComponent:function(){var c=this,n=Ext.create("Ext.data.Store",{fields:[{type:"string",name:"name"},{type:"string",name:"title"},{type:"object",name:"wmjslayer"}]}),x=Ext.create("Ext.data.Store",{fields:[{type:"string",name:"name"},{type:"object",name:"wmjsdimension"}]}),y=function(){var P=
c.mappanel.webMapJS.getLayers();n.removeAll();for(var G=0;G<P.length;G++)n.add({name:P[G].service+P[G].name,title:P[G].title,wmjslayer:P[G]})},w=function(P){if(isDefined(P)){c.selectedLayer=P;var G=c.getComponent("dimensionpanel").getComponent("dimensioncombobox");G.disable();x.removeAll();for(var T=0;T<P.dimensions.length;T++)x.add({name:P.dimensions[T].name,wmjsdimension:P.dimensions[T]});0<x.getCount()&&(G.setValue(x.getAt(0).get("name")),S(x.getAt(0).get("wmjsdimension")),G.enable())}},S=function(P){isDefined(P)&&
(c.getComponent("dimensionvaluespanel").getComponent("dimensioncurrentvalue").setValue(P.getValue()),c.dimension=P)},L=function(){isDefined(c.dimensionName)&&isDefined(c.currentValue)&&(c.mappanel.webMapJS.stopAnimating(),c.mappanel.webMapJS.setDimension(c.dimensionName,c.currentValue),c.mappanel.webMapJS.draw("AnimationPanel::stop"))};Ext.apply(this,{border:!1,frame:!0,items:[{xtype:"panel",itemId:"layerpanel",layout:"border",frame:!0,border:!1,margin:3,height:36,items:[{margin:3,xtype:"combobox",
itemId:"layercombo",region:"center",fieldLabel:I18n.select_layer.text,labelWidth:110,displayField:"title",valuefield:"name",store:n,queryMode:"local",listeners:{select:{fn:function(P,G){P=G[0].get("wmjslayer");w(P)}}}},{xtype:"button",region:"east",width:23,iconCls:"button_refresh",handler:function(){y()}}]},{xtype:"panel",itemId:"dimensionpanel",layout:"fit",frame:!0,border:!1,margin:3,height:36,items:[{margin:3,xtype:"combobox",itemId:"dimensioncombobox",region:"center",fieldLabel:I18n.select_dimension.text,
labelWidth:110,disabled:!0,store:x,displayField:"name",valuefield:"name",queryMode:"local",listeners:{select:{fn:function(P,G){S(G[0].get("wmjsdimension"))}}}}]},{xtype:"panel",itemId:"dimensionvaluespanel",frame:!0,border:!1,margin:3,layout:"border",height:36,items:[{xtype:"label",text:I18n.start_at.text+":",width:110,region:"west",margin:3},{itemId:"dimensioncurrentvalue",xtype:"textfield",region:"center",frame:!1,border:!1,margin:3},{xtype:"button",region:"east",width:23,iconCls:"button_refresh",
handler:function(){0<n.getCount()&&w(c.selectedLayer)}}]},{xtype:"panel",layout:"border",itemId:"numberofstepspanel",border:!1,frame:!0,height:36,margin:3,items:[{xtype:"label",text:I18n.number_of_steps.text+":",width:110,region:"west",margin:3},{xtype:"numberfield",itemId:"numberofstepsnumberfield",region:"center",value:12}]},{xtype:"panel",layout:"border",itemId:"delaypanel",border:!1,frame:!0,height:36,margin:3,items:[{xtype:"label",text:I18n.delay_ms.text+":",width:110,region:"west",margin:3},
{xtype:"numberfield",itemId:"delaynumberfield",region:"center",value:300}]}],buttons:[{text:I18n.stop.text,handler:L},{text:I18n.start.text,handler:function(){var P=c.getComponent("dimensionvaluespanel").getComponent("dimensioncurrentvalue").getValue(),G=c.getComponent("numberofstepspanel").getComponent("numberofstepsnumberfield").getValue(),T=c.getComponent("delaypanel").getComponent("delaynumberfield").getValue();P=c.dimension.getIndexForValue(P);var R=c.mappanel.webMapJS.getMaxNumberOfAnimations();
G>R&&(G=R,c.getComponent("numberofstepspanel").getComponent("numberofstepsnumberfield").setValue(G));G--;0>G&&(G=0);G=P+G;G>=c.dimension.size()&&(R=c.dimension.size()-(G+1),P+=R,G+=R);0>P&&(P=0);0>G&&(G=0);for(R=[];P<G+1;P++)R.push({name:c.dimension.name,value:c.dimension.getValueForIndex(P)});0==c.mappanel.webMapJS.isAnimating&&(!1===c.dimension.linked&&alert("La capa debe estar sincronizada para crear la animaci\u00f3n"),c.dimensionName=c.dimension.name,c.currentValue=c.dimension.currentValue);
c.mappanel.webMapJS.setAnimationDelay(T);c.mappanel.webMapJS.draw(R)}}],listeners:{afterrender:{fn:function(){y();0<n.getCount()&&(c.getComponent("layerpanel").getComponent("layercombo").setValue(n.getAt(0)),w(n.getAt(0).get("wmjslayer")))}},destroy:{fn:function(){L()}}}});webmapjsext.WMJSExt.AnimationPanel.superclass.initComponent.apply(this,arguments)}});Ext.define("webmapjsext.WMJSExt.PermaLinkPanel",{extend:"Ext.panel.Panel",alias:"WMJSExtPermaLinkPanel",initComponent:function(){var c=this;Ext.apply(this,{border:!1,frame:!0,layout:"fit",items:[{xtype:"panel",layout:"border",frame:!0,border:!1,items:[{frame:!0,border:0,xtype:"panel",height:28,region:"north",html:"<h1>Paste the link below in an email or chat message</h1>"},{xtype:"displayfield",region:"center",itemId:"mainTextField"}]}],listeners:{afterrender:{fn:function(){var n=c.getComponent(0).getComponent("mainTextField");
var x=location.href.split("?")[0];x=x.split("#")[0];-1!=x.indexOf("/index.html")&&(x=x.substring(0,x.indexOf("/index.html")),x+="/");-1!=x.indexOf("/index.jsp")&&(x=x.substring(0,x.indexOf("/index.jsp")),x+="/");-1!=x.indexOf("/index.php")&&(x=x.substring(0,x.indexOf("/index.php")),x+="/");var y=c.mappanel.webMapJS,w=0,S=y.getActiveLayer(),L=y.getLayers();isDefined(void 0)&&(L=[],L.push(void 0));var P=y.getProjection();var G="?srs="+URLEncode(P.srs);G+="&bbox="+URLEncode(P.bbox);if(0<L.length){var T=
[],R=[];for(P=0;P<L.length;P++)if(L[P].name&&L[P].title!=WMJSEmptyLayerName){var O=T.indexOf(L[P].service);-1==O&&(T.push(L[P].service),O=T.length-1);R.push(L[P].name.replace(/,/g,".")+"$"+L[P].format+"$"+L[P].enabled+"$"+L[P].getStyle()+"$"+L[P].opacity+"$"+O);S==L[P]&&(w=P)}S=URLEncode(T[0]);for(P=1;P<T.length;P++)S+=","+URLEncode(T[P]);G+="&service="+S;S=URLEncode(R[0]);for(P=1;P<R.length;P++)S+=","+URLEncode(R[P]);G=G+("&layer="+S)+("&selected="+w);w=y.getDimensionList();isDefined(void 0)&&(w=
(void 0).dimensions);if(0<w.length)for(G+="&dims=",P=0;P<w.length;P++)0<P&&(G+=","),G+=w[P].name+"$"+w[P].currentValue}y.isMapPinVisible();y=y.getBaseLayers();w="";for(P=0;P<y.length;P++)y[P].enabled&&(0<w.length&&(w+="$"),w+=URLEncode(y[P].name));""==w&&(w="none");x+=G+("&baselayers="+w);n.setValue('<a href="'+x+'" target="_blank">'+x+" </a>")}}}});webmapjsext.WMJSExt.PermaLinkPanel.superclass.initComponent.apply(this,arguments)}});Ext.define("webmapjsext.WMJSExt.SpinnerSlider",{extend:"Ext.panel.Panel",alias:["widget.spinnerslider"],requires:["Ext.slider.Single"],initComponent:function(){var c=this;c.slidertitle=c.title;c.title=void 0;c.setValue=function(n){c.slider.suspendEvents();c.slider.setValue(n);c.slider.resumeEvents();c.label.setText(""+decimalFormatter(n,c.ndecs))};c.getValue=function(){return c.slider.getValue()};c.setValueByEvent=function(n){c.setValue(n);c.trigger&&c.trigger(n)};Ext.apply(this,{border:!1,height:15,
margin:"8 5 8 5",frame:!1,layout:"border",items:[{xtype:"panel",region:"west",width:44,border:!1,items:[{xtype:"label",text:c.slidertitle}]},{xtype:"panel",region:"center",layout:"fit",border:!1,items:[{xtype:"slider",useTips:!1,animate:!1,minValue:c.min,maxValue:c.max,itemId:"slider",margin:"0 4 0 4",listeners:{drag:{fn:function(n){c.setValueByEvent(n.getValue())}},change:{fn:function(n){c.setValueByEvent(n.getValue())}}}}]},{xtype:"panel",layout:"border",border:!1,frame:!1,region:"east",width:75,
bodyStyle:{"background-color":"white"},items:[{region:"west",scale:"small",xtype:"button",text:"&lt;",width:20,handler:function(){c.setValueByEvent(c.queryById("slider").getValue()-1)}},{xtype:"label",itemId:"label",region:"center",cls:"test-lbl-text-align"},{region:"east",scale:"small",xtype:"button",text:"&gt;",width:20,handler:function(){c.setValueByEvent(c.queryById("slider").getValue()+1)}}]}]});this.superclass.initComponent.apply(this,arguments);this.label=this.queryById("label");this.slider=
this.queryById("slider")}});
Ext.define("Ext.ux.form.field.DateTime",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},alias:"widget.datetimefield",layout:{type:"vbox",align:"stretch"},border:!1,width:220,msgTarget:"side",dateCfg:{},timeCfg:{},initComponent:function(){this.buildField(this);this.callParent();this.dateField=this.down("datefield");this.timeField=this.down("timefield");this.initField();this.yearslider=this.queryById("yearslider");this.monthslider=this.queryById("monthslider");this.dayslider=
this.queryById("dayslider");this.hourslider=this.queryById("hourslider");this.minuteslider=this.queryById("minuteslider");this.secondslider=this.queryById("secondslider")},buildField:function(c){_this=this;_this.slidersTriggered=function(){var n=new Date(Date.UTC(_this.yearslider.getValue(),_this.monthslider.getValue()-1,_this.dayslider.getValue(),_this.hourslider.getValue(),_this.minuteslider.getValue(),_this.secondslider.getValue()));_this.setValue(n);_this.triggerEvent()};this.items=[{xtype:"panel",
border:!1,layout:{type:"hbox"},items:[{xtype:"datefield",format:"Y-m-d",validateOnChange:!0,validateOnBlur:!0,validateBlank:!1,emptyText:"yyyy-mm-dd",anchor:"100%",maskRe:/^([0-9]|-)$/,width:110,listeners:{change:{fn:function(n,x){c.datePart=x;c.triggerEvent()}}}},{xtype:"timefield",format:"H:i:s UTC",width:110,listeners:{change:{fn:function(n,x){c.timePart=x;c.triggerEvent()}}}}]},{xtype:"panel",border:!1,items:[{xtype:"spinnerslider",title:"Year",itemId:"yearslider",min:parseISO8601DateToDate(_this.minTimeValue).getUTCFullYear(),
max:parseISO8601DateToDate(_this.maxTimeValue).getUTCFullYear(),ndecs:4,trigger:_this.slidersTriggered},{xtype:"spinnerslider",title:"Month",itemId:"monthslider",min:1,max:12,ndecs:2,trigger:_this.slidersTriggered},{xtype:"spinnerslider",title:"Day",itemId:"dayslider",min:1,max:31,ndecs:2,trigger:_this.slidersTriggered},{xtype:"spinnerslider",title:"Hour",itemId:"hourslider",min:0,max:23,ndecs:2,trigger:_this.slidersTriggered},{xtype:"spinnerslider",title:"Minute",itemId:"minuteslider",min:0,max:59,
ndecs:2,trigger:_this.slidersTriggered},{xtype:"spinnerslider",title:"Second",itemId:"secondslider",min:0,max:59,ndecs:2,trigger:_this.slidersTriggered}]}]},triggerEvent:function(){if(0!=_this.triggerEvents&&this.datePart&&this.timePart)try{var c=decimalFormatter(this.datePart.getFullYear(),4)+"-"+decimalFormatter(this.datePart.getMonth()+1,2)+"-"+decimalFormatter(this.datePart.getDate(),2)+"T"+decimalFormatter(this.timePart.getUTCHours(),2)+":"+decimalFormatter(this.timePart.getUTCMinutes(),2)+":"+
decimalFormatter(this.timePart.getUTCSeconds(),2)+"Z",n=parseISO8601DateToDate(c);this.setValue(n);this.fireEvent("change",this,n)}catch(x){}},getValue:function(){var c=this.dateField.getSubmitValue(),n=this.timeField.getSubmitValue();if(c)if(n){var x=this.getFormat();x=Ext.Date.parse(c+" "+n,x)}else x=this.dateField.getValue();return x},setValue:function(c){_this.suspendEvents();_this.triggerEvents=!1;if(isDefined(c)&&c!=_this.currentValue){_this.currentValue=c;var n=parseISO8601DateToDate(_this.minTimeValue),
x=parseISO8601DateToDate(_this.maxTimeValue);c<n&&(c=n);c>x&&(c=x);n=c.getUTCFullYear();_this.dateField.setValue(new Date(Date.UTC(n,c.getUTCMonth(),c.getUTCDate(),0,0,0)));_this.yearslider.setValue(c.getUTCFullYear());_this.monthslider.setValue(c.getUTCMonth()+1);_this.dayslider.setValue(c.getUTCDate());_this.hourslider.setValue(c.getUTCHours());_this.minuteslider.setValue(c.getUTCMinutes());_this.secondslider.setValue(c.getUTCSeconds());_this.timeField.setValue(c)}_this.triggerEvents=!0;_this.resumeEvents()}});Ext.define("webmapjsext.WMJSExt.CheckColumn",{extend:"Ext.grid.column.Column",alias:"widget.checkcolumn",constructor:function(){this.addEvents("checkchange");this.callParent(arguments)},processEvent:function(c,n,x,y,w,S){if("mousedown"==c||"keydown"==c&&(S.getKey()==S.ENTER||S.getKey()==S.SPACE)){var L=n.panel.store.getAt(y),P=this.dataIndex,G=!L.get(P);L.set(P,G);this.fireEvent("checkchange",this,y,G);return!1}return this.callParent(arguments)},renderer:function(c){var n=Ext.baseCSSPrefix,x=[n+"grid-checkheader"];
c&&x.push(n+"grid-checkheader-checked");return'<div class="'+x.join(" ")+'">&#160;</div>'}});Ext.define("webmapjsext.WMJSExt.IFramePanel",{extend:"Ext.Panel",src:"about:blank",loadingText:"Loading ...",initComponent:function(){this.updateHTML();this.callParent(arguments)},updateHTML:function(){this.html='<iframe id="iframe-'+this.id+'" style="overflow:auto;width:100%;height:100%;" frameborder="0"  src="'+this.src+'"></iframe>'},reload:function(){this.setSrc(this.src)},getIframeId:function(){return"iframe-"+this.id},reset:function(){var c=this.getDOM(),n=c.parentNode;c&&n&&(c.src="about:blank",
c.parentNode.removeChild(c));c=document.createElement("iframe");c.frameBorder=0;c.src=this.src;c.id="iframe-"+this.id;c.style.overflow="auto";c.style.width="100%";c.style.height="100%";n.appendChild(c)},setSrc:function(c,n){this.src=c;if(n=this.getDOM())n.src=c},getSrc:function(){return this.src},getDOM:function(){return document.getElementById("iframe-"+this.id)},getDocument:function(){var c=this.getDOM();c=c.contentWindow?c.contentWindow:c.contentDocument.document?c.contentDocument.document:c.contentDocument;
return c.document},destroy:function(){var c=this.getDOM();c&&c.parentNode&&(c.src="about:blank",c.parentNode.removeChild(c));this.callParent(arguments)},update:function(c){this.setSrc("about:blank");try{var n=this.getDocument();n.open();n.write(c);n.close()}catch(x){this.reset(),n=this.getDocument(),n.open(),n.write(c),n.close()}}});Ext.define("webmapjsext.WMJSExt.WCSPanel",{extend:"Ext.panel.Panel",alias:"WCSPanel",initComponent:function(){var c=new function(){this.bbox=this.srs=void 0;this.coverages=[]};c.srs=this.WMJSLayer.parentMaps[0].getProjection().srs;c.bbox=this.WMJSLayer.parentMaps[0].getProjection().bbox.toString();var n=new WMJSCoverage({service:this.WMJSLayer.WMJSService.service,name:this.WMJSLayer.name});c.coverages.push(n);n.dimensions=this.WMJSLayer.dimensions;var x="EPSG:4326",y="AAIGRID",w="-180,-90,180,90",
S=Ext.create("Ext.data.Store",{fields:["title","srs","bbox"],data:{items:[]},proxy:{type:"memory",reader:{type:"json",root:"items"}}}),L=Ext.create("Ext.grid.Panel",{border:!1,store:S,columns:[{text:"Title",dataIndex:"title",flex:1},{text:"ESPG Code",dataIndex:"srs"}],listeners:{select:{fn:function(ma,ua){ma=ua.get("bbox");x=ua.get("srs");w=ma;T.getComponent("column2").getComponent("areaPanel").getComponent("bboxtop").setValue(ma.split(",")[3]);T.getComponent("column2").getComponent("areaPanel").getComponent("bbox").getComponent("bboxwest").setValue(ma.split(",")[0]);
T.getComponent("column2").getComponent("areaPanel").getComponent("bbox").getComponent("bboxeast").setValue(ma.split(",")[2]);T.getComponent("column2").getComponent("areaPanel").getComponent("bboxbottom").setValue(ma.split(",")[1]);ua=Math.abs(w.split(",")[2]-w.split(",")[0]);ma=Math.abs(w.split(",")[3]-w.split(",")[1]);var Da=c.coverages[0];T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("xresolution").setValue(ua/Da.width);T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("yresolution").setValue(ma/
Da.height);la()}}}}),P=Ext.create("Ext.data.Store",{fields:["title","format"],data:{items:[]},proxy:{type:"memory",reader:{type:"json",root:"items"}}}),G=Ext.create("Ext.grid.Panel",{border:!1,store:P,columns:[{text:I18n.format.text,dataIndex:"format"},{text:I18n.title.text,dataIndex:"title",flex:1}],listeners:{select:{fn:function(ma,ua){y=ua.get("format");la()}}}});c.onReady=function(){L.setLoading(!1);for(var ma=this.coverages[0],ua=0;ua<ma.supportedProjections.length;ua++){var Da=ma.supportedProjections[ua].srs;
try{Da=epsgDescriptionLookup[ma.supportedProjections[ua].srs]}catch(Fa){}isDefined(Da)||(Da=ma.supportedProjections[ua].srs);S.add({title:Da,srs:ma.supportedProjections[ua].srs,bbox:ma.supportedProjections[ua].bbox})}ua=S.find("srs",ma.nativeCRS);-1==ua&&(ua=S.find("srs","EPSG:4326"));-1==ua&&(ua=0);L.getView().select(ua);S.add({title:"Viewer window projection and area",srs:this.srs,bbox:this.bbox});T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("rasterwidth").setValue(ma.width);
T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("rasterheight").setValue(ma.height);Da=T.getComponent("column3").getComponent("dimensionPanel");for(ua=0;ua<ma.dimensions.length;ua++)Da.add({xtype:"textfield",fieldLabel:ma.dimensions[ua].name,value:ma.dimensions[ua].currentValue,labelWidth:40,padding:"30",width:200,itemId:"dimtextfield_"+ma.dimensions[ua].name,listeners:{change:{fn:function(){la()}}}});for(ua=0;ua<ma.formats.length;ua++){Da=ma.formats[ua];
var va=ma.formats[ua].toUpperCase();try{Da=formatDescriptionLookup[va]}catch(Fa){}isDefined(Da)||(Da=ma.formats[ua]);P.add({title:Da,format:ma.formats[ua]});"AAIGRID"==va&&G.getView().select(ua)}la();ia.update('<table style="margin:5px;"><tr><td><b>Coverage:</b></td><td>'+ma.name+"</td></tr><tr><td><b>Title:</b></td><td>"+ma.title+"</td></tr><tr><td><b>Description:</b></td><td>"+ma["abstract"]+"</td></tr></table>")};Ext.create("Ext.panel.Panel",{region:"west",border:!0,width:100});var T=Ext.create("Ext.panel.Panel",
{region:"center",border:!1,layout:{type:"hbox",align:"stretch"},defaults:{border:!0},items:[{xtype:"panel",flex:2,title:I18n.coordinate_reference_system.text,itemId:"projectionPanel",layout:"fit",items:[L],border:!0,split:!0},{xtype:"panel",layout:"border",itemId:"column2",split:!0,autoScroll:!0,border:!1,flex:1,items:[{itemId:"areaPanel",height:"50%",xtype:"panel",title:I18n.area_bounding_box.text,region:"center",autoScroll:!0,layout:{type:"vbox",columns:3},items:[{xtype:"textfield",fieldLabel:I18n.north.text,
itemId:"bboxtop",labelWidth:20,padding:"30 5 5 130",width:180,listeners:{change:{fn:function(){la()}}}},{xtype:"panel",itemId:"bbox",border:!1,layout:"hbox",items:[{xtype:"textfield",fieldLabel:I18n.west.text,itemId:"bboxwest",labelWidth:30,padding:"15 0 0 15",width:180,listeners:{change:{fn:function(){la()}}}},{xtype:"textfield",fieldLabel:I18n.east.text,itemId:"bboxeast",labelWidth:30,padding:"15 0 0 15",width:180,listeners:{change:{fn:function(){la()}}}}]},{xtype:"textfield",fieldLabel:I18n.south.text,
itemId:"bboxbottom",labelWidth:40,padding:"15 5 5 110",width:200,listeners:{change:{fn:function(){la()}}}}]},{xtype:"panel",region:"south",height:"50%",title:"Grid properties",split:!0,autoScroll:!0,itemId:"gridproperties",items:{xtype:"fieldcontainer",itemId:"field",items:[{xtype:"radiofield",boxLabel:"Cell size",name:"resolution",checked:!0,itemId:"radioselectcellsize",padding:"15 15 15 15",handler:function(ma,ua){!0===ua&&(T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("rasterwidth").disable(),
T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("rasterheight").disable(),T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("xresolution").enable(),T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("yresolution").enable());la()}},{xtype:"textfield",fieldLabel:"X resolution",padding:"0 0 0 40",itemId:"xresolution",width:170,listeners:{change:{fn:function(){la()}}}},{xtype:"textfield",
fieldLabel:"Y resolution",padding:"0 0 0 40",itemId:"yresolution",width:170,listeners:{change:{fn:function(){la()}}}},{xtype:"radiofield",boxLabel:"Raster size",name:"resolution",padding:15,handler:function(ma,ua){!0===ua&&(T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("rasterwidth").enable(),T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("rasterheight").enable(),T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("xresolution").disable(),
T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("yresolution").disable())}},{xtype:"textfield",fieldLabel:"Raster Width",padding:"0 0 0 40",disabled:!0,itemId:"rasterwidth",width:170,listeners:{change:{fn:function(){la()}}}},{xtype:"textfield",fieldLabel:"Raster Height",padding:"0 0 0 40",disabled:!0,itemId:"rasterheight",width:170,listeners:{change:{fn:function(){la()}}}}]}}]},{itemId:"column3",xtype:"panel",layout:"border",border:!1,split:!0,flex:1,items:[{xtype:"panel",
region:"center",height:"50%",itemId:"dimensionPanel",title:I18n.dimensions.text,autoScroll:!0},{xtype:"panel",split:!0,autoScroll:!0,region:"south",height:"50%",title:I18n.formats.text,items:[G]}]}]}),R=Ext.create("Ext.panel.Panel",{layout:"border",region:"center",border:!0,width:300,items:[T]}),O=Ext.create("Ext.panel.Panel",{border:!1,padding:20}),ba=Ext.create("Ext.panel.Panel",{title:"GetCoverage request link",region:"south",border:!0,height:100,layout:"fit",items:[O]}),ia=Ext.create("Ext.panel.Panel",
{region:"north",border:!1,height:80,frame:!1});Ext.apply(this,{layout:"border",padding:0,frame:!1,border:!0,items:[R,ia,ba]});L.setLoading(!0);var la=function(){var ma=c.coverages[0].service;ma=WMJScheckURL(ma);var ua=c.coverages[0].name,Da=T.getComponent("column2").getComponent("areaPanel").getComponent("bbox").getComponent("bboxwest").getValue()+","+T.getComponent("column2").getComponent("areaPanel").getComponent("bboxbottom").getValue()+","+T.getComponent("column2").getComponent("areaPanel").getComponent("bbox").getComponent("bboxeast").getValue()+
","+T.getComponent("column2").getComponent("areaPanel").getComponent("bboxtop").getValue();-1==ma.indexOf("?")?ma+="?":"&"!=ma.charAt(ma.length-1)&&(ma+="&");ma=ma+"SERVICE=WCS&REQUEST=GetCoverage&COVERAGE="+ua+"&CRS="+URLEncode(x)+"&FORMAT="+y+"&BBOX="+Da;1==T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("radioselectcellsize").getValue()?(ma+="&RESX="+T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("xresolution").getValue(),
ma+="&RESY="+T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("yresolution").getValue()):(ma+="&WIDTH="+T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("rasterwidth").getValue(),ma+="&HEIGHT="+T.getComponent("column2").getComponent("gridproperties").getComponent("field").getComponent("rasterheight").getValue());for(ua=0;ua<c.coverages[0].dimensions.length;ua++)try{var va=T.getComponent("column3").getComponent("dimensionPanel").getComponent("dimtextfield_"+
c.coverages[0].dimensions[ua].name).getValue(),Fa=c.coverages[0].dimensions[ua].name;Fa=Fa.toUpperCase();"ELEVATION"!=Fa&&"TIME"!=Fa&&(Fa="DIM_"+Fa);ma+="&"+Fa+"="+va}catch(Ma){}O.update('<a target="_blank" href="'+ma+'">'+ma+"</a>");return x};WCJSRequest(c.coverages[0].service,c.coverages[0].name,function(ma){c.coverages[0]=parseDescribeCoverage(ma,n);c.onReady()},function(ma){alert("failed:\n "+ma)});webmapjsext.WMJSExt.WCSPanel.superclass.initComponent.apply(this,arguments)}});Ext.define("webmapjsext.WMJSExt.WindowFader",{extend:"Ext.window.Window",alias:"WMJSExtWindowFader",requires:[],initComponent:function(){var c=this;c.timer=new WMJSTimer;c.fadeOut=function(){100!=c.opacity&&(0<c.opacity?(c.timer.init(50,c.fadeOut),c.opacity-=(100-c.opacity)/10+.5,c.getEl().dom.style.opacity=c.opacity/100):c.close())};Ext.apply(this,{listeners:{render:{fn:function(){c.el.on("mouseenter",function(){c.getEl().dom.style.opacity="1";c.opacity=100});c.el.on("mouseleave",function(){c.opacity=
95;c.timer.init(100,c.fadeOut)})}},show:{fn:function(){c.getEl().dom.style.opacity=1;c.opacity=100}}}});this.callParent(arguments)}});initWMJS();var error=function(c){console.error(c)},debug=function(c){console.log(c)},versionInfo="ADAGUC viewer version AEMET 1.2.4.2",mainWebmapJS;function decimalFormatter(c,n){c=parseInt(c)+"";n=parseInt(n)-c.length;var x,y="";for(x=0;x<n;x++)y+="0";return y+c}
function Console(c){function n(w){w=(w+"").replace(/&/g,"&amp;");w=w.replace(/</g,"&lt;");w=w.replace(/>/g,"&gt;");w=w.replace(/"/g,"&quot;");return w=w.replace(/\n/g,"<br>")}var x=c,y="";this.println=function(w,S){y=0==S?y+("<p class='stdoutmessage'>"+w+"</p>"):y+("<p class='stdoutmessage'>"+n(w)+"</p>");isDefined(x)&&(x.innerHTML=y,x.scrollTop=x.scrollHeight);17824<y.length&&(y=y.substring(y.length-13368))};this.errprintln=function(w,S){y=0==S?y+("<p class='stderrmessage'>"+w+"</p>"):y+("<p class='stderrmessage'>"+
n(w)+"</p>");isDefined(x)&&(x.innerHTML=y,x.scrollTop=x.scrollHeight)};this.cls=function(){y="";isDefined(x)&&(x.innerHTML=y)};this.setSize=function(w,S){isDefined(x)&&(x.scrollTop=x.scrollHeight,x.style.width=w+"px",x.style.height=S+"px",x.width=w+"px",x.height=S+"px")};this.setElement=function(w){x=w;initWMJS();isDefined(x)&&(x.style.overflow="scroll",x.style.display="inline-block",x.style.position="absolute",x.style.width="100%",x.style.height="100%",x.style.font="normal 12px courier",x.noWrap=
!0,x.style.whiteSpace="nowrap",x.innerHTML=y,x.scrollTop=x.scrollHeight)};this.setElement(c)}
var myUTCDateParser=function(c,n){c=parseISO8601DateToDate(c+"T00:00:00Z");c.add(parseISO8601IntervalToDateInterval("P0D"));return c},myUTCDateFormatter=function(){if(void 0!=this)return decimalFormatter(this.getFullYear(),4)+"-"+decimalFormatter(this.getMonth()+1,2)+"-"+decimalFormatter(this.getDate(),2)},myUTCTimeFormatter=function(){if(void 0!=this)return decimalFormatter(this.getUTCHours(),2)+":"+decimalFormatter(this.getUTCMinutes(),2)+":"+decimalFormatter(this.getUTCSeconds(),2)},myUTCTimeParser=
function(c,n){return parseISO8601DateToDate("2000-01-01T"+c+"Z")};Ext.Date.formatFunctions["Y-m-d UTC"]=myUTCDateFormatter;Ext.Date.parseFunctions["Y-m-d UTC"]=myUTCDateParser;Ext.Date.formatFunctions["H:i:s UTC"]=myUTCTimeFormatter;Ext.Date.parseFunctions["H:i:s UTC"]=myUTCTimeParser;Ext.state.Manager.setProvider(new Ext.state.CookieProvider({expires:new Date((new Date).getTime()+6048E5)}));
var firstTimeOpening=!1,clearLayers=function(c){Ext.getCmp("layerlistpanel").removeAll();c.removeAllLayers()},updateLayers=function(){for(var c=Ext.getCmp("layerlistpanel").items,n=0;n<c.getCount();n++)c.get(n).parseLayer(!0)},updateLayer=function(c){for(var n=Ext.getCmp("layerlistpanel").items,x=0;x<n.getCount();x++)n.get(x).name===c&&n.get(x).parseLayer(!0,void 0)},getLayerObjects=function(){for(var c=[],n=Ext.getCmp("layerlistpanel").items,x=0;x<n.getCount();x++)c.push(n.get(x));return c},getSelectedLayer=
function(){for(var c=getLayerObjects(),n=0;n<c.length;n++)if(1==c[n].selected)return c[n]},removeLayer=function(){for(var c=getLayerObjects(),n=-2,x=0;x<c.length;x++)if(1==c[x].selected){n=x-1;c[x].close();break}c=getLayerObjects();0<c.length&&-2!=n&&(0>n&&(n=0),n>c.length-1&&(n=c.length-1),c[n].select())},createNewLayerPanel=function(c,n){0==isDefined(n)&&(n=[]);var x=void 0;isDefined(n.service)&&(x=n.service);var y=void 0;isDefined(n.name)&&(y=n.name);var w=void 0;isDefined(n.style)&&(w=n.style);
var S=void 0;isDefined(n.opacity)&&0<(""+n.opacity).length&&(S=n.opacity);var L=void 0;isDefined(n.enabled)&&(L=n.enabled);var P=void 0;isDefined(n.autoChooseLayer)&&(P=n.autoChooseLayer);var G=void 0;isDefined(n.updatetime)&&(G=n.updatetime);isDefined(L)||(L=!0);var T=Ext.getCmp("layerlistpanel");T.removeLayer=removeLayer;x=Ext.create("webmapjsext.WMJSExt.LayerPanel",{parentPanelList:T,title:y,service:x,name:y,style:w,opacity:S,updatetime:G,enabled:L,autoChooseLayer:P,parentWebMapJS:c,afterlayerready:function(R){1!=
R.layerAddedToWebMapJS&&(R.WMJSLayer.enabled=this.enabled,R.layerAddedToWebMapJS=!0);if(n.ready)n.ready(R,c),n.ready=void 0;else{1==n.zoomtolayer&&(n.zoomtolayer=!1,c.setProjection(R.WMJSLayer.getProjection("EPSG:4326")));var O=864E5;void 0!=R.WMJSLayer.getDimension("time")&&(O=R.WMJSLayer.getDimension("time").values,O=getUpdateTime(O.slice(O.lastIndexOf("/")+1)));R.updatetime=O;c.draw("createNewLayerPanel");1==n.notifyadded&&(n.notifyadded=!1)}}});x.WMJSLayer.enabled=!1;c.addLayer(x.WMJSLayer);T.insert(0,
x);x.select();return x};function getUpdateTime(c){return"PT1D"==c?216E5:"PT12H"==c?108E5:"PT6H"==c?72E5:"PT3H"==c?36E5:"PT1H30M"==c?18E5:"PT1H"==c?12E5:"PT30M"==c?6E5:"PT15M"==c?3E5:"PT10M"==c?18E4:"PT5M"==c?12E4:"PT3M"==c||"PT1M"==c?6E4:864E5}
var timeselectorWindow=Ext.create("Ext.window.Window",{title:"Time selection",width:310,height:624,constrain:!0,autoDestroy:!1,collapsible:!0,frame:!1,plain:!0,border:!1,closeAction:"hide",html:"<div class='timeselector'/>",listeners:{afterrender:{fn:function(c){var n=new WMJSTimeSelector($(this.getEl().dom).find(".timeselector"),function(x){mainWebmapJS.webMapJS.setDimension("time",x);mainWebmapJS.webMapJS.draw("timeselectorWindow")});mainWebmapJS.webMapJS.addListener("onmapdimupdate",function(){console.log("U");
n.dimensionUpdate(mainWebmapJS.webMapJS)},!0);mainWebmapJS.webMapJS.addListener("ondimchange",function(){n.dimensionChange(mainWebmapJS.webMapJS)},!0);mainWebmapJS.webMapJS.addListener("onimageload",function(){n.loadingComplete(mainWebmapJS.webMapJS)},!0);n.dimensionUpdate(mainWebmapJS.webMapJS)}},show:{fn:function(){mainWebmapJS.webMapJS.stopAnimating()}}}}),timeselectorPanel=Ext.create("Ext.panel.Panel",{iconCls:"button_time32",title:" ",bodyCls:"layerlistbg",autoDestroy:!1,collapsible:!1,frame:!1,
plain:!0,border:!1,closeAction:"hide",html:"<div class='timeselector layerlistbg'/>",listeners:{afterrender:{fn:function(c){var n=new WMJSTimeSelector($(this.getEl().dom).find(".timeselector"),function(x){mainWebmapJS.webMapJS.setDimension("time",x);mainWebmapJS.webMapJS.draw("timeselectorPanel")});mainWebmapJS.webMapJS.addListener("onmapdimupdate",function(){n.dimensionUpdate(mainWebmapJS.webMapJS)},!0);mainWebmapJS.webMapJS.addListener("ondimchange",function(){n.dimensionChange(mainWebmapJS.webMapJS)},
!0);mainWebmapJS.webMapJS.addListener("onimageload",function(){n.loadingComplete(mainWebmapJS.webMapJS)},!0);n.dimensionUpdate(mainWebmapJS.webMapJS)}},show:{fn:function(){mainWebmapJS.webMapJS.stopAnimating()}}}});
Ext.onReady(function(){Ext.tip.QuickTipManager.init();mainWebmapJS=Ext.create("webmapjsext.WMJSExt.MapPanel",{region:"center",border:!0});var c=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?(Z|[\+-]\d{2}(?::\d{2})?)$/;Ext.create("Ext.form.field.Text",{value:"1000-01-01T00:00:00Z",regex:c,regexText:"Format should be YYYY-MM-DDThh:mm:ssZ"});Ext.create("Ext.form.field.Text",{value:"3000-01-01T00:00:00Z",regex:c,regexText:"Format should be YYYY-MM-DDThh:mm:ssZ"});c=[];for(var n={},x=
0;x<getFeatureInfoApplications.length;n={$jscomp$loop$prop$location$106$328:n.$jscomp$loop$prop$location$106$328},x++)n.$jscomp$loop$prop$location$106$328=getFeatureInfoApplications[x],c.push({text:getFeatureInfoApplications[x].name,iconCls:getFeatureInfoApplications[x].iconCls,location:getFeatureInfoApplications[x].location,handler:function(O){return function(){console.log(O.$jscomp$loop$prop$location$106$328);y.setApplication(O.$jscomp$loop$prop$location$106$328);y.hide();y.show()}}(n)});var y=
Ext.create("Ext.panel.Panel",{region:"east",collapsible:!0,closable:!0,split:!0,header:!1,hidden:!0,width:600,autoScroll:!0,layout:"fit",title:"test",tbar:[{xtype:"button",itemId:"buttonApp",iconCls:"button_settings_icon",menu:{xtype:"menu",items:c}},{xtype:"label",text:"App",scale:"large",itemId:"paneltitle"},{xtype:"tbfill",scale:"large"},{xtype:"tool",scale:"large",type:"close",handler:function(){y.hide()}}],listeners:{show:{fn:function(){y.getDockedComponent(0).getComponent("paneltitle").setText("App '"+
y.applicationSettings.name||y.applicationSettings.title+"'");y.update('<div id="webmapjs_customapplication" class="webmapjs_customapplication"></div>');var O=WMJSExtApplications[y.applicationSettings.name];O?(y.applicationSettings.app=new O($("#webmapjs_customapplication"),mainWebmapJS.webMapJS),y.applicationSettings.app.enable(y.width,mainWebmapJS.webMapJS.getHeight()-24)):alert("Application with name "+y.applicationSettings.name+" not registered")}},hide:{fn:function(){y.applicationSettings.app&&
(y.applicationSettings.app.disable(),y.applicationSettings.app=void 0);mainWebmapJS.webMapJS.enableInlineGetFeatureInfo(!0);mainWebmapJS.webMapJS.removeListener("mouseclicked")}},resize:{fn:function(){y.applicationSettings.app&&y.applicationSettings.app.resize(y.width,mainWebmapJS.webMapJS.getHeight())}}},setApplication:function(O){y.applicationSettings=O}});c=Ext.create("Ext.panel.Panel",{region:"center",layout:"border",split:!0,frame:!1,border:!1,margin:0,items:[mainWebmapJS,y]});var w=function(O){console.log(O.slot);
var ba=createNewLayerPanel(mainWebmapJS.webMapJS,{service:O.service,name:O.layer,style:O.style,opacity:O.opacity,ready:function(ia,la){var ma=O.srs,ua=O.bbox,Da=O.baselayername,va=O.baselayerservice;ma&&!ua?la.setProjection(ia.getProjection(ma)):ma&&ua&&la.setProjection({srs:ma,bbox:ua});Da&&va?(mainWebmapJS.baseLayer.setService(va),mainWebmapJS.baseLayer.name=Da,mainWebmapJS.baseLayer.parseLayer(function(){la.draw("dataPanelClicked::parseLayer")},void 0,"WMJSExtMain::dataPanelClicked")):la.draw("dataPanelClicked");
isDefined(ba)&&isDefined(O.ready)&&(O.ready(ba,la),1==ba.WMJSLayer.hasError&&ba.close())}});return ba},S,L=new Console;Ext.create("Ext.panel.Panel",{html:'<div id="debuginfodiv"></div>',layout:"fit",listeners:{afterrender:{fn:function(){L.setElement(document.getElementById("debuginfodiv"))}}}});n=[{text:I18n.show_time_selection_window.text,iconCls:"button_settings_icon",handler:function(){timeselectorWindow.show()}},{text:I18n.create_animation.text+"&hellip;",iconCls:"button_settings_icon",handler:function(){Ext.create("Ext.window.Window",
{title:I18n.create_animation.text,width:460,height:300,layout:"form",autoDestroy:!0,closeAction:"destroy",autoScroll:!0,collapsible:!0,items:[Ext.create("webmapjsext.WMJSExt.AnimationPanel",{mappanel:mainWebmapJS})]}).show()}},{text:I18n.create_link.text,iconCls:"button_makeLink",handler:function(){S=Ext.create("Ext.window.Window",{title:I18n.create_permanent_links.text,width:800,height:260,layout:"fit",autoDestroy:!0,closeAction:"destroy",autoScroll:!0,modal:!1,items:[Ext.create("webmapjsext.WMJSExt.PermaLinkPanel",
{mappanel:mainWebmapJS})]});S.show()}},{text:I18n.add_custom_wms_service.text,iconCls:"button_layerlist_layernew",handler:function(){Ext.create("webmapjsext.WMJSExt.DataPanel",{dataPanelClicked:w,webMapJS:mainWebmapJS.webMapJS}).showCustomWMSWindow()}},{text:I18n.undo_zoom_pan_action.text,iconCls:"button_undo",handler:function(){mainWebmapJS.webMapJS.setPreviousExtent()}},{text:I18n.redo_zoom_pan_action.text,iconCls:"button_redo",handler:function(){mainWebmapJS.webMapJS.setNextExtent()}},{text:I18n.abort_loading.text,
iconCls:"button_stoploading",handler:function(){mainWebmapJS.webMapJS.abort()}}];try{isDefined(getFeatureInfoApplications)}catch(O){getFeatureInfoApplications=[]}var P={};for(x=0;x<getFeatureInfoApplications.length;P={$jscomp$loop$prop$location$108$330:P.$jscomp$loop$prop$location$108$330},x++)P.$jscomp$loop$prop$location$108$330=getFeatureInfoApplications[x],n.push({text:getFeatureInfoApplications[x].name,iconCls:getFeatureInfoApplications[x].iconCls,location:getFeatureInfoApplications[x].location,
handler:function(O){return function(){console.log(O.$jscomp$loop$prop$location$108$330);y.setApplication(O.$jscomp$loop$prop$location$108$330);y.hide();y.show()}}(P)}),getFeatureInfoApplications.open&&P.$jscomp$loop$prop$location$108$330.name===getFeatureInfoApplications.open&&y.setApplication(P.$jscomp$loop$prop$location$108$330);n.push({text:I18n.about_the_adaguc_viewer.text,iconCls:"button_info",tooltip:I18n.about_the_adaguc_viewer.tooltip,handler:function(){Ext.create("Ext.window.Window",{title:I18n.about_adaguc.text,
height:200,width:400,modal:!0,layout:"fit",items:{xtype:"panel",html:'<div class="about_adaguc" style="position:absolute;top:0px;left:0px;height:100px;width:520px;"/><div style="position:absolute;top:100px;padding:10px;margin:10px;"><A HREF=VERSION>'+versionInfo+"</A>"+I18n.about_adaguc_more_information.text}}).show()}});x=Ext.create("Ext.panel.Panel",{header:!1,title:" ",frame:!1,border:0,split:!1,id:"layerlistpanel",tooltip:I18n.layers.tooltip,overflowY:"auto",bodyCls:"layerlistbg",iconCls:"button_layers32",
bbar:[{scale:"small",tooltip:I18n.add_new_layer.tooltip,iconCls:"layer_logos button_layerlist_layernew",handler:function(){createNewLayerPanel(mainWebmapJS.webMapJS,{service:""})}},{iconCls:"button_duplicate",tooltip:I18n.clone_this_layer.tooltip,handler:function(){var O=getSelectedLayer();isDefined(O)&&O.duplicateLayer()}},{xtype:"button",tooltip:I18n.remove_this_layer.tooltip,iconCls:"button_layerlist_layerdelete",handler:function(O,ba){removeLayer()}},{xtype:"button",tooltip:I18n.move_layer_up.tooltip,
iconCls:"button_layerlist_layerup",handler:function(O,ba){O=getSelectedLayer();isDefined(O)&&O.moveUp()}},{xtype:"button",tooltip:I18n.move_layer_down.tooltip,iconCls:"button_layerlist_layerdown",handler:function(O,ba){O=getSelectedLayer();isDefined(O)&&O.moveDown()}},{xtype:"tbfill"},{iconCls:"button_settings_icon",tooltip:I18n.settings_and_options.tooltip,menu:{xtype:"menu",items:n}}]});P=Ext.create("webmapjsext.WMJSExt.MapTypeSelector",{maptypeclicked:function(O){mainWebmapJS.webMapJS.setProjection({bbox:O.get("bbox"),
srs:O.get("srs")});(O=O.get("baselayer"))&&O.service&&O.name&&(O.enabled=!0,mainWebmapJS.baseLayer.setService(O.service),mainWebmapJS.baseLayer.name=O.name,mainWebmapJS.baseLayer.enabled=!0,isDefined(O.transparent)&&(mainWebmapJS.baseLayer.transparent=O.transparent),mainWebmapJS.baseLayer.parseLayer(function(){mainWebmapJS.webMapJS.draw("maptypeclicked")},void 0,"WMJSExtMain::maptypeclicked"))},webmapjsext:mainWebmapJS});var G=Ext.create("webmapjsext.WMJSExt.BaseMapSelector",{webmapjsext:mainWebmapJS});
P={id:"viewportwestpanel",width:320,region:"west",layout:"border",collapsible:!0,animCollapse:!0,border:!0,split:!0,header:!1,autoScroll:!1,frame:!0,items:[{layout:"fit",border:!1,autoScroll:!1,region:"center",xtype:"tabpanel",scale:"large",cls:"LayersAndMapsTab",items:[x,P,G,timeselectorPanel]}],tbar:[{scale:"large",text:"Add",tooltip:I18n.add_layers.tooltip,iconCls:"button_adddata32",handler:function(){dataChooserConfiguration=dataChooserConfigurationAdd;Ext.create("webmapjsext.WMJSExt.DataPanel",
{dataPanelClicked:w,webMapJS:mainWebmapJS.webMapJS}).show()}}]};for(x=0;x<dataChooser.length;x++)0!==dataChooser[x].dataChooserConfiguration.length&&(P.tbar.push({scale:"large",text:dataChooser[x].title,tooltip:I18n.add_layers.tooltip,iconCls:"button_adddata32",ind:x,handler:function(){dataChooserConfiguration=dataChooser[this.ind].dataChooserConfiguration;Ext.create("webmapjsext.WMJSExt.DataPanel",{dataPanelClicked:w,webMapJS:mainWebmapJS.webMapJS}).show()}}),P.width+=30);for(x=0;x<folderChooser.length;x++)0!==
folderChooser[x].dataChooserConfigurationFolder.length&&(P.tbar.push({scale:"large",text:folderChooser[x].title,tooltip:I18n.add_layers.tooltip,iconCls:"folder_adddata32",ind:x,handler:function(){dataChooserConfigurationFolder=folderChooser[this.ind].dataChooserConfigurationFolder;Ext.create("webmapjsext.WMJSExt.FolderPanel",{dataPanelClicked:w,webMapJS:mainWebmapJS.webMapJS}).show()}}),P.width+=30);P.tbar.push({iconCls:"button_settings32",tooltip:I18n.settings_and_options.tooltip,scale:"large",menu:{xtype:"menu",
items:n}});var T=Ext.create("Ext.Viewport",{layout:"border",items:[P,c],renderTo:Ext.getBody(),listeners:{resize:{fn:function(){try{var O=viewportwestpanelwindow.y+viewportwestpanelwindow.height;O>T.height&&(O=T.height-70,70>O&&(O=70));viewportwestpanelwindow.setSize(viewportwestpanelwindow.width,O)}catch(ba){}}}}}),R=function(O){var ba=!0,ia=!1;isDefined(O.collapse)&&"1"==O.collapse&&Ext.getCmp("viewportwestpanel").collapse();isDefined(O.zoomtolayer)&&"1"==O.zoomtolayer&&(ba=!0);isDefined(O.srs)&&
isDefined(O.bbox)&&mainWebmapJS.webMapJS.setProjection({srs:O.srs,bbox:O.bbox});if(isDefined(O.service)){clearLayers(mainWebmapJS.webMapJS);var la=URLDecode(O.service).split(","),ma=[""];isDefined(O.layer)?ma=URLDecode(O.layer).split(","):1==ba&&(ia=!0);isDefined(O.selected);for(var ua=ma.length,Da=0;Da<ma.length;Da++)try{var va=ma[ma.length-1-Da].split("$"),Fa=va+"",Ma=!0,Ka="",Va=1,Ya=la[0]+"";6==va.length&&(Fa=va[0],Ma=va[2],Ka=va[3],Va=va[4],isDefined(Ma)&&("true"===Ma&&(Ma=!0),"false"===Ma&&
(Ma=!1)),Ya=la[va[5]]);createNewLayerPanel(mainWebmapJS.webMapJS,{service:Ya,name:Fa,style:Ka,enabled:Ma,opacity:Va,ready:function(ab,mb){ua--;if(0==ua){if(isDefined(O.dims))for(var Eb=O.dims.split(","),vb=0;vb<Eb.length;vb++){var sb=Eb[vb].split("$");2==sb.length&&mainWebmapJS.webMapJS.setDimension(sb[0],sb[1])}1==ba&&ab.WMJSLayer.zoomToLayer();mb.draw("index.html::numlayers=0")}},autoChooseLayer:ia})}catch(ab){error("Unable to parse layer nr "+Da)}if(isDefined(O.baselayers)){la=O.baselayers.split("$");
ia=[];for(Da=ma=0;Da<la.length;Da++){va=!1;for(Fa=0;Fa<mapTypeConfiguration.length;Fa++)if(mapTypeConfiguration[Fa].baselayer.name==la[Da]){mapTypeConfiguration[Fa].baselayer.enabled=!0;ia.push(mapTypeConfiguration[Fa].baselayer);va=!0;ma++;break}if(!va)for(Fa=0;Fa<baseLayerConfiguration.length;Fa++)if(baseLayerConfiguration[Fa].name==la[Da]){baseLayerConfiguration[Fa].enabled=!0;ia.push(baseLayerConfiguration[Fa]);va=!0;ma++;break}va||error("Warning: unable to find baselayer "+la[Da])}for(Da=0;Da<
baseLayerConfiguration.length;Da++)0==baseLayerConfiguration[Da].enabled?ia.push(baseLayerConfiguration[Da]):0==ma&&ia.push(baseLayerConfiguration[Da]);baseLayers=[];for(Da=0;Da<ia.length;Da++)la=new WMJSLayer(ia[Da]),0==Da&&(mainWebmapJS.baseLayer=la),baseLayers.push(la);0<baseLayers.length&&mainWebmapJS.webMapJS.setBaseLayers(baseLayers)}}O&&O.autowms&&(autowmsURL=O.autowms+"",-1===autowmsURL.indexOf("?")&&(autowmsURL+="?"),window.setTimeout(function(){y.setApplication(getFeatureInfoApplications.filter(function(ab){return"AutoWMS"===
ab.name})[0]);y.hide();y.show()},100));O&&O.wms&&(console.log("wms found",O.wms),createNewLayerPanel(mainWebmapJS.webMapJS,{service:O.wms}))};0==window.location.hash.length&&R(getUrlVars());checkIfHashTagChanged(function(O,ba){if(0<=O.indexOf("addlayer('")){if(ba=O.substring(O.indexOf("addlayer('")+10,O.indexOf("',")),O=O.substring(O.indexOf(",'")+2,O.indexOf("')")),ba&&O){for(var ia=!1,la=mainWebmapJS.webMapJS.getLayers(),ma=0;ma<la.length;ma++)if(la[ma].service==ba&&la[ma].name==O){ia=!0;break}0==
ia&&(isDefined(hashLocationNotfiyAddLayer),firstTimeOpening=!0,createNewLayerPanel(mainWebmapJS.webMapJS,{service:ba,name:O,zoomtolayer:!1,notifyadded:!0}))}}else 0<=O.indexOf("positionmappinbylatlon(")?(debug(O),ba=O.substring(23,O.indexOf(")")),debug(ba),ba=ba.split(","),debug(ba[0]+" "+ba[1]),mainWebmapJS.webMapJS.positionMapPinByLatLon({x:parseFloat(ba[0]),y:parseFloat(ba[1])})):0<=O.indexOf("refreshlayers")?updateLayers():R(ba)});getFeatureInfoApplications.open&&y.show()});var gfiapp_d3c3=function(c,n){var x=function(R,O){$("#"+O).empty();$("#"+O).append("<div style='height=240px;border=2px solid blue;' class='chart'>a</div>");$("#"+O).append("<div style='height=40px;border=2px solid red;' class='controls gfiapp_d3c3_export_to_csv_button'>b</div>");var ba=$("#"+O).find(".chart");O=$("#"+O).find(".controls");ba.html("graph");O.button({label:"Export to CSV"}).click(function(){console.log("Export to CSV");for(var ia="",la=R.datatoplot,ma=0;ma<la[0].length;ma++){for(var ua=
0;ua<la.length;ua++)0<ua&&(ia+=";"),ia+=JSON.stringify(la[ua][ma]);ia+="\n\r"}la=document.createElement("a");la.setAttribute("download","export.csv");la.setAttribute("href",encodeURI("data:text/csv;charset=utf-8,"+ia));console.log("Clicking link");document.body.appendChild(la);la.click();la.remove()});c3.generate({bindto:ba.get(0),data:{x:"x",x_format:"%Y%m%d",columns:R.datatoplot,types:{x:"area"}},axis:{x:{type:"timeseries",tick:{format:R.timeFormat}},y:{label:R.ylabel}},zoom:{enabled:!0},subchart:{show:!1}})},
y=function(R,O){return R>O?1:R<O?-1:0},w=function(R,O){var ba;for(ba=0;ba<O.length;ba++)try{if(O[ba].getTime()===R.getTime())return ba}catch(ia){}return-1},S=function(R,O){var ba=1;"string"!=typeof R[0].dims&&(ba=R[0].dims.length);for(var ia=[],la=function(va,Fa,Ma){var Ka=["x"];va=[Fa.name+" "+va];for(var Va in Ma){Fa=d3.time.format("%Y-%m-%dT%H:%M:%SZ").parse(Va);var Ya=parseFloat(Ma[Va]);Ka.push(Fa);va.push(Ya)}ia.push({date:Ka,value:va})},ma=function(va,Fa,Ma,Ka){if(1==ba)la("",Fa,Ma);else if(va+
2<ba)for(d in Ma)ma(va+1,Fa,Ma[d],Ka+"["+d+"]");else for(d in Ma)la("["+d+"]",Fa,Ma[d])},ua=0;ua<R.length;ua++)ma(0,R[ua],R[ua].data,"");ua=function(va){for(var Fa=[],Ma=va.length,Ka=0;Ka<Ma;Ka++)for(var Va=va[Ka].date,Ya=1;Ya<Va.length;Ya++){var ab=Va[Ya],mb=w(ab,Fa);-1==mb&&Fa.push(ab)}Fa.sort(y);Fa.unshift("x");Va=[];for(Ya=0;Ya<Ma;Ya++)Va.push([]);for(Ka=0;Ka<Ma;Ka++)for(Va[Ka].push(va[Ka].value[0]),Ya=1;Ya<Fa.length;Ya++)mb=w(Fa[Ya],va[Ka].date),mb==Ya?(ab=va[Ka].value[mb],"nodata"==ab&&(ab=
NaN),Va[Ka].push(parseFloat(ab))):Va[Ka].push(NaN);va=[];va.push(Fa);for(Ka=0;Ka<Ma;Ka++)va.push(Va[Ka]);return va}(ia);var Da=R[0].name;R[0].units&&(Da+=" in "+R[0].units);x({datatoplot:ua,ylabel:Da,timeFormat:"%Y-%m-%d %H:%M"},O)},L=function(R,O){console.log(R);R.includes("time=")&&(i=R.indexOf("time="),mURL0=R.slice(0,i+5),mURLF=R.slice(i+5,R.length),R=mURL0+"/"+mURLF);$.ajax({type:"GET",url:R+"&JSONP=?",dataType:"jsonp",cache:!1,success:function(ba){try{S(ba,O)}catch(ia){$("#"+O).html("Sorry! An error occurred while parsing JSON data: ["+
ia+"]")}},error:function(ba,ia,la){$("#"+O).html("Sorry! An error occurred while receiving JSON data from the server: ["+la+"]");console.log("Error "+la)}})},P=!0,G=[];G.set=!1;var T=function(R){if(0!=P){G.x=R.x;G.y=R.y;G.set=!0;var O=n.getLatLongFromPixelCoord({x:R.x,y:R.y});$("#chart").html('<img src="./img/ajax-loader.gif" alt="Loading..."/>');var ba=n.getLayers();if(isDefined(ba)){O="timeseries graph for location ["+Math.round(100*O.x)/100+","+Math.round(100*O.y)/100+"]<br/>";$("#chart").empty();
for(var ia=0;ia<ba.length;ia++){var la=n.getWMSGetFeatureInfoRequestURL(ba[ia],R.x,R.y);la=composeUrlObjectFromURL(la);var ma=la.location+"?";for(key in la.kvp){var ua=la.kvp[key];"info_format"==key&&(ua="application/json");"time"==key&&(ua="1000-01-01T00:00:00Z/3000-01-01T00:00:00Z");"dim_member"==key&&(ua="*");"dim_ensemble_member"==key&&(ua="*");"dim_percentile"==key&&(ua="*");ma+=key+"="+URLEncode(ua)+"&"}$("#chart").append("<div class='chartstyle' id='chart"+ia+"'></div>");$("#chart"+ia).html('<img src="./img/ajax-loader.gif" alt="Loading..."/>');
L(ma,"chart"+ia)}$("#info").html(O)}else $("#info").html("No valid data received:<br/>"+data)}};n.addListener("mouseclicked",T,!0);this.enable=function(){c.html('<div id="info"></div><div id="chart" class="gfiapp_d3c3"></div>');$("#info").html("Click on the map to create a timeseries graph.");console.log("init");n.enableInlineGetFeatureInfo(!1);P=!0};this.disable=function(){P=!1;n.enableInlineGetFeatureInfo(!0);G.set=!1};this.resize=function(R,O){console.log("w="+R);$("#chart").width(R);G.set&&T(G)};
this.enable()};try{WMJSExtApplications["Time series mode"]=gfiapp_d3c3}catch(c){};(function(c,n){"object"===typeof exports&&"undefined"!==typeof module?n(exports):"function"===typeof define&&define.amd?define(["exports"],n):(c="undefined"!==typeof globalThis?globalThis:c||self,n(c.s3=c.s3||{}))})(this,function(c){function n(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function x(a){function b(h,k,p,m){null==p&&(p=0);null==m&&(m=h.length);for(;p<m;){var q=p+m>>>1;0>g(h[q],k)?p=q+1:m=q}return p}var f=a,g=a;1===a.length&&(f=function(h,k){return a(h)-k},g=y(a));return{left:b,center:function(h,
k,p,m){null==p&&(p=0);null==m&&(m=h.length);m=b(h,k,p,m-1);return m>p&&f(h[m-1],k)>-f(h[m],k)?m-1:m},right:function(h,k,p,m){null==p&&(p=0);null==m&&(m=h.length);for(;p<m;){var q=p+m>>>1;0<g(h[q],k)?m=q:p=q+1}return p}}}function y(a){return function(b,f){return n(a(b),f)}}function w(a){return null===a?NaN:+a}function S(a,b){var f,g,h,k,p,m;return $jscomp.generator.createGenerator(S,function(q){switch(q.nextAddress){case 1:if(void 0===b){q.jumpTo(2);break}f=-1;g=$jscomp.makeIterator(a);h=g.next();
case 4:if(h.done){q.jumpTo(0);break}k=h.value;if(!(null!=(k=b(k,++f,a))&&(k=+k)>=k)){q.jumpTo(5);break}return q.yield(k,5);case 5:h=g.next();q.jumpTo(4);break;case 2:p=$jscomp.makeIterator(a),h=p.next();case 9:if(h.done){q.jumpTo(0);break}m=h.value;if(!(null!=m&&(m=+m)>=m)){q.jumpTo(10);break}return q.yield(m,10);case 10:h=p.next(),q.jumpTo(9)}})}function L(a,b){var f=0;if(void 0===b){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())b=g.value,null!=b&&(b=+b)>=b&&++f}else{var h=-1,k=
$jscomp.makeIterator(a);for(g=k.next();!g.done;g=k.next())g=g.value,null!=(g=b(g,++h,a))&&(g=+g)>=g&&++f}return f}function P(a){return a.length|0}function G(a){return!(0<a)}function T(a){return"object"!==typeof a||"length"in a?a:Array.from(a)}function R(a){return function(b){return a.apply(null,$jscomp.arrayFromIterable(b))}}function O(a,b){var f=0,g,h=0,k=0;if(void 0===b)for(a=$jscomp.makeIterator(a),g=a.next();!g.done;g=a.next())b=g.value,null!=b&&(b=+b)>=b&&(g=b-h,h+=g/++f,k+=g*(b-h));else{var p=
-1,m=$jscomp.makeIterator(a);for(g=m.next();!g.done;g=m.next()){var q=g.value;null!=(q=b(q,++p,a))&&(q=+q)>=q&&(g=q-h,h+=g/++f,k+=g*(q-h))}}if(1<f)return k/(f-1)}function ba(a,b){return(a=O(a,b))?Math.sqrt(a):a}function ia(a,b){var f,g;if(void 0===b){a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())b=h.value,null!=b&&(void 0===f?b>=b&&(f=g=b):(f>b&&(f=b),g<b&&(g=b)))}else{var k=-1,p=$jscomp.makeIterator(a);for(h=p.next();!h.done;h=p.next())h=h.value,null!=(h=b(h,++k,a))&&(void 0===
f?h>=h&&(f=g=h):(f>h&&(f=h),g<h&&(g=h)))}return[f,g]}function la(a,b){var f=a._intern;a=a._key;a=a(b);return f.has(a)?f.get(a):b}function ma(a,b){var f=a._intern;a=a._key;a=a(b);if(f.has(a))return f.get(a);f.set(a,b);return b}function ua(a,b){var f=a._intern;a=a._key;a=a(b);f.has(a)&&(b=f.get(b),f.delete(a));return b}function Da(a){return null!==a&&"object"===typeof a?a.valueOf():a}function va(a){return a}function Fa(a,b){for(var f=[],g=1;g<arguments.length;++g)f[g-1]=arguments[g];return Va(a,va,
va,f)}function Ma(a,b,f){for(var g=[],h=2;h<arguments.length;++h)g[h-2]=arguments[h];return Va(a,va,b,g)}function Ka(a){if(1!==a.length)throw Error("duplicate key");return a[0]}function Va(a,b,f,g){return function m(k,p){if(p>=g.length)return f(k);for(var q=new dd,B=g[p++],F=-1,u=$jscomp.makeIterator(k),v=u.next();!v.done;v=u.next()){v=v.value;var z=B(v,++F,k),C=q.get(z);C?C.push(v):q.set(z,[v])}k=$jscomp.makeIterator(q);for(B=k.next();!B.done;B=k.next())F=$jscomp.makeIterator(B.value),B=F.next().value,
F=F.next().value,q.set(B,m(F,p));return b(q)}(a,0)}function Ya(a,b){return Array.from(b,function(f){return a[f]})}function ab(a,b){for(var f=[],g=1;g<arguments.length;++g)f[g-1]=arguments[g];var h=f;if("function"!==typeof a[Symbol.iterator])throw new TypeError("values is not iterable");a=Array.from(a);f=$jscomp.makeIterator(h).next().value;var k=void 0===f?n:f;return 1===k.length||1<h.length?(f=Uint32Array.from(a,function(p,m){return m}),1<h.length?(h=h.map(function(p){return a.map(p)}),f.sort(function(p,
m){for(var q=$jscomp.makeIterator(h),B=q.next();!B.done;B=q.next())if(B=B.value,B=n(B[p],B[m]))return B})):(k=a.map(k),f.sort(function(p,m){return n(k[p],k[m])})),Ya(a,f)):a.sort(k)}function mb(a){return function(){return a}}function Eb(a,b,f){var g,h=-1,k;b=+b;a=+a;f=+f;if(a===b&&0<f)return[a];if(g=b<a){var p=a;a=b;b=p}if(0===(k=vb(a,b,f))||!isFinite(k))return[];if(0<k)for(f=Math.round(a/k),p=Math.round(b/k),f*k<a&&++f,p*k>b&&--p,a=Array(p=p-f+1);++h<p;)a[h]=(f+h)*k;else for(k=-k,f=Math.round(a*
k),p=Math.round(b*k),f/k<a&&++f,p/k>b&&--p,a=Array(p=p-f+1);++h<p;)a[h]=(f+h)/k;g&&a.reverse();return a}function vb(a,b,f){b=(b-a)/Math.max(0,f);a=Math.floor(Math.log(b)/Math.LN10);b/=Math.pow(10,a);return 0<=a?(b>=Xg?10:b>=Yg?5:b>=Zg?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(b>=Xg?10:b>=Yg?5:b>=Zg?2:1)}function sb(a,b,f){var g=Math.abs(b-a)/Math.max(0,f);f=Math.pow(10,Math.floor(Math.log(g)/Math.LN10));g/=f;g>=Xg?f*=10:g>=Yg?f*=5:g>=Zg&&(f*=2);return b<a?-f:f}function Pc(a,b,f){for(var g;;){var h=vb(a,
b,f);if(h===g||0===h||!isFinite(h))return[a,b];0<h?(a=Math.floor(a/h)*h,b=Math.ceil(b/h)*h):0>h&&(a=Math.ceil(a*h)/h,b=Math.floor(b*h)/h);g=h}}function Dc(a){return Math.ceil(Math.log(L(a))/Math.LN2)+1}function ed(){function a(h){Array.isArray(h)||(h=Array.from(h));var k,p=h.length,m=Array(p);for(k=0;k<p;++k)m[k]=b(h[k],k,h);var q=f(m),B=q[0];q=q[1];var F=g(m,B,q);if(!Array.isArray(F)){k=q;var u=+F;f===ia&&(q=$jscomp.makeIterator(Pc(B,q,u)),B=q.next().value,q=q.next().value);F=Eb(B,q,u);F[F.length-
1]>=q&&(k>=q&&f===ia?(k=vb(B,q,u),isFinite(k)&&(0<k?q=(Math.floor(q/k)+1)*k:0>k&&(q=(Math.ceil(q*-k)+1)/-k))):F.pop())}for(u=F.length;F[0]<=B;)F.shift(),--u;for(;F[u-1]>q;)F.pop(),--u;var v=Array(u+1);for(k=0;k<=u;++k){var z=v[k]=[];z.x0=0<k?F[k-1]:B;z.x1=k<u?F[k]:q}for(k=0;k<p;++k)z=m[k],B<=z&&z<=q&&v[Qc(F,z,0,u)].push(h[k]);return v}var b=va,f=ia,g=Dc;a.value=function(h){return arguments.length?(b="function"===typeof h?h:mb(h),a):b};a.domain=function(h){return arguments.length?(f="function"===typeof h?
h:mb([h[0],h[1]]),a):f};a.thresholds=function(h){return arguments.length?(g="function"===typeof h?h:Array.isArray(h)?mb(vp.call(h)):mb(h),a):g};return a}function Ec(a,b){var f;if(void 0===b){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())b=g.value,null!=b&&(f<b||void 0===f&&b>=b)&&(f=b)}else{var h=-1,k=$jscomp.makeIterator(a);for(g=k.next();!g.done;g=k.next())g=g.value,null!=(g=b(g,++h,a))&&(f<g||void 0===f&&g>=g)&&(f=g)}return f}function Fc(a,b){var f;if(void 0===b){a=$jscomp.makeIterator(a);
for(var g=a.next();!g.done;g=a.next())b=g.value,null!=b&&(f>b||void 0===f&&b>=b)&&(f=b)}else{var h=-1,k=$jscomp.makeIterator(a);for(g=k.next();!g.done;g=k.next())g=g.value,null!=(g=b(g,++h,a))&&(f>g||void 0===f&&g>=g)&&(f=g)}return f}function Rc(a,b,f,g,h){f=void 0===f?0:f;g=void 0===g?a.length-1:g;for(h=void 0===h?n:h;g>f;){if(600<g-f){var k=g-f+1,p=b-f+1,m=Math.log(k),q=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*q*(k-q)/k)*(0>p-k/2?-1:1);Rc(a,b,Math.max(f,Math.floor(b-p*q/k+m)),Math.min(g,Math.floor(b+
(k-p)*q/k+m)),h)}k=a[b];p=f;q=g;qc(a,f,b);for(0<h(a[g],k)&&qc(a,f,g);p<q;){qc(a,p,q);++p;for(--q;0>h(a[p],k);)++p;for(;0<h(a[q],k);)--q}0===h(a[f],k)?qc(a,f,q):(++q,qc(a,q,g));q<=b&&(f=q+1);b<=q&&(g=q-1)}return a}function qc(a,b,f){var g=a[b];a[b]=a[f];a[f]=g}function rc(a,b,f){a=Float64Array.from(S(a,f));if(f=a.length){if(0>=(b=+b)||2>f)return Fc(a);if(1<=b)return Ec(a);b*=f-1;f=Math.floor(b);var g=Ec(Rc(a,f).subarray(0,f+1));a=Fc(a.subarray(f+1));return g+(a-g)*(b-f)}}function fd(a,b,f){f=void 0===
f?w:f;if(g=a.length){if(0>=(b=+b)||2>g)return+f(a[0],0,a);if(1<=b)return+f(a[g-1],g-1,a);var g;b*=g-1;g=Math.floor(b);var h=+f(a[g],g,a);a=+f(a[g+1],g+1,a);return h+(a-h)*(b-g)}}function gd(a,b){var f=-1,g=-1;if(void 0===b){a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())if(b=h.value,++g,null!=b&&(k<b||void 0===k&&b>=b)){var k=b;f=g}}else{var p=$jscomp.makeIterator(a);for(h=p.next();!h.done;h=p.next())h=h.value,null!=(h=b(h,++g,a))&&(k<h||void 0===k&&h>=h)&&(k=h,f=g)}return f}function Dd(a){var b,
f,g;return $jscomp.generator.createGenerator(Dd,function(h){1==h.nextAddress&&(b=$jscomp.makeIterator(a),f=b.next());if(3!=h.nextAddress){if(f.done)return h.jumpTo(0);g=f.value;return h.yieldAll(g,3)}f=b.next();return h.jumpTo(2)})}function hd(a){return Array.from(Dd(a))}function Ed(a,b){var f=-1,g=-1;if(void 0===b){a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())if(b=h.value,++g,null!=b&&(k>b||void 0===k&&b>=b)){var k=b;f=g}}else{var p=$jscomp.makeIterator(a);for(h=p.next();!h.done;h=
p.next())h=h.value,null!=(h=b(h,++g,a))&&(k>h||void 0===k&&h>=h)&&(k=h,f=g)}return f}function oe(a,b){return[a,b]}function Zb(a,b,f){a=+a;b=+b;f=2>(h=arguments.length)?(b=a,a=0,1):3>h?1:+f;for(var g=-1,h=Math.max(0,Math.ceil((b-a)/f))|0,k=Array(h);++g<h;)k[g]=a+g*f;return k}function Fd(a,b){b=void 0===b?n:b;if(1===b.length)return Ed(a,b);var f=-1,g=-1;a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())if(h=h.value,++g,0>f?0===b(h,h):0>b(h,k)){var k=h;f=g}return f}function pe(a){return function(b,
f,g){f=void 0===f?0:f;g=void 0===g?b.length:g;for(g-=f=+f;g;){var h=a()*g--|0,k=b[g+f];b[g+f]=b[h+f];b[h+f]=k}return b}}function df(a){if(!(k=a.length))return[];for(var b=-1,f=Fc(a,$g),g=Array(f);++b<f;)for(var h=-1,k,p=g[b]=Array(k);++h<k;)p[h]=a[h][b];return g}function $g(a){return a.length}function ah(a){return a instanceof Set?a:new Set(a)}function ef(a,b){var f=a[Symbol.iterator]();a=new Set;var g={};b=$jscomp.makeIterator(b);for(var h=b.next();!h.done;g={$jscomp$loop$prop$value$335:g.$jscomp$loop$prop$value$335,
$jscomp$loop$prop$done$336:g.$jscomp$loop$prop$done$336},h=b.next())if(h=h.value,!a.has(h))for(g.$jscomp$loop$prop$value$335=void 0,g.$jscomp$loop$prop$done$336=void 0;function(k){return function(){var p=f.next();k.$jscomp$loop$prop$value$335=p.value;k.$jscomp$loop$prop$done$336=p.done;return p}}(g)();){if(g.$jscomp$loop$prop$done$336)return!1;a.add(g.$jscomp$loop$prop$value$335);if(Object.is(h,g.$jscomp$loop$prop$value$335))break}return!0}function gf(a){return a}function bh(a){return"translate("+
a+",0)"}function hf(a){return"translate(0,"+a+")"}function ch(a){return function(b){return+a(b)}}function wp(a,b){b=Math.max(0,a.bandwidth()-2*b)/2;a.round()&&(b=Math.round(b));return function(f){return+a(f)+b}}function xp(){return!this.__axis}function jf(a,b){function f(z){var C=null==h?b.ticks?b.ticks.apply(b,g):b.domain():h,r=null==k?b.tickFormat?b.tickFormat.apply(b,g):gf:k,t=Math.max(p,0)+q,A=b.range(),E=+A[0]+B;A=+A[A.length-1]+B;var H=(b.bandwidth?wp:ch)(b.copy(),B),M=z.selection?z.selection():
z,U=M.selectAll(".domain").data([null]);C=M.selectAll(".tick").data(C,b).order();var W=C.exit(),da=C.enter().append("g").attr("class","tick"),ka=C.select("line"),Y=C.select("text");U=U.merge(U.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor"));C=C.merge(da);ka=ka.merge(da.append("line").attr("stroke","currentColor").attr(u+"2",F*p));Y=Y.merge(da.append("text").attr("fill","currentColor").attr(u,F*t).attr("dy",1===a?"0em":3===a?"0.71em":"0.32em"));z!==M&&(U=U.transition(z),
C=C.transition(z),ka=ka.transition(z),Y=Y.transition(z),W=W.transition(z).attr("opacity",1E-6).attr("transform",function(Z){return isFinite(Z=H(Z))?v(Z+B):this.getAttribute("transform")}),da.attr("opacity",1E-6).attr("transform",function(Z){var qa=this.parentNode.__axis;return v((qa&&isFinite(qa=qa(Z))?qa:H(Z))+B)}));W.remove();U.attr("d",4===a||2===a?m?"M"+F*m+","+E+"H"+B+"V"+A+"H"+F*m:"M"+B+","+E+"V"+A:m?"M"+E+","+F*m+"V"+B+"H"+A+"V"+F*m:"M"+E+","+B+"H"+A);C.attr("opacity",1).attr("transform",function(Z){return v(H(Z)+
B)});ka.attr(u+"2",F*p);Y.attr(u,F*t).text(r);M.filter(xp).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===a?"start":4===a?"end":"middle");M.each(function(){this.__axis=H})}var g=[],h=null,k=null,p=6,m=6,q=3,B="undefined"!==typeof window&&1<window.devicePixelRatio?0:.5,F=1===a||4===a?-1:1,u=4===a||2===a?"x":"y",v=1===a||3===a?bh:hf;f.scale=function(z){return arguments.length?(b=z,f):b};f.ticks=function(){return g=dh.call(arguments),f};f.tickArguments=
function(z){return arguments.length?(g=null==z?[]:dh.call(z),f):g.slice()};f.tickValues=function(z){return arguments.length?(h=null==z?null:dh.call(z),f):h&&h.slice()};f.tickFormat=function(z){return arguments.length?(k=z,f):k};f.tickSize=function(z){return arguments.length?(p=m=+z,f):p};f.tickSizeInner=function(z){return arguments.length?(p=+z,f):p};f.tickSizeOuter=function(z){return arguments.length?(m=+z,f):m};f.tickPadding=function(z){return arguments.length?(q=+z,f):q};f.offset=function(z){return arguments.length?
(B=+z,f):B};return f}function id(){for(var a=0,b=arguments.length,f={},g;a<b;++a){if(!(g=arguments[a]+"")||g in f||/[\s.]/.test(g))throw Error("illegal type: "+g);f[g]=[]}return new kf(f)}function kf(a){this._=a}function yp(a,b){return a.trim().split(/^|\s+/).map(function(f){var g="",h=f.indexOf(".");0<=h&&(g=f.slice(h+1),f=f.slice(0,h));if(f&&!b.hasOwnProperty(f))throw Error("unknown type: "+f);return{type:f,name:g}})}function Aj(a,b,f){for(var g=0,h=a.length;g<h;++g)if(a[g].name===b){a[g]=zp;a=
a.slice(0,g).concat(a.slice(g+1));break}null!=f&&a.push({name:b,value:f});return a}function qe(a){var b=a+="",f=b.indexOf(":");0<=f&&"xmlns"!==(b=a.slice(0,f))&&(a=a.slice(f+1));return eh.hasOwnProperty(b)?{space:eh[b],local:a}:a}function Ap(a){return function(){var b=this.ownerDocument,f=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===f&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(f,a)}}function Bp(a){return function(){return this.ownerDocument.createElementNS(a.space,
a.local)}}function lf(a){a=qe(a);return(a.local?Bp:Ap)(a)}function Cp(){}function mf(a){return null==a?Cp:function(){return this.querySelector(a)}}function fh(a){return"object"===typeof a&&"length"in a?a:Array.from(a)}function Dp(){return[]}function gh(a){return null==a?Dp:function(){return this.querySelectorAll(a)}}function Ep(a){return function(){var b=a.apply(this,arguments);return null==b?[]:fh(b)}}function hh(a){return function(){return this.matches(a)}}function Bj(a){return function(b){return b.matches(a)}}
function Fp(a){return function(){return Gp.call(this.children,a)}}function Hp(){return this.firstElementChild}function Ip(){return this.children}function Jp(a){return function(){return Kp.call(this.children,a)}}function Cj(a){return Array(a.length)}function nf(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}function Lp(a){return function(){return a}}function Mp(a,b,f,g,h,k){for(var p=0,m,q=b.length,B=k.length;p<B;++p)(m=b[p])?
(m.__data__=k[p],g[p]=m):f[p]=new nf(a,k[p]);for(;p<q;++p)if(m=b[p])h[p]=m}function Np(a,b,f,g,h,k,p){var m,q,B=new Map,F=b.length,u=k.length,v=Array(F),z;for(m=0;m<F;++m)if(q=b[m])v[m]=z=p.call(q,q.__data__,m,b)+"",B.has(z)?h[m]=q:B.set(z,q);for(m=0;m<u;++m)z=p.call(a,k[m],m,k)+"",(q=B.get(z))?(g[m]=q,q.__data__=k[m],B.delete(z)):f[m]=new nf(a,k[m]);for(m=0;m<F;++m)(q=b[m])&&B.get(v[m])===q&&(h[m]=q)}function Op(a){return a.__data__}function Pp(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function Qp(a){return function(){this.removeAttribute(a)}}
function Rp(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Sp(a,b){return function(){this.setAttribute(a,b)}}function Tp(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function Up(a,b){return function(){var f=b.apply(this,arguments);null==f?this.removeAttribute(a):this.setAttribute(a,f)}}function Vp(a,b){return function(){var f=b.apply(this,arguments);null==f?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,f)}}function ih(a){return a.ownerDocument&&
a.ownerDocument.defaultView||a.document&&a||a.defaultView}function Wp(a){return function(){this.style.removeProperty(a)}}function Xp(a,b,f){return function(){this.style.setProperty(a,b,f)}}function Yp(a,b,f){return function(){var g=b.apply(this,arguments);null==g?this.style.removeProperty(a):this.style.setProperty(a,g,f)}}function jd(a,b){return a.style.getPropertyValue(b)||ih(a).getComputedStyle(a,null).getPropertyValue(b)}function Zp(a){return function(){delete this[a]}}function $p(a,b){return function(){this[a]=
b}}function aq(a,b){return function(){var f=b.apply(this,arguments);null==f?delete this[a]:this[a]=f}}function jh(a){return a.classList||new Dj(a)}function Dj(a){this._node=a;this._names=(a.getAttribute("class")||"").trim().split(/^|\s+/)}function Ej(a,b){a=jh(a);for(var f=-1,g=b.length;++f<g;)a.add(b[f])}function Fj(a,b){a=jh(a);for(var f=-1,g=b.length;++f<g;)a.remove(b[f])}function bq(a){return function(){Ej(this,a)}}function cq(a){return function(){Fj(this,a)}}function dq(a,b){return function(){(b.apply(this,
arguments)?Ej:Fj)(this,a)}}function eq(){this.textContent=""}function fq(a){return function(){this.textContent=a}}function gq(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function hq(){this.innerHTML=""}function iq(a){return function(){this.innerHTML=a}}function jq(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function kq(){this.nextSibling&&this.parentNode.appendChild(this)}function lq(){this.previousSibling&&this.parentNode.insertBefore(this,
this.parentNode.firstChild)}function mq(){return null}function nq(){var a=this.parentNode;a&&a.removeChild(this)}function oq(){var a=this.cloneNode(!1),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function pq(){var a=this.cloneNode(!0),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function qq(a){return function(b){a.call(this,b,this.__data__)}}function rq(a){return a.trim().split(/^|\s+/).map(function(b){var f="",g=b.indexOf(".");0<=g&&(f=b.slice(g+1),b=b.slice(0,
g));return{type:b,name:f}})}function sq(a){return function(){var b=this.__on;if(b){for(var f=0,g=-1,h=b.length,k;f<h;++f)(k=b[f],a.type&&k.type!==a.type||k.name!==a.name)?b[++g]=k:this.removeEventListener(k.type,k.listener,k.options);++g?b.length=g:delete this.__on}}}function tq(a,b,f){return function(){var g=this.__on,h,k=qq(b);if(g)for(var p=0,m=g.length;p<m;++p)if((h=g[p]).type===a.type&&h.name===a.name){this.removeEventListener(h.type,h.listener,h.options);this.addEventListener(h.type,h.listener=
k,h.options=f);h.value=b;return}this.addEventListener(a.type,k,f);h={type:a.type,name:a.name,value:b,listener:k,options:f};g?g.push(h):this.__on=[h]}}function Gj(a,b,f){var g=ih(a),h=g.CustomEvent;"function"===typeof h?h=new h(b,f):(h=g.document.createEvent("Event"),f?(h.initEvent(b,f.bubbles,f.cancelable),h.detail=f.detail):h.initEvent(b,!1,!1));a.dispatchEvent(h)}function uq(a,b){return function(){return Gj(this,a,b)}}function vq(a,b){return function(){return Gj(this,a,b.apply(this,arguments))}}
function Hj(){var a=this,b,f,g,h,k,p,m;return $jscomp.generator.createGenerator(Hj,function(q){switch(q.nextAddress){case 1:b=a._groups,f=0,g=b.length;case 2:if(!(f<g)){q.jumpTo(0);break}h=b[f];k=0;p=h.length;case 5:if(!(k<p)){++f;q.jumpTo(2);break}if(!(m=h[k])){q.jumpTo(6);break}return q.yield(m,6);case 6:++k,q.jumpTo(5)}})}function Kb(a,b){this._groups=a;this._parents=b}function kd(){return new Kb([[document.documentElement]],kh)}function Lb(a){return"string"===typeof a?new Kb([[document.querySelector(a)]],
[document.documentElement]):new Kb([[a]],kh)}function Ij(){return new lh}function lh(){this._="@"+(++wq).toString(36)}function Jj(a){for(var b;b=a.sourceEvent;)a=b;return a}function bc(a,b){a=Jj(a);void 0===b&&(b=a.currentTarget);if(b){var f=b.ownerSVGElement||b;if(f.createSVGPoint)return f=f.createSVGPoint(),f.x=a.clientX,f.y=a.clientY,f=f.matrixTransform(b.getScreenCTM().inverse()),[f.x,f.y];if(b.getBoundingClientRect)return f=b.getBoundingClientRect(),[a.clientX-f.left-b.clientLeft,a.clientY-f.top-
b.clientTop]}return[a.pageX,a.pageY]}function Gd(a){a.preventDefault();a.stopImmediatePropagation()}function of(a){var b=a.document.documentElement;a=Lb(a).on("dragstart.drag",Gd,!0);if("onselectstart"in b)a.on("selectstart.drag",Gd,!0);else b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none"}function pf(a,b){var f=a.document.documentElement,g=Lb(a).on("dragstart.drag",null);b&&(g.on("click.drag",Gd,!0),setTimeout(function(){g.on("click.drag",null)},0));if("onselectstart"in f)g.on("selectstart.drag",
null);else f.style.MozUserSelect=f.__noselect,delete f.__noselect}function mh(a,b){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:b.sourceEvent,enumerable:!0,configurable:!0},subject:{value:b.subject,enumerable:!0,configurable:!0},target:{value:b.target,enumerable:!0,configurable:!0},identifier:{value:b.identifier,enumerable:!0,configurable:!0},active:{value:b.active,enumerable:!0,configurable:!0},x:{value:b.x,enumerable:!0,configurable:!0},y:{value:b.y,
enumerable:!0,configurable:!0},dx:{value:b.dx,enumerable:!0,configurable:!0},dy:{value:b.dy,enumerable:!0,configurable:!0},_:{value:b.dispatch}})}function xq(a){return!a.ctrlKey&&!a.button}function yq(){return this.parentNode}function zq(a,b){return null==b?{x:a.x,y:a.y}:b}function Aq(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hd(a,b,f){a.prototype=b.prototype=f;f.constructor=a}function re(a,b){a=Object.create(a.prototype);for(var f in b)a[f]=b[f];return a}function Sc(){}function Kj(){return this.rgb().formatHex()}
function Lj(){return this.rgb().formatRgb()}function Tc(a){var b,f;a=(a+"").trim().toLowerCase();return(b=Bq.exec(a))?(f=b[1].length,b=parseInt(b[1],16),6===f?Mj(b):3===f?new Ib(b>>8&15|b>>4&240,b>>4&15|b&240,(b&15)<<4|b&15,1):8===f?qf(b>>24&255,b>>16&255,b>>8&255,(b&255)/255):4===f?qf(b>>12&15|b>>8&240,b>>8&15|b>>4&240,b>>4&15|b&240,((b&15)<<4|b&15)/255):null):(b=Cq.exec(a))?new Ib(b[1],b[2],b[3],1):(b=Dq.exec(a))?new Ib(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=Eq.exec(a))?qf(b[1],b[2],b[3],
b[4]):(b=Fq.exec(a))?qf(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=Gq.exec(a))?Nj(b[1],b[2]/100,b[3]/100,1):(b=Hq.exec(a))?Nj(b[1],b[2]/100,b[3]/100,b[4]):Oj.hasOwnProperty(a)?Mj(Oj[a]):"transparent"===a?new Ib(NaN,NaN,NaN,0):null}function Mj(a){return new Ib(a>>16&255,a>>8&255,a&255,1)}function qf(a,b,f,g){0>=g&&(a=b=f=NaN);return new Ib(a,b,f,g)}function nh(a){a instanceof Sc||(a=Tc(a));if(!a)return new Ib;a=a.rgb();return new Ib(a.r,a.g,a.b,a.opacity)}function Id(a,b,f,g){return 1===arguments.length?
nh(a):new Ib(a,b,f,null==g?1:g)}function Ib(a,b,f,g){this.r=+a;this.g=+b;this.b=+f;this.opacity=+g}function Pj(){return"#"+oh(this.r)+oh(this.g)+oh(this.b)}function Qj(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function oh(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>
a?"0":"")+a.toString(16)}function Nj(a,b,f,g){0>=g?a=b=f=NaN:0>=f||1<=f?a=b=NaN:0>=b&&(a=NaN);return new sc(a,b,f,g)}function Rj(a){if(a instanceof sc)return new sc(a.h,a.s,a.l,a.opacity);a instanceof Sc||(a=Tc(a));if(!a)return new sc;if(a instanceof sc)return a;a=a.rgb();var b=a.r/255,f=a.g/255,g=a.b/255,h=Math.min(b,f,g),k=Math.max(b,f,g),p=NaN,m=k-h,q=(k+h)/2;m?(p=b===k?(f-g)/m+6*(f<g):f===k?(g-b)/m+2:(b-f)/m+4,m/=.5>q?k+h:2-k-h,p*=60):m=0<q&&1>q?0:p;return new sc(p,m,q,a.opacity)}function rf(a,
b,f,g){return 1===arguments.length?Rj(a):new sc(a,b,f,null==g?1:g)}function sc(a,b,f,g){this.h=+a;this.s=+b;this.l=+f;this.opacity=+g}function ph(a,b,f){return 255*(60>a?b+(f-b)*a/60:180>a?f:240>a?b+(f-b)*(240-a)/60:b)}function Sj(a){if(a instanceof lc)return new lc(a.l,a.a,a.b,a.opacity);if(a instanceof tc)return Tj(a);a instanceof Ib||(a=nh(a));var b=qh(a.r),f=qh(a.g),g=qh(a.b),h=rh(.2225045*b+.7168786*f+.0606169*g);if(b===f&&f===g)var k=b=h;else k=rh((.4360747*b+.3850649*f+.1430804*g)/.96422),
b=rh((.0139322*b+.0971045*f+.7141733*g)/.82521);return new lc(116*h-16,500*(k-h),200*(h-b),a.opacity)}function sf(a,b,f,g){return 1===arguments.length?Sj(a):new lc(a,b,f,null==g?1:g)}function lc(a,b,f,g){this.l=+a;this.a=+b;this.b=+f;this.opacity=+g}function rh(a){return a>Iq?Math.pow(a,1/3):a/Uj+Vj}function sh(a){return a>Jd?a*a*a:Uj*(a-Vj)}function th(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function qh(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Wj(a){if(a instanceof
tc)return new tc(a.h,a.c,a.l,a.opacity);a instanceof lc||(a=Sj(a));if(0===a.a&&0===a.b)return new tc(NaN,0<a.l&&100>a.l?0:NaN,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*Xj;return new tc(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function tf(a,b,f,g){return 1===arguments.length?Wj(a):new tc(a,b,f,null==g?1:g)}function tc(a,b,f,g){this.h=+a;this.c=+b;this.l=+f;this.opacity=+g}function Tj(a){if(isNaN(a.h))return new lc(a.l,0,0,a.opacity);var b=a.h*Yj;return new lc(a.l,Math.cos(b)*a.c,Math.sin(b)*
a.c,a.opacity)}function mc(a,b,f,g){if(1===arguments.length){var h=a;if(h instanceof ld)h=new ld(h.h,h.s,h.l,h.opacity);else{h instanceof Ib||(h=nh(h));var k=h.g/255,p=h.b/255,m=(Zj*p+h.r/255*-1.7884503806-3.5172982438*k)/(Zj+-1.7884503806-3.5172982438);p-=m;var q=(1.97294*(k-m)- -.29227*p)/-.90649;p=(k=Math.sqrt(q*q+p*p)/(1.97294*m*(1-m)))?Math.atan2(q,p)*Xj-120:NaN;h=new ld(0>p?p+360:p,k,m,h.opacity)}}else h=new ld(a,b,f,null==g?1:g);return h}function ld(a,b,f,g){this.h=+a;this.s=+b;this.l=+f;this.opacity=
+g}function ak(a,b,f,g,h){var k=a*a,p=k*a;return((1-3*a+3*k-p)*b+(4-6*k+3*p)*f+(1+3*a+3*k-3*p)*g+p*h)/6}function bk(a){var b=a.length-1;return function(f){var g=0>=f?f=0:1<=f?(f=1,b-1):Math.floor(f*b),h=a[g],k=a[g+1];return ak((f-g/b)*b,0<g?a[g-1]:2*h-k,h,k,g<b-1?a[g+2]:2*k-h)}}function ck(a){var b=a.length;return function(f){var g=Math.floor((0>(f%=1)?++f:f)*b);return ak((f-g/b)*b,a[(g+b-1)%b],a[g%b],a[(g+1)%b],a[(g+2)%b])}}function dk(a,b){return function(f){return a+f*b}}function Jq(a,b,f){return a=
Math.pow(a,f),b=Math.pow(b,f)-a,f=1/f,function(g){return Math.pow(a+g*b,f)}}function uf(a,b){var f=b-a;return f?dk(a,180<f||-180>f?f-360*Math.round(f/360):f):vf(isNaN(a)?b:a)}function Kq(a){return 1===(a=+a)?Fb:function(b,f){return f-b?Jq(b,f,a):vf(isNaN(b)?f:b)}}function Fb(a,b){var f=b-a;return f?dk(a,f):vf(isNaN(a)?b:a)}function ek(a){return function(b){var f=b.length,g=Array(f),h=Array(f),k=Array(f),p;for(p=0;p<f;++p){var m=Id(b[p]);g[p]=m.r||0;h[p]=m.g||0;k[p]=m.b||0}g=a(g);h=a(h);k=a(k);m.opacity=
1;return function(q){m.r=g(q);m.g=h(q);m.b=k(q);return m+""}}}function uh(a,b){b||(b=[]);var f=a?Math.min(b.length,a.length):0,g=b.slice(),h;return function(k){for(h=0;h<f;++h)g[h]=a[h]*(1-k)+b[h]*k;return g}}function fk(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function gk(a,b){var f=b?b.length:0,g=a?Math.min(f,a.length):0,h=Array(g),k=Array(f),p;for(p=0;p<g;++p)h[p]=Uc(a[p],b[p]);for(;p<f;++p)k[p]=b[p];return function(m){for(p=0;p<g;++p)k[p]=h[p](m);return k}}function hk(a,b){var f=
new Date;return a=+a,b=+b,function(g){return f.setTime(a*(1-g)+b*g),f}}function fc(a,b){return a=+a,b=+b,function(f){return a*(1-f)+b*f}}function ik(a,b){var f={},g={},h;if(null===a||"object"!==typeof a)a={};if(null===b||"object"!==typeof b)b={};for(h in b)h in a?f[h]=Uc(a[h],b[h]):g[h]=b[h];return function(k){for(h in f)g[h]=f[h](k);return g}}function Lq(a){return function(){return a}}function Mq(a){return function(b){return a(b)+""}}function vh(a,b){var f=wh.lastIndex=xh.lastIndex=0,g,h,k,p=-1,
m=[],q=[];a+="";for(b+="";(g=wh.exec(a))&&(h=xh.exec(b));)(k=h.index)>f&&(k=b.slice(f,k),m[p]?m[p]+=k:m[++p]=k),(g=g[0])===(h=h[0])?m[p]?m[p]+=h:m[++p]=h:(m[++p]=null,q.push({i:p,x:fc(g,h)})),f=xh.lastIndex;f<b.length&&(k=b.slice(f),m[p]?m[p]+=k:m[++p]=k);return 2>m.length?q[0]?Mq(q[0].x):Lq(b):(b=q.length,function(B){for(var F=0,u;F<b;++F)m[(u=q[F]).i]=u.x(B);return m.join("")})}function Uc(a,b){var f=typeof b,g;return null==b||"boolean"===f?vf(b):("number"===f?fc:"string"===f?(g=Tc(b))?(b=g,se):
vh:b instanceof Tc?se:b instanceof Date?hk:fk(b)?uh:Array.isArray(b)?gk:"function"!==typeof b.valueOf&&"function"!==typeof b.toString||isNaN(b)?ik:fc)(a,b)}function wf(a,b){return a=+a,b=+b,function(f){return Math.round(a*(1-f)+b*f)}}function jk(a,b,f,g,h,k){var p,m,q;if(p=Math.sqrt(a*a+b*b))a/=p,b/=p;if(q=a*f+b*g)f-=a*q,g-=b*q;if(m=Math.sqrt(f*f+g*g))f/=m,g/=m,q/=m;a*g<b*f&&(a=-a,b=-b,q=-q,p=-p);return{translateX:h,translateY:k,rotate:Math.atan2(b,a)*kk,skewX:Math.atan(q)*kk,scaleX:p,scaleY:m}}function lk(a,
b,f,g){function h(B){return B.length?B.pop()+" ":""}function k(B,F,u,v,z,C){B!==u||F!==v?(z=z.push("translate(",null,b,null,f),C.push({i:z-4,x:fc(B,u)},{i:z-2,x:fc(F,v)})):(u||v)&&z.push("translate("+u+b+v+f)}function p(B,F,u,v){B!==F?(180<B-F?F+=360:180<F-B&&(B+=360),v.push({i:u.push(h(u)+"rotate(",null,g)-2,x:fc(B,F)})):F&&u.push(h(u)+"rotate("+F+g)}function m(B,F,u,v){B!==F?v.push({i:u.push(h(u)+"skewX(",null,g)-2,x:fc(B,F)}):F&&u.push(h(u)+"skewX("+F+g)}function q(B,F,u,v,z,C){B!==u||F!==v?(z=
z.push(h(z)+"scale(",null,",",null,")"),C.push({i:z-4,x:fc(B,u)},{i:z-2,x:fc(F,v)})):1===u&&1===v||z.push(h(z)+"scale("+u+","+v+")")}return function(B,F){var u=[],v=[];B=a(B);F=a(F);k(B.translateX,B.translateY,F.translateX,F.translateY,u,v);p(B.rotate,F.rotate,u,v);m(B.skewX,F.skewX,u,v);q(B.scaleX,B.scaleY,F.scaleX,F.scaleY,u,v);B=F=null;return function(z){for(var C=-1,r=v.length,t;++C<r;)u[(t=v[C]).i]=t.x(z);return u.join("")}}}function mk(a){return((a=Math.exp(a))+1/a)/2}function nk(a){return function(b,
f){var g=a((b=rf(b)).h,(f=rf(f)).h),h=Fb(b.s,f.s),k=Fb(b.l,f.l),p=Fb(b.opacity,f.opacity);return function(m){b.h=g(m);b.s=h(m);b.l=k(m);b.opacity=p(m);return b+""}}}function ok(a){return function(b,f){var g=a((b=tf(b)).h,(f=tf(f)).h),h=Fb(b.c,f.c),k=Fb(b.l,f.l),p=Fb(b.opacity,f.opacity);return function(m){b.h=g(m);b.c=h(m);b.l=k(m);b.opacity=p(m);return b+""}}}function pk(a){return function g(f){function h(k,p){var m=a((k=mc(k)).h,(p=mc(p)).h),q=Fb(k.s,p.s),B=Fb(k.l,p.l),F=Fb(k.opacity,p.opacity);
return function(u){k.h=m(u);k.s=q(u);k.l=B(Math.pow(u,f));k.opacity=F(u);return k+""}}f=+f;h.gamma=g;return h}(1)}function qk(a,b){void 0===b&&(b=a,a=Uc);for(var f=0,g=b.length-1,h=b[0],k=Array(0>g?0:g);f<g;)k[f]=a(h,h=b[++f]);return function(p){var m=Math.max(0,Math.min(g-1,Math.floor(p*=g)));return k[m](p-m)}}function te(){return md||(rk(Nq),md=ue.now()+xf)}function Nq(){md=0}function ve(){this._call=this._time=this._next=null}function yf(a,b,f){var g=new ve;g.restart(a,b,f);return g}function sk(){te();
++Kd;for(var a=zf,b;a;)0<=(b=md-a._time)&&a._call.call(null,b),a=a._next;--Kd}function tk(){md=(Af=ue.now())+xf;Kd=we=0;try{sk()}finally{Kd=0;for(var a,b=zf,f,g=Infinity;b;)b._call?(g>b._time&&(g=b._time),a=b,b=b._next):(f=b._next,b._next=null,b=a?a._next=f:zf=f);xe=a;yh(g);md=0}}function Oq(){var a=ue.now(),b=a-Af;1E3<b&&(xf-=b,Af=a)}function yh(a){Kd||(we&&(we=clearTimeout(we)),24<a-md?(Infinity>a&&(we=setTimeout(tk,a-ue.now()-xf)),ye&&(ye=clearInterval(ye))):(ye||(Af=ue.now(),ye=setInterval(Oq,
1E3)),Kd=1,rk(tk)))}function zh(a,b,f){var g=new ve;b=null==b?0:+b;g.restart(function(h){g.stop();a(h+b)},b,f);return g}function Bf(a,b,f,g,h,k){var p=a.__transition;if(!p)a.__transition={};else if(f in p)return;Pq(a,f,{name:b,index:g,group:h,on:Qq,tween:Rq,time:k.time,delay:k.delay,duration:k.duration,ease:k.ease,timer:null,state:0})}function Ah(a,b){a=nc(a,b);if(0<a.state)throw Error("too late; already scheduled");return a}function uc(a,b){a=nc(a,b);if(3<a.state)throw Error("too late; already running");
return a}function nc(a,b){a=a.__transition;if(!a||!(a=a[b]))throw Error("transition not found");return a}function Pq(a,b,f){function g(q){var B,F;if(1!==f.state)return k();for(v in p){var u=p[v];if(u.name===f.name){if(3===u.state)return zh(g);4===u.state?(u.state=6,u.timer.stop(),u.on.call("interrupt",a,a.__data__,u.index,u.group),delete p[v]):+v<b&&(u.state=6,u.timer.stop(),u.on.call("cancel",a,a.__data__,u.index,u.group),delete p[v])}}zh(function(){3===f.state&&(f.state=4,f.timer.restart(h,f.delay,
f.time),h(q))});f.state=2;f.on.call("start",a,a.__data__,f.index,f.group);if(2===f.state){f.state=3;m=Array(F=f.tween.length);var v=0;for(B=-1;v<F;++v)if(u=f.tween[v].value.call(a,a.__data__,f.index,f.group))m[++B]=u;m.length=B+1}}function h(q){q=q<f.duration?f.ease.call(null,q/f.duration):(f.timer.restart(k),f.state=5,1);for(var B=-1,F=m.length;++B<F;)m[B].call(a,q);5===f.state&&(f.on.call("end",a,a.__data__,f.index,f.group),k())}function k(){f.state=6;f.timer.stop();delete p[b];for(var q in p)return;
delete a.__transition}var p=a.__transition,m;p[b]=f;f.timer=yf(function(q){f.state=1;f.timer.restart(g,f.delay,f.time);f.delay<=q&&g(q-f.delay)},0,f.time)}function nd(a,b){var f=a.__transition,g,h=!0,k;if(f){b=null==b?null:b+"";for(k in f)if((g=f[k]).name!==b)h=!1;else{var p=2<g.state&&5>g.state;g.state=6;g.timer.stop();g.on.call(p?"interrupt":"cancel",a,a.__data__,g.index,g.group);delete f[k]}h&&delete a.__transition}}function Sq(a,b){var f,g;return function(){var h=uc(this,a),k=h.tween;if(k!==f){g=
f=k;k=0;for(var p=g.length;k<p;++k)if(g[k].name===b){g=g.slice();g.splice(k,1);break}}h.tween=g}}function Tq(a,b,f){var g,h;if("function"!==typeof f)throw Error();return function(){var k=uc(this,a),p=k.tween;if(p!==g){h=(g=p).slice();p={name:b,value:f};for(var m=0,q=h.length;m<q;++m)if(h[m].name===b){h[m]=p;break}m===q&&h.push(p)}k.tween=h}}function Bh(a,b,f){var g=a._id;a.each(function(){var h=uc(this,g);(h.value||(h.value={}))[b]=f.apply(this,arguments)});return function(h){return nc(h,g).value[b]}}
function uk(a,b){var f;return("number"===typeof b?fc:b instanceof Tc?se:(f=Tc(b))?(b=f,se):vh)(a,b)}function Uq(a){return function(){this.removeAttribute(a)}}function Vq(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Wq(a,b,f){var g,h=f+"",k;return function(){var p=this.getAttribute(a);return p===h?null:p===g?k:k=b(g=p,f)}}function Xq(a,b,f){var g,h=f+"",k;return function(){var p=this.getAttributeNS(a.space,a.local);return p===h?null:p===g?k:k=b(g=p,f)}}function Yq(a,b,f){var g,
h,k;return function(){var p=f(this);if(null==p)return void this.removeAttribute(a);var m=this.getAttribute(a);var q=p+"";return m===q?null:m===g&&q===h?k:(h=q,k=b(g=m,p))}}function Zq(a,b,f){var g,h,k;return function(){var p=f(this);if(null==p)return void this.removeAttributeNS(a.space,a.local);var m=this.getAttributeNS(a.space,a.local);var q=p+"";return m===q?null:m===g&&q===h?k:(h=q,k=b(g=m,p))}}function $q(a,b){return function(f){this.setAttribute(a,b.call(this,f))}}function ar(a,b){return function(f){this.setAttributeNS(a.space,
a.local,b.call(this,f))}}function br(a,b){function f(){var k=b.apply(this,arguments);k!==h&&(g=(h=k)&&ar(a,k));return g}var g,h;f._value=b;return f}function cr(a,b){function f(){var k=b.apply(this,arguments);k!==h&&(g=(h=k)&&$q(a,k));return g}var g,h;f._value=b;return f}function dr(a,b){return function(){Ah(this,a).delay=+b.apply(this,arguments)}}function er(a,b){return b=+b,function(){Ah(this,a).delay=b}}function fr(a,b){return function(){uc(this,a).duration=+b.apply(this,arguments)}}function gr(a,
b){return b=+b,function(){uc(this,a).duration=b}}function hr(a,b){if("function"!==typeof b)throw Error();return function(){uc(this,a).ease=b}}function ir(a,b){return function(){var f=b.apply(this,arguments);if("function"!==typeof f)throw Error();uc(this,a).ease=f}}function jr(a){return(a+"").trim().split(/^|\s+/).every(function(b){var f=b.indexOf(".");0<=f&&(b=b.slice(0,f));return!b||"start"===b})}function kr(a,b,f){var g,h,k=jr(b)?Ah:uc;return function(){var p=k(this,a),m=p.on;if(m!==g)(h=(g=m).copy()).on(b,
f);p.on=h}}function lr(a){return function(){var b=this.parentNode,f;for(f in this.__transition)if(+f!==a)return;b&&b.removeChild(this)}}function mr(a,b){var f,g,h;return function(){var k=jd(this,a),p=(this.style.removeProperty(a),jd(this,a));return k===p?null:k===f&&p===g?h:h=b(f=k,g=p)}}function vk(a){return function(){this.style.removeProperty(a)}}function nr(a,b,f){var g,h=f+"",k;return function(){var p=jd(this,a);return p===h?null:p===g?k:k=b(g=p,f)}}function or(a,b,f){var g,h,k;return function(){var p=
jd(this,a),m=f(this),q=m+"";null==m&&(q=m=(this.style.removeProperty(a),jd(this,a)));return p===q?null:p===g&&q===h?k:(h=q,k=b(g=p,m))}}function pr(a,b){var f,g,h,k="style."+b,p="end."+k,m;return function(){var q=uc(this,a),B=q.on,F=null==q.value[k]?m||(m=vk(b)):void 0;if(B!==f||h!==F)(g=(f=B).copy()).on(p,h=F);q.on=g}}function qr(a,b,f){return function(g){this.style.setProperty(a,b.call(this,g),f)}}function rr(a,b,f){function g(){var p=b.apply(this,arguments);p!==k&&(h=(k=p)&&qr(a,p,f));return h}
var h,k;g._value=b;return g}function sr(a){return function(){this.textContent=a}}function tr(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function ur(a){return function(b){this.textContent=a.call(this,b)}}function vr(a){function b(){var h=a.apply(this,arguments);h!==g&&(f=(g=h)&&ur(h));return f}var f,g;b._value=a;return b}function vc(a,b,f,g){this._groups=a;this._parents=b;this._name=f;this._id=g}function wk(a){return kd().transition(a)}function xk(a){return(1>=(a*=2)?a*a:--a*
(2-a)+1)/2}function Ch(a){return(1>=(a*=2)?a*a*a:(a-=2)*a*a+2)/2}function yk(a){return(1-Math.cos(zk*a))/2}function Vc(a){return 1.0009775171065494*(Math.pow(2,-10*a)-9.765625E-4)}function Ak(a){return(1>=(a*=2)?Vc(1-a):2-Vc(a-1))/2}function Bk(a){return(1>=(a*=2)?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}function ze(a){return(a=+a)<Dh?Cf*a*a:a<wr?Cf*(a-=xr)*a+.75:a<yr?Cf*(a-=zr)*a+.9375:Cf*(a-=Ar)*a+.984375}function Br(a,b){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},
sourceEvent:{value:b.sourceEvent,enumerable:!0,configurable:!0},target:{value:b.target,enumerable:!0,configurable:!0},selection:{value:b.selection,enumerable:!0,configurable:!0},mode:{value:b.mode,enumerable:!0,configurable:!0},_:{value:b.dispatch}})}function Ck(a){return[+a[0],+a[1]]}function Eh(a){return[Ck(a[0]),Ck(a[1])]}function Ae(a){return{type:a}}function Cr(a){return!a.ctrlKey&&!a.button}function Dr(){var a=this.ownerSVGElement||this;return a.hasAttribute("viewBox")?(a=a.viewBox.baseVal,
[[a.x,a.y],[a.x+a.width,a.y+a.height]]):[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]}function Er(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fh(a){for(;!a.__brush;)if(!(a=a.parentNode))return;return a.__brush}function Gh(a){function b(t){var A=t.property("__brush",q).selectAll(".overlay").data([Ae("overlay")]);A.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Gc.overlay).merge(A).each(function(){var E=Fh(this).extent;Lb(this).attr("x",
E[0][0]).attr("y",E[0][1]).attr("width",E[1][0]-E[0][0]).attr("height",E[1][1]-E[0][1])});t.selectAll(".selection").data([Ae("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Gc.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");A=t.selectAll(".handle").data(a.handles,function(E){return E.type});A.exit().remove();A.enter().append("rect").attr("class",function(E){return"handle handle--"+E.type}).attr("cursor",
function(E){return Gc[E.type]});t.each(f).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",k).filter(u).on("touchstart.brush",k).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){var t=Lb(this),A=Fh(this).selection;A?(t.selectAll(".selection").style("display",null).attr("x",A[0][0]).attr("y",A[0][1]).attr("width",A[1][0]-A[0][0]).attr("height",A[1][1]-A[0][1]),t.selectAll(".handle").style("display",
null).attr("x",function(E){return"e"===E.type[E.type.length-1]?A[1][0]-C/2:A[0][0]-C/2}).attr("y",function(E){return"s"===E.type[0]?A[1][1]-C/2:A[0][1]-C/2}).attr("width",function(E){return"n"===E.type||"s"===E.type?A[1][0]-A[0][0]+C:C}).attr("height",function(E){return"e"===E.type||"w"===E.type?A[1][1]-A[0][1]+C:C})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function g(t,A,E){var H=t.__brush.emitter;return!H||E&&
H.clean?new h(t,A,E):H}function h(t,A,E){this.that=t;this.args=A;this.state=t.__brush;this.active=0;this.clean=E}function k(t){function A(V){for(var ea=$jscomp.makeIterator(V.changedTouches||[V]),sa=ea.next();!sa.done;sa=ea.next()){sa=sa.value;for(var fa=$jscomp.makeIterator(I),za=fa.next();!za.done;za=fa.next())za=za.value,za.identifier===sa.identifier&&(za.cur=bc(sa,W))}!l||D||J||1!==I.length||(ea=I[0],Dk(ea.cur[0]-ea[0])>Dk(ea.cur[1]-ea[1])?J=!0:D=!0);ea=$jscomp.makeIterator(I);for(sa=ea.next();!sa.done;sa=
ea.next())sa=sa.value,sa.cur&&(sa[0]=sa.cur[0],sa[1]=sa.cur[1]);Za=!0;V.preventDefault();V.stopImmediatePropagation();E(V)}function E(V){var ea=I[0],sa=ea.point0;Ha=ea[0]-sa[0];Pa=ea[1]-sa[1];switch(ka){case Hh:case Ek:Y&&(Ha=Mb(La-ta,Nb(Q-ca,Ha)),K=ta+Ha,aa=ca+Ha);Z&&(Pa=Mb(Ia-Ta,Nb(Ea-Na,Pa)),N=Ta+Pa,X=Na+Pa);break;case Ld:I[1]?(Y&&(K=Mb(La,Nb(Q,I[0][0])),aa=Mb(La,Nb(Q,I[1][0])),Y=1),Z&&(N=Mb(Ia,Nb(Ea,I[0][1])),X=Mb(Ia,Nb(Ea,I[1][1])),Z=1)):(0>Y?(Ha=Mb(La-ta,Nb(Q-ta,Ha)),K=ta+Ha,aa=ca):0<Y&&(Ha=
Mb(La-ca,Nb(Q-ca,Ha)),K=ta,aa=ca+Ha),0>Z?(Pa=Mb(Ia-Ta,Nb(Ea-Ta,Pa)),N=Ta+Pa,X=Na):0<Z&&(Pa=Mb(Ia-Na,Nb(Ea-Na,Pa)),N=Ta,X=Na+Pa));break;case Md:Y&&(K=Mb(La,Nb(Q,ta-Ha*Y)),aa=Mb(La,Nb(Q,ca+Ha*Y))),Z&&(N=Mb(Ia,Nb(Ea,Ta-Pa*Z)),X=Mb(Ia,Nb(Ea,Na+Pa*Z)))}aa<K&&(Y*=-1,ea=ta,ta=ca,ca=ea,ea=K,K=aa,aa=ea,da in Fk&&ja.attr("cursor",Gc[da=Fk[da]]));X<N&&(Z*=-1,ea=Ta,Ta=Na,Na=ea,ea=N,N=X,X=ea,da in Gk&&ja.attr("cursor",Gc[da=Gk[da]]));qa.selection&&(wa=qa.selection);D&&(K=wa[0][0],aa=wa[1][0]);J&&(N=wa[0][1],X=
wa[1][1]);if(wa[0][0]!==K||wa[0][1]!==N||wa[1][0]!==aa||wa[1][1]!==X)qa.selection=[[K,N],[aa,X]],f.call(W),ra.brush(V,ka.name)}function H(V){V.stopImmediatePropagation();if(V.touches){if(V.touches.length)return;r&&clearTimeout(r);r=setTimeout(function(){r=null},500)}else pf(V.view,Za),xa.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ha.attr("pointer-events","all");ja.attr("cursor",Gc.overlay);qa.selection&&(wa=qa.selection);if(wa[0][0]===wa[1][0]||wa[0][1]===wa[1][1])qa.selection=
null,f.call(W);ra.end(V,ka.name)}function M(V){switch(V.keyCode){case 16:l=Y&&Z;break;case 18:ka===Ld&&(Y&&(ca=aa-Ha*Y,ta=K+Ha*Y),Z&&(Na=X-Pa*Z,Ta=N+Pa*Z),ka=Md,E());break;case 32:if(ka===Ld||ka===Md)0>Y?ca=aa-Ha:0<Y&&(ta=K-Ha),0>Z?Na=X-Pa:0<Z&&(Ta=N-Pa),ka=Hh,ja.attr("cursor",Gc.selection),E();break;default:return}V.preventDefault();V.stopImmediatePropagation()}function U(V){switch(V.keyCode){case 16:l&&(D=J=l=!1,E());break;case 18:ka===Md&&(0>Y?ca=aa:0<Y&&(ta=K),0>Z?Na=X:0<Z&&(Ta=N),ka=Ld,E());
break;case 32:ka===Hh&&(V.altKey?(Y&&(ca=aa-Ha*Y,ta=K+Ha*Y),Z&&(Na=X-Pa*Z,Ta=N+Pa*Z),ka=Md):(0>Y?ca=aa:0<Y&&(ta=K),0>Z?Na=X:0<Z&&(Ta=N),ka=Ld),ja.attr("cursor",Gc[da]),E());break;default:return}V.preventDefault();V.stopImmediatePropagation()}if((!r||t.touches)&&F.apply(this,arguments)){var W=this,da=t.target.__data__.type,ka="selection"===(v&&t.metaKey?da="overlay":da)?Ek:v&&t.altKey?Md:Ld,Y=a===Df?null:Fr[da],Z=a===Ef?null:Gr[da],qa=Fh(W),oa=qa.extent,wa=qa.selection,La=oa[0][0],ta,Ia=oa[0][1],Ta,
Q=oa[1][0],ca,Ea=oa[1][1],Na,Ha=0,Pa=0,Za,l=Y&&Z&&v&&t.shiftKey,D,J,I=Array.from(t.touches||[t],function(V){var ea=V.identifier;V=bc(V,W);V.point0=V.slice();V.identifier=ea;return V});"overlay"===da?(wa&&(Za=!0),oa=[I[0],I[1]||I[0]],qa.selection=wa=[[ta=a===Df?La:Nb(oa[0][0],oa[1][0]),Ta=a===Ef?Ia:Nb(oa[0][1],oa[1][1])],[ca=a===Df?Q:Mb(oa[0][0],oa[1][0]),Na=a===Ef?Ea:Mb(oa[0][1],oa[1][1])]],1<I.length&&E()):(ta=wa[0][0],Ta=wa[0][1],ca=wa[1][0],Na=wa[1][1]);var K=ta;var N=Ta;var aa=ca;var X=Na;var ha=
Lb(W).attr("pointer-events","none"),ja=ha.selectAll(".overlay").attr("cursor",Gc[da]);nd(W);var ra=g(W,arguments,!0).beforestart();if(t.touches)ra.moved=A,ra.ended=H;else{var xa=Lb(t.view).on("mousemove.brush",A,!0).on("mouseup.brush",H,!0);if(v)xa.on("keydown.brush",M,!0).on("keyup.brush",U,!0);of(t.view)}f.call(W);ra.start(t,ka.name)}}function p(t){g(this,arguments).moved(t)}function m(t){g(this,arguments).ended(t)}function q(){var t=this.__brush||{selection:null};t.extent=Eh(B.apply(this,arguments));
t.dim=a;return t}var B=Dr,F=Cr,u=Er,v=!0,z=id("start","brush","end"),C=6,r;b.move=function(t,A){t.tween?t.on("start.brush",function(E){g(this,arguments).beforestart().start(E)}).on("interrupt.brush end.brush",function(E){g(this,arguments).end(E)}).tween("brush",function(){function E(Y){M.selection=1===Y&&null===da?null:ka(Y);f.call(H);U.brush()}var H=this,M=H.__brush,U=g(H,arguments),W=M.selection,da=a.input("function"===typeof A?A.apply(this,arguments):A,M.extent),ka=Uc(W,da);return null!==W&&null!==
da?E:E(1)}):t.each(function(){var E=arguments,H=this.__brush,M=a.input("function"===typeof A?A.apply(this,E):A,H.extent);E=g(this,E).beforestart();nd(this);H.selection=null===M?null:M;f.call(this);E.start().brush().end()})};b.clear=function(t){b.move(t,null)};h.prototype={beforestart:function(){1===++this.active&&(this.state.emitter=this,this.starting=!0);return this},start:function(t,A){this.starting?(this.starting=!1,this.emit("start",t,A)):this.emit("brush",t);return this},brush:function(t,A){this.emit("brush",
t,A);return this},end:function(t,A){0===--this.active&&(delete this.state.emitter,this.emit("end",t,A));return this},emit:function(t,A,E){var H=Lb(this.that).datum();z.call(t,this.that,new Br(t,{sourceEvent:A,target:b,selection:a.output(this.state.selection),mode:E,dispatch:z}),H)}};b.extent=function(t){return arguments.length?(B="function"===typeof t?t:Ih(Eh(t)),b):B};b.filter=function(t){return arguments.length?(F="function"===typeof t?t:Ih(!!t),b):F};b.touchable=function(t){return arguments.length?
(u="function"===typeof t?t:Ih(!!t),b):u};b.handleSize=function(t){return arguments.length?(C=+t,b):C};b.keyModifiers=function(t){return arguments.length?(v=!!t,b):v};b.on=function(){var t=z.on.apply(z,arguments);return t===z?b:t};return b}function Jh(a,b){return Array.from({length:b-a},function(f,g){return a+g})}function Hr(a){return function(b,f){return a(b.source.value+b.target.value,f.source.value+f.target.value)}}function Kh(a,b){function f(m){var q=m.length,B=Array(q),F=Jh(0,q),u=Array(q*q),
v=Array(q),z=0,C;m=Float64Array.from({length:q*q},b?function(U,W){return m[W%q][W/q|0]}:function(U,W){return m[W/q|0][W%q]});for(C=0;C<q;++C){for(var r=0,t=0;t<q;++t)r+=m[C*q+t]+a*m[t*q+C];z+=B[C]=r}C=(z=Hk(0,Ik-g*q)/z)?g:Ik/q;r=0;h&&F.sort(function(U,W){return h(B[U],B[W])});t={};F=$jscomp.makeIterator(F);for(var A=F.next();!A.done;t={$jscomp$loop$prop$i$177$341:t.$jscomp$loop$prop$i$177$341},A=F.next()){t.$jscomp$loop$prop$i$177$341=A.value;A=r;if(a){var E=Jh(~q+1,q).filter(function(U){return function(W){return 0>
W?m[~W*q+U.$jscomp$loop$prop$i$177$341]:m[U.$jscomp$loop$prop$i$177$341*q+W]}}(t));k&&E.sort(function(U){return function(W,da){return k(0>W?-m[~W*q+U.$jscomp$loop$prop$i$177$341]:m[U.$jscomp$loop$prop$i$177$341*q+W],0>da?-m[~da*q+U.$jscomp$loop$prop$i$177$341]:m[U.$jscomp$loop$prop$i$177$341*q+da])}}(t));E=$jscomp.makeIterator(E);for(var H=E.next();!H.done;H=E.next())H=H.value,0>H?(u[~H*q+t.$jscomp$loop$prop$i$177$341]||(u[~H*q+t.$jscomp$loop$prop$i$177$341]={source:null,target:null})).target={index:t.$jscomp$loop$prop$i$177$341,
startAngle:r,endAngle:r+=m[~H*q+t.$jscomp$loop$prop$i$177$341]*z,value:m[~H*q+t.$jscomp$loop$prop$i$177$341]}:(u[t.$jscomp$loop$prop$i$177$341*q+H]||(u[t.$jscomp$loop$prop$i$177$341*q+H]={source:null,target:null})).source={index:t.$jscomp$loop$prop$i$177$341,startAngle:r,endAngle:r+=m[t.$jscomp$loop$prop$i$177$341*q+H]*z,value:m[t.$jscomp$loop$prop$i$177$341*q+H]}}else for(E=Jh(0,q).filter(function(U){return function(W){return m[U.$jscomp$loop$prop$i$177$341*q+W]||m[W*q+U.$jscomp$loop$prop$i$177$341]}}(t)),
k&&E.sort(function(U){return function(W,da){return k(m[U.$jscomp$loop$prop$i$177$341*q+W],m[U.$jscomp$loop$prop$i$177$341*q+da])}}(t)),E=$jscomp.makeIterator(E),H=E.next();!H.done;H=E.next()){var M=H.value;H=void 0;t.$jscomp$loop$prop$i$177$341<M?(H=u[t.$jscomp$loop$prop$i$177$341*q+M]||(u[t.$jscomp$loop$prop$i$177$341*q+M]={source:null,target:null}),H.source={index:t.$jscomp$loop$prop$i$177$341,startAngle:r,endAngle:r+=m[t.$jscomp$loop$prop$i$177$341*q+M]*z,value:m[t.$jscomp$loop$prop$i$177$341*
q+M]}):(H=u[M*q+t.$jscomp$loop$prop$i$177$341]||(u[M*q+t.$jscomp$loop$prop$i$177$341]={source:null,target:null}),H.target={index:t.$jscomp$loop$prop$i$177$341,startAngle:r,endAngle:r+=m[t.$jscomp$loop$prop$i$177$341*q+M]*z,value:m[t.$jscomp$loop$prop$i$177$341*q+M]},t.$jscomp$loop$prop$i$177$341===M&&(H.source=H.target));H.source&&H.target&&H.source.value<H.target.value&&(M=H.source,H.source=H.target,H.target=M)}v[t.$jscomp$loop$prop$i$177$341]={index:t.$jscomp$loop$prop$i$177$341,startAngle:A,endAngle:r,
value:B[t.$jscomp$loop$prop$i$177$341]};r+=C}u=Object.values(u);u.groups=v;return p?u.sort(p):u}var g=0,h=null,k=null,p=null;f.padAngle=function(m){return arguments.length?(g=Hk(0,m),f):g};f.sortGroups=function(m){return arguments.length?(h=m,f):h};f.sortSubgroups=function(m){return arguments.length?(k=m,f):k};f.sortChords=function(m){return arguments.length?(null==m?p=null:(p=Hr(m))._=m,f):p&&p._};return f}function Lh(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function Wc(){return new Lh}
function od(a){return function(){return a}}function Ir(a){return a.source}function Jr(a){return a.target}function Jk(a){return a.radius}function Kr(a){return a.startAngle}function Lr(a){return a.endAngle}function Mr(){return 0}function Nr(){return 10}function Kk(a){function b(){var F,u=f.apply(this,arguments),v=g.apply(this,arguments),z=q.apply(this,arguments)/2,C=Or.call(arguments);u=+h.apply(this,(C[0]=u,C));var r=p.apply(this,C)-Ff,t=m.apply(this,C)-Ff;v=+k.apply(this,(C[0]=v,C));var A=p.apply(this,
C)-Ff;C=m.apply(this,C)-Ff;B||(B=F=Wc());1E-12<z&&(Lk(t-r)>2*z+1E-12?t>r?(r+=z,t-=z):(r-=z,t+=z):r=t=(r+t)/2,Lk(C-A)>2*z+1E-12?C>A?(A+=z,C-=z):(A-=z,C+=z):A=C=(A+C)/2);B.moveTo(u*Nd(r),u*Od(r));B.arc(0,0,u,r,t);if(r!==A||t!==C)a?(z=+a.apply(this,arguments),z=v-z,t=(A+C)/2,B.quadraticCurveTo(0,0,z*Nd(A),z*Od(A)),B.lineTo(v*Nd(t),v*Od(t)),B.lineTo(z*Nd(C),z*Od(C))):(B.quadraticCurveTo(0,0,v*Nd(A),v*Od(A)),B.arc(0,0,v,A,C));B.quadraticCurveTo(0,0,u*Nd(r),u*Od(r));B.closePath();if(F)return B=null,F+""||
null}var f=Ir,g=Jr,h=Jk,k=Jk,p=Kr,m=Lr,q=Mr,B=null;a&&(b.headRadius=function(F){return arguments.length?(a="function"===typeof F?F:od(+F),b):a});b.radius=function(F){return arguments.length?(h=k="function"===typeof F?F:od(+F),b):h};b.sourceRadius=function(F){return arguments.length?(h="function"===typeof F?F:od(+F),b):h};b.targetRadius=function(F){return arguments.length?(k="function"===typeof F?F:od(+F),b):k};b.startAngle=function(F){return arguments.length?(p="function"===typeof F?F:od(+F),b):p};
b.endAngle=function(F){return arguments.length?(m="function"===typeof F?F:od(+F),b):m};b.padAngle=function(F){return arguments.length?(q="function"===typeof F?F:od(+F),b):q};b.source=function(F){return arguments.length?(f=F,b):f};b.target=function(F){return arguments.length?(g=F,b):g};b.context=function(F){return arguments.length?(B=null==F?null:F,b):B};return b}function Pr(a,b){return a-b}function Qr(){}function Mk(){function a(q){var B=p(q);if(Array.isArray(B))B=B.slice().sort(Pr);else{var F=ia(q),
u=F[0];F=F[1];B=sb(u,F,B);B=Zb(Math.floor(u/B)*B,Math.floor(F/B)*B,B)}return B.map(function(v){return b(q,v)})}function b(q,B){var F=[],u=[];f(q,B,function(v){m(v,q,B);for(var z=0,C=v.length,r=v[C-1][1]*v[0][0]-v[C-1][0]*v[0][1];++z<C;)r+=v[z-1][1]*v[z][0]-v[z-1][0]*v[z][1];0<r?F.push([v]):u.push(v)});u.forEach(function(v){for(var z=0,C=F.length,r;z<C;++z){a:{var t=(r=F[z])[0];for(var A=v,E=-1,H=A.length;++E<H;){b:{var M=t;for(var U=A[E],W=U[0],da=U[1],ka=-1,Y=0,Z=M.length,qa=Z-1;Y<Z;qa=Y++){var oa=
M[Y],wa=oa[0],La=oa[1],ta=M[qa];qa=ta[0];var Ia=ta[1],Ta,Q=oa;oa=ta;ta=U;if(Ta=(oa[0]-Q[0])*(ta[1]-Q[1])===(ta[0]-Q[0])*(oa[1]-Q[1]))Q=Q[Ta=+(Q[0]===oa[0])],ta=ta[Ta],oa=oa[Ta],Ta=Q<=ta&&ta<=oa||oa<=ta&&ta<=Q;if(Ta){M=0;break b}La>da!==Ia>da&&W<(qa-wa)*(da-La)/(Ia-La)+wa&&(ka=-ka)}M=ka}if(M){t=M;break a}}t=0}if(-1!==t){r.push(v);break}}});return{type:"MultiPolygon",value:B,coordinates:F}}function f(q,B,F){function u(M){var U=[M[0][0]+r,M[0][1]+C];M=[M[1][0]+r,M[1][1]+C];var W=2*U[0]+U[1]*(h+1)*4,
da=2*M[0]+M[1]*(h+1)*4,ka,Y;(ka=z[W])?(Y=v[da])?(delete z[ka.end],delete v[Y.start],ka===Y?(ka.ring.push(M),F(ka.ring)):v[ka.start]=z[Y.end]={start:ka.start,end:Y.end,ring:ka.ring.concat(Y.ring)}):(delete z[ka.end],ka.ring.push(M),z[ka.end=da]=ka):(ka=v[da])?(Y=z[W])?(delete v[ka.start],delete z[Y.end],ka===Y?(ka.ring.push(M),F(ka.ring)):v[Y.start]=z[ka.end]={start:Y.start,end:ka.end,ring:Y.ring.concat(ka.ring)}):(delete v[ka.start],ka.ring.unshift(U),v[ka.start=W]=ka):v[W]=z[da]={start:W,end:da,
ring:[U,M]}}var v=[],z=[],C;var r=C=-1;var t=q[0]>=B;for(Hc[t<<1].forEach(u);++r<h-1;){var A=t;t=q[r+1]>=B;Hc[A|t<<1].forEach(u)}for(Hc[t<<0].forEach(u);++C<k-1;){r=-1;t=q[C*h+h]>=B;var E=q[C*h]>=B;for(Hc[t<<1|E<<2].forEach(u);++r<h-1;){A=t;t=q[C*h+h+r+1]>=B;var H=E;E=q[C*h+r+1]>=B;Hc[A|t<<1|E<<2|H<<3].forEach(u)}Hc[t|E<<3].forEach(u)}r=-1;E=q[C*h]>=B;for(Hc[E<<2].forEach(u);++r<h-1;)H=E,E=q[C*h+r+1]>=B,Hc[E<<2|H<<3].forEach(u);Hc[E<<3].forEach(u)}function g(q,B,F){q.forEach(function(u){var v=u[0],
z=u[1],C=v|0,r=z|0,t=B[r*h+C];if(0<v&&v<h&&C===v){var A=B[r*h+C-1];u[0]=v+(F-A)/(t-A)-.5}0<z&&z<k&&r===z&&(A=B[(r-1)*h+C],u[1]=z+(F-A)/(t-A)-.5)})}var h=1,k=1,p=Dc,m=g;a.contour=b;a.size=function(q){if(!arguments.length)return[h,k];var B=Math.floor(q[0]),F=Math.floor(q[1]);if(!(0<=B&&0<=F))throw Error("invalid size");return h=B,k=F,a};a.thresholds=function(q){return arguments.length?(p="function"===typeof q?q:Array.isArray(q)?Xc(Nk.call(q)):Xc(q),a):p};a.smooth=function(q){return arguments.length?
(m=q?g:Qr,a):m===g};return a}function Mh(a,b,f){for(var g=a.width,h=a.height,k=(f<<1)+1,p=0;p<h;++p)for(var m=0,q=0;m<g+f;++m)m<g&&(q+=a.data[m+p*g]),m>=f&&(m>=k&&(q-=a.data[m-k+p*g]),b.data[m-f+p*g]=q/Math.min(m+1,g-1+k-m,k))}function Nh(a,b,f){for(var g=a.width,h=a.height,k=(f<<1)+1,p=0;p<g;++p)for(var m=0,q=0;m<h+f;++m)m<h&&(q+=a.data[p+m*g]),m>=f&&(m>=k&&(q-=a.data[p+(m-k)*g]),b.data[p+(m-f)*g]=q/Math.min(m+1,h-1+k-m,k))}function Rr(a){return a[0]}function Sr(a){return a[1]}function Tr(){return 1}
function Oh(a,b,f,g){a-=f;b-=g;return a*a+b*b}function Ph(a,b,f,g,h,k){g=(g-b)*(h-a);a=(f-a)*(k-b);return Math.abs(g-a)>=3.3306690738754716E-16*Math.abs(g+a)?g-a:0}function Gf(a,b,f,g,h,k){return 0>(Ph(h,k,a,b,f,g)||Ph(a,b,f,g,h,k)||Ph(f,g,h,k,a,b))}function Pd(a,b,f,g){if(20>=g-f)for(var h=f+1;h<=g;h++){for(var k=a[h],p=b[k],m=h-1;m>=f&&b[a[m]]>p;)a[m+1]=a[m--];a[m+1]=k}else{h=f+1;k=g;Be(a,f+g>>1,h);b[a[f]]>b[a[g]]&&Be(a,f,g);b[a[h]]>b[a[g]]&&Be(a,h,g);b[a[f]]>b[a[h]]&&Be(a,f,h);p=a[h];for(m=b[p];;){do h++;
while(b[a[h]]<m);do k--;while(b[a[k]]>m);if(k<h)break;Be(a,h,k)}a[f+1]=a[k];a[k]=p;g-h+1>=k-f?(Pd(a,b,h,g),Pd(a,b,f,k-1)):(Pd(a,b,f,k-1),Pd(a,b,h,g))}}function Be(a,b,f){var g=a[b];a[b]=a[f];a[f]=g}function Ur(a){return a[0]}function Vr(a){return a[1]}function Wr(a){return a[0]}function Xr(a){return a[1]}function Yr(a){var b=a.triangles;a=a.coords;for(var f=0;f<b.length;f+=3){var g=2*b[f],h=2*b[f+1],k=2*b[f+2];if(1E-10<(a[k]-a[g])*(a[h+1]-a[g+1])-(a[h]-a[g])*(a[k+1]-a[g+1]))return!1}return!0}function Zr(a,
b,f){return[a+Math.sin(a+b)*f,b+Math.cos(a-b)*f]}function Ok(a,b,f,g){var h,k,p,m;return $jscomp.generator.createGenerator(Ok,function(q){switch(q.nextAddress){case 1:h=0,k=$jscomp.makeIterator(a),p=k.next();case 2:if(p.done){q.jumpTo(0);break}m=p.value;return q.yield(b.call(g,m,h,a),5);case 5:return q.yield(f.call(g,m,h,a),6);case 6:++h,p=k.next(),q.jumpTo(2)}})}function Pk(a){return new Function("d","return {"+a.map(function(b,f){return JSON.stringify(b)+": d["+f+'] || ""'}).join(",")+"}")}function $r(a,
b){var f=Pk(a);return function(g,h){return b(f(g),h,a)}}function Qk(a){var b=Object.create(null),f=[];a.forEach(function(g){for(var h in g)h in b||f.push(b[h]=h)});return f}function $b(a,b){a+="";var f=a.length;return f<b?Array(b-f+1).join(0)+a:a}function Hf(a){function b(m,q){function B(){if(r)return Qh;if(t)return t=!1,Rk;var E,H=v,M;if(34===m.charCodeAt(H)){for(;v++<u&&34!==m.charCodeAt(v)||34===m.charCodeAt(++v););(E=v)>=u?r=!0:10===(M=m.charCodeAt(v++))?t=!0:13===M&&(t=!0,10===m.charCodeAt(v)&&
++v);return m.slice(H+1,E-1).replace(/""/g,'"')}for(;v<u;){if(10===(M=m.charCodeAt(E=v++)))t=!0;else if(13===M)t=!0,10===m.charCodeAt(v)&&++v;else if(M!==p)continue;return m.slice(H,E)}return r=!0,m.slice(H,u)}var F=[],u=m.length,v=0,z=0,C,r=0>=u,t=!1;10===m.charCodeAt(u-1)&&--u;for(13===m.charCodeAt(u-1)&&--u;(C=B())!==Qh;){for(var A=[];C!==Rk&&C!==Qh;)A.push(C),C=B();q&&null==(A=q(A,z++))||F.push(A)}return F}function f(m,q){return m.map(function(B){return q.map(function(F){return h(B[F])}).join(a)})}
function g(m){return m.map(h).join(a)}function h(m){if(null==m)m="";else{if(m instanceof Date){var q=m.getUTCHours();var B=m.getUTCMinutes(),F=m.getUTCSeconds(),u=m.getUTCMilliseconds();if(isNaN(m))m="Invalid Date";else{var v=m.getUTCFullYear();m=(0>v?"-"+$b(-v,6):9999<v?"+"+$b(v,6):$b(v,4))+"-"+$b(m.getUTCMonth()+1,2)+"-"+$b(m.getUTCDate(),2)+(u?"T"+$b(q,2)+":"+$b(B,2)+":"+$b(F,2)+"."+$b(u,3)+"Z":F?"T"+$b(q,2)+":"+$b(B,2)+":"+$b(F,2)+"Z":B||q?"T"+$b(q,2)+":"+$b(B,2)+"Z":"")}q=m}else q=k.test(m+=
"")?'"'+m.replace(/"/g,'""')+'"':m;m=q}return m}var k=new RegExp('["'+a+"\n\r]"),p=a.charCodeAt(0);return{parse:function(m,q){var B,F;m=b(m,function(u,v){if(B)return B(u,v-1);F=u;B=q?$r(u,q):Pk(u)});m.columns=F||[];return m},parseRows:b,format:function(m,q){null==q&&(q=Qk(m));return[q.map(h).join(a)].concat(f(m,q)).join("\n")},formatBody:function(m,q){null==q&&(q=Qk(m));return f(m,q).join("\n")},formatRows:function(m){return m.map(g).join("\n")},formatRow:g,formatValue:h}}function as(a){if(!a.ok)throw Error(a.status+
" "+a.statusText);return a.blob()}function bs(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.arrayBuffer()}function cs(a){if(!a.ok)throw Error(a.status+" "+a.statusText);return a.text()}function If(a,b){return fetch(a,b).then(cs)}function Sk(a){return function(b,f,g){2===arguments.length&&"function"===typeof f&&(g=f,f=void 0);return If(b,f).then(function(h){return a(h,g)})}}function ds(a){if(!a.ok)throw Error(a.status+" "+a.statusText);if(204!==a.status&&205!==a.status)return a.json()}
function Rh(a){return function(b,f){return If(b,f).then(function(g){return(new DOMParser).parseFromString(g,a)})}}function Tk(a,b,f,g){if(isNaN(b)||isNaN(f))return a;var h,k=a._root;g={data:g};var p=a._x0,m=a._y0,q=a._x1,B=a._y1,F,u,v,z;if(!k)return a._root=g,a;for(;k.length;)if((v=b>=(F=(p+q)/2))?p=F:q=F,(z=f>=(u=(m+B)/2))?m=u:B=u,h=k,!(k=k[v|=z<<1]))return h[v]=g,a;var C=+a._x.call(null,k.data);var r=+a._y.call(null,k.data);if(b===C&&f===r)return g.next=k,h?h[v]=g:a._root=g,a;do h=h?h[v]=Array(4):
a._root=Array(4),(v=b>=(F=(p+q)/2))?p=F:q=F,(z=f>=(u=(m+B)/2))?m=u:B=u;while((v|=z<<1)===(z=(r>=u)<<1|C>=F));return h[z]=k,h[v]=g,a}function Rb(a,b,f,g,h){this.node=a;this.x0=b;this.y0=f;this.x1=g;this.y1=h}function es(a){return a[0]}function fs(a){return a[1]}function Jf(a,b,f){b=new Sh(null==b?es:b,null==f?fs:f,NaN,NaN,NaN,NaN);return null==a?b:b.addAll(a)}function Sh(a,b,f,g,h,k){this._x=a;this._y=b;this._x0=f;this._y0=g;this._x1=h;this._y1=k;this._root=void 0}function Uk(a){for(var b={data:a.data},
f=b;a=a.next;)f=f.next={data:a.data};return b}function Bb(a){return function(){return a}}function gs(a){return a.x+a.vx}function hs(a){return a.y+a.vy}function is(a){return a.index}function Vk(a,b){a=a.get(b);if(!a)throw Error("node not found: "+b);return a}function ks(){var a=1;return function(){return(a=(1664525*a+1013904223)%4294967296)/4294967296}}function ls(a){return a.x}function ms(a){return a.y}function Kf(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;
var f=a.slice(0,b);return[1<f.length?f[0]+f.slice(2):f,+a.slice(b+1)]}function Qd(a){return a=Kf(Math.abs(a)),a?a[1]:NaN}function ns(a,b){return function(f,g){for(var h=f.length,k=[],p=0,m=a[0],q=0;0<h&&0<m;){q+m+1>g&&(m=Math.max(1,g-q));k.push(f.substring(h-=m,h+m));if((q+=m+1)>g)break;m=a[p=(p+1)%a.length]}return k.reverse().join(b)}}function os(a){return function(b){return b.replace(/[0-9]/g,function(f){return a[+f]})}}function Ce(a){if(!(b=ps.exec(a)))throw Error("invalid format: "+a);var b;return new Lf({fill:b[1],
align:b[2],sign:b[3],symbol:b[4],zero:b[5],width:b[6],comma:b[7],precision:b[8]&&b[8].slice(1),trim:b[9],type:b[10]})}function Lf(a){this.fill=void 0===a.fill?" ":a.fill+"";this.align=void 0===a.align?">":a.align+"";this.sign=void 0===a.sign?"-":a.sign+"";this.symbol=void 0===a.symbol?"":a.symbol+"";this.zero=!!a.zero;this.width=void 0===a.width?void 0:+a.width;this.comma=!!a.comma;this.precision=void 0===a.precision?void 0:+a.precision;this.trim=!!a.trim;this.type=void 0===a.type?"":a.type+""}function Wk(a,
b){b=Kf(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+Array(b-a.length+2).join("0")}function Xk(a){return a}function Yk(a){function b(F){function u(Z){var qa=W,oa=da,wa,La;if("c"===U)oa=ka(Z)+oa,Z="";else{Z=+Z;var ta=0>Z||0>1/Z;Z=isNaN(Z)?B:ka(Math.abs(Z),H);if(M){var Ia=Z.length,Ta=1,Q=-1;a:for(;Ta<Ia;++Ta)switch(Z[Ta]){case ".":Q=wa=Ta;break;case "0":0===Q&&(Q=Ta);wa=Ta;break;default:if(!+Z[Ta])break a;0<Q&&(Q=0)}Z=0<Q?
Z.slice(0,Q)+Z.slice(wa+1):Z}ta&&0===+Z&&"+"!==C&&(ta=!1);qa=(ta?"("===C?C:q:"-"===C||"("===C?"":C)+qa;oa=("s"===U?Zk[8+$k/3]:"")+oa+(ta&&"("===C?")":"");if(Y)for(ta=-1,wa=Z.length;++ta<wa;)if(La=Z.charCodeAt(ta),48>La||57<La){oa=(46===La?k+Z.slice(ta+1):Z.slice(ta))+oa;Z=Z.slice(0,ta);break}}E&&!t&&(Z=f(Z,Infinity));La=qa.length+Z.length+oa.length;ta=La<A?Array(A-La+1).join(v):"";E&&t&&(Z=f(ta+Z,ta.length?A-oa.length:Infinity),ta="");switch(z){case "<":Z=qa+Z+oa+ta;break;case "=":Z=qa+ta+Z+oa;break;
case "^":Z=ta.slice(0,La=ta.length>>1)+qa+Z+oa+ta.slice(La);break;default:Z=ta+qa+Z+oa}return p(Z)}F=Ce(F);var v=F.fill,z=F.align,C=F.sign,r=F.symbol,t=F.zero,A=F.width,E=F.comma,H=F.precision,M=F.trim,U=F.type;"n"===U?(E=!0,U="g"):al[U]||(void 0===H&&(H=12),M=!0,U="g");if(t||"0"===v&&"="===z)t=!0,v="0",z="=";var W="$"===r?g:"#"===r&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",da="$"===r?h:/[%p]/.test(U)?m:"",ka=al[U],Y=/[defgprs%]/.test(U);H=void 0===H?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,H)):Math.max(0,
Math.min(20,H));u.toString=function(){return F+""};return u}var f=void 0===a.grouping||void 0===a.thousands?Xk:ns(bl.call(a.grouping,Number),a.thousands+""),g=void 0===a.currency?"":a.currency[0]+"",h=void 0===a.currency?"":a.currency[1]+"",k=void 0===a.decimal?".":a.decimal+"",p=void 0===a.numerals?Xk:os(bl.call(a.numerals,String)),m=void 0===a.percent?"%":a.percent+"",q=void 0===a.minus?"\u2212":a.minus+"",B=void 0===a.nan?"NaN":a.nan+"";return{format:b,formatPrefix:function(F,u){var v=b((F=Ce(F),
F.type="f",F));F=3*Math.max(-8,Math.min(8,Math.floor(Qd(u)/3)));var z=Math.pow(10,-F),C=Zk[8+F/3];return function(r){return v(z*r)+C}}}}function cl(a){Mf=Yk(a);c.format=Mf.format;c.formatPrefix=Mf.formatPrefix;return Mf}function dl(a){return Math.max(0,-Qd(Math.abs(a)))}function el(a,b){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qd(b)/3)))-Qd(Math.abs(a)))}function fl(a,b){a=Math.abs(a);b=Math.abs(b)-a;return Math.max(0,Qd(b)-Qd(a))+1}function gl(a){return 1<a?0:-1>a?gb:Math.acos(a)}function Sb(a){return 1<
a?qb:-1>a?-qb:Math.asin(a)}function hl(a){return(a=Ra(a/2))*a}function tb(){}function Nf(a,b){if(a&&il.hasOwnProperty(a.type))il[a.type](a,b)}function Th(a,b,f){var g=-1;f=a.length-f;for(b.lineStart();++g<f;){var h=a[g];b.point(h[0],h[1],h[2])}b.lineEnd()}function jl(a,b){var f=-1,g=a.length;for(b.polygonStart();++f<g;)Th(a[f],b,1);b.polygonEnd()}function oc(a,b){if(a&&kl.hasOwnProperty(a.type))kl[a.type](a,b);else Nf(a,b)}function qs(){wc.point=rs}function ss(){ll(ml,nl)}function rs(a,b){wc.point=
ll;ml=a;nl=b;a*=Xa;b*=Xa;Uh=a;Vh=Ua(b=b/2+Of);Wh=Ra(b)}function ll(a,b){a*=Xa;b*=Xa;b=b/2+Of;var f=a-Uh,g=0<=f?1:-1,h=g*f;f=Ua(b);b=Ra(b);var k=Wh*b,p=Vh*f+k*Ua(h);g=k*g*Ra(h);Pf.add(Tb(g,p));Uh=a;Vh=f;Wh=b}function Qf(a){return[Tb(a[1],a[0]),Sb(a[2])]}function pd(a){var b=a[0];a=a[1];var f=Ua(a);return[f*Ua(b),f*Ra(b),Ra(a)]}function Rf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Rd(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Xh(a,b){a[0]+=b[0];a[1]+=
b[1];a[2]+=b[2]}function Sf(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Tf(a){var b=Gb(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Yh(a,b){Yc.push(Ic=[ub=a,wb=a]);b<ac&&(ac=b);b>cc&&(cc=b)}function pl(a,b){var f=pd([a*Xa,b*Xa]);if(Sd){var g=Rd(Sd,f);g=Rd([g[1],-g[0],0],g);Tf(g);g=Qf(g);var h=a-qd,k=0<h?1:-1,p=g[0]*nb*k;h=180<ib(h);h^(k*qd<p&&p<k*a)?(g=g[1]*nb,g>cc&&(cc=g)):(p=(p+360)%360-180,h^(k*qd<p&&p<k*a))?(g=-g[1]*nb,g<ac&&(ac=g)):(b<ac&&(ac=b),b>cc&&(cc=b));h?a<qd?dc(ub,a)>
dc(ub,wb)&&(wb=a):dc(a,wb)>dc(ub,wb)&&(ub=a):wb>=ub?(a<ub&&(ub=a),a>wb&&(wb=a)):a>qd?dc(ub,a)>dc(ub,wb)&&(wb=a):dc(a,wb)>dc(ub,wb)&&(ub=a)}else Yc.push(Ic=[ub=a,wb=a]);b<ac&&(ac=b);b>cc&&(cc=b);Sd=f;qd=a}function ql(){Jc.point=pl}function rl(){Ic[0]=ub;Ic[1]=wb;Jc.point=Yh;Sd=null}function sl(a,b){if(Sd){var f=a-qd;De.add(180<ib(f)?f+(0<f?360:-360):f)}else tl=a,ul=b;wc.point(a,b);pl(a,b)}function ts(){wc.lineStart()}function us(){sl(tl,ul);wc.lineEnd();1E-6<ib(De)&&(ub=-(wb=180));Ic[0]=ub;Ic[1]=wb;
Sd=null}function dc(a,b){return 0>(b-=a)?b+360:b}function vs(a,b){return a[0]-b[0]}function vl(a,b){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}function Zh(a,b){a*=Xa;b*=Xa;var f=Ua(b);Ee(f*Ua(a),f*Ra(a),Ra(b))}function Ee(a,b,f){++Fe;Uf+=(a-Uf)/Fe;Vf+=(b-Vf)/Fe;Wf+=(f-Wf)/Fe}function wl(){pc.point=ws}function ws(a,b){a*=Xa;b*=Xa;var f=Ua(b);Ub=f*Ua(a);Vb=f*Ra(a);Wb=Ra(b);pc.point=xs;Ee(Ub,Vb,Wb)}function xs(a,b){a*=Xa;b*=Xa;var f=Ua(b),g=f*Ua(a);a=f*Ra(a);b=Ra(b);var h=Tb(Gb((h=Vb*b-Wb*a)*
h+(h=Wb*g-Ub*b)*h+(h=Ub*a-Vb*g)*h),Ub*g+Vb*a+Wb*b);Xf+=h;Yf+=h*(Ub+(Ub=g));Zf+=h*(Vb+(Vb=a));$f+=h*(Wb+(Wb=b));Ee(Ub,Vb,Wb)}function xl(){pc.point=Zh}function ys(){pc.point=zs}function As(){yl(zl,Al);pc.point=Zh}function zs(a,b){zl=a;Al=b;a*=Xa;b*=Xa;pc.point=yl;var f=Ua(b);Ub=f*Ua(a);Vb=f*Ra(a);Wb=Ra(b);Ee(Ub,Vb,Wb)}function yl(a,b){a*=Xa;b*=Xa;var f=Ua(b),g=f*Ua(a);a=f*Ra(a);b=Ra(b);f=Vb*b-Wb*a;var h=Wb*g-Ub*b,k=Ub*a-Vb*g,p=$h(f,h,k),m=Sb(p);p=p&&-m/p;ai.add(p*f);bi.add(p*h);ci.add(p*k);Xf+=m;Yf+=
m*(Ub+(Ub=g));Zf+=m*(Vb+(Vb=a));$f+=m*(Wb+(Wb=b));Ee(Ub,Vb,Wb)}function Td(a){return function(){return a}}function di(a,b){function f(g,h){return g=a(g,h),b(g[0],g[1])}a.invert&&b.invert&&(f.invert=function(g,h){return g=b.invert(g,h),g&&a.invert(g[0],g[1])});return f}function ei(a,b){return[ib(a)>gb?a+Math.round(-a/Xb)*Xb:a,b]}function fi(a,b,f){return(a%=Xb)?b||f?di(Bl(a),Cl(b,f)):Bl(a):b||f?Cl(b,f):ei}function Dl(a){return function(b,f){return b+=a,[b>gb?b-Xb:b<-gb?b+Xb:b,f]}}function Bl(a){var b=
Dl(a);b.invert=Dl(-a);return b}function Cl(a,b){function f(m,q){var B=Ua(q),F=Ua(m)*B;m=Ra(m)*B;q=Ra(q);B=q*g+F*h;return[Tb(m*k-B*p,F*g-q*h),Sb(B*k+m*p)]}var g=Ua(a),h=Ra(a),k=Ua(b),p=Ra(b);f.invert=function(m,q){var B=Ua(q),F=Ua(m)*B;m=Ra(m)*B;q=Ra(q);B=q*k-m*p;return[Tb(m*k+q*p,F*g+B*h),Sb(B*g-F*h)]};return f}function El(a){function b(f){f=a(f[0]*Xa,f[1]*Xa);return f[0]*=nb,f[1]*=nb,f}a=fi(a[0]*Xa,a[1]*Xa,2<a.length?a[2]*Xa:0);b.invert=function(f){f=a.invert(f[0]*Xa,f[1]*Xa);return f[0]*=nb,f[1]*=
nb,f};return b}function Fl(a,b,f,g,h,k){if(f){var p=Ua(b),m=Ra(b);f*=g;if(null==h)h=b+g*Xb,k=b-f/2;else if(h=Gl(p,h),k=Gl(p,k),0<g?h<k:h>k)h+=g*Xb;for(;0<g?h>k:h<k;h-=f)b=Qf([p,-m*Ua(h),-m*Ra(h)]),a.point(b[0],b[1])}}function Gl(a,b){b=pd(b);b[0]-=a;Tf(b);a=gl(-b[1]);return((0>-b[2]?-a:a)+Xb-1E-6)%Xb}function Hl(){var a=[],b;return{point:function(f,g,h){b.push([f,g,h])},lineStart:function(){a.push(b=[])},lineEnd:tb,rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))},result:function(){var f=
a;a=[];b=null;return f}}}function ag(a,b){return 1E-6>ib(a[0]-b[0])&&1E-6>ib(a[1]-b[1])}function bg(a,b,f,g){this.x=a;this.z=b;this.o=f;this.e=g;this.v=!1;this.n=this.p=null}function Il(a,b,f,g,h){var k=[],p=[];a.forEach(function(u){if(!(0>=(v=u.length-1))){var v,z=u[0],C=u[v];if(ag(z,C)){if(!z[2]&&!C[2]){h.lineStart();for(m=0;m<v;++m)h.point((z=u[m])[0],z[1]);h.lineEnd();return}C[0]+=2E-6}k.push(v=new bg(z,u,null,!0));p.push(v.o=new bg(z,null,v,!1));k.push(v=new bg(C,u,null,!1));p.push(v.o=new bg(C,
null,v,!0))}});if(k.length){p.sort(b);Jl(k);Jl(p);var m=0;for(a=p.length;m<a;++m)p[m].e=f=!f;f=k[0];for(var q;;){for(var B=f,F=!0;B.v;)if((B=B.n)===f)return;b=B.z;h.lineStart();do{B.v=B.o.v=!0;if(B.e){if(F)for(m=0,a=b.length;m<a;++m)h.point((q=b[m])[0],q[1]);else g(B.x,B.n.x,1,h);B=B.n}else{if(F)for(b=B.p.z,m=b.length-1;0<=m;--m)h.point((q=b[m])[0],q[1]);else g(B.x,B.p.x,-1,h);B=B.p}B=B.o;b=B.z;F=!F}while(!B.v);h.lineEnd()}}}function Jl(a){if(b=a.length){for(var b,f=0,g=a[0],h;++f<b;)g.n=h=a[f],h.p=
g,g=h;g.n=h=a[0];h.p=g}}function gi(a){return ib(a[0])<=gb?a[0]:gc(a[0])*((ib(a[0])+gb)%Xb-gb)}function Kl(a,b){var f=gi(b);b=b[1];var g=Ra(b),h=[Ra(f),-Ua(f),0],k=0,p=0,m=new yb;1===g?b=qb+1E-6:-1===g&&(b=-qb-1E-6);g=0;for(var q=a.length;g<q;++g)if(F=(B=a[g]).length){var B,F,u=B[F-1],v=gi(u),z=u[1]/2+Of,C=Ra(z),r=Ua(z);for(z=0;z<F;++z,v=A,C=E,r=H,u=t){var t=B[z],A=gi(t);H=t[1]/2+Of;var E=Ra(H),H=Ua(H),M=A-v,U=0<=M?1:-1,W=U*M,da=W>gb;C*=E;m.add(Tb(C*U*Ra(W),r*H+C*Ua(W)));k+=da?M+U*Xb:M;da^v>=f^A>=
f&&(u=Rd(pd(u),pd(t)),Tf(u),v=Rd(h,u),Tf(v),v=(da^0<=M?-1:1)*Sb(v[2]),b>v||b===v&&(u[0]||u[1]))&&(p+=da^0<=M?1:-1)}}return(-1E-6>k||1E-6>k&&-1E-12>m)^p&1}function Ll(a,b,f,g){return function(h){function k(M,U){a(M,U)&&h.point(M,U)}function p(M,U){v.point(M,U)}function m(){H.point=p;v.lineStart()}function q(){H.point=k;v.lineEnd()}function B(M,U){E.push([M,U]);C.point(M,U)}function F(){C.lineStart();E=[]}function u(){B(E[0][0],E[0][1]);C.lineEnd();var M=C.clean(),U=z.result(),W=U.length,da;E.pop();
t.push(E);E=null;if(W)if(M&1){if(W=U[0],0<(U=W.length-1)){r||(h.polygonStart(),r=!0);h.lineStart();for(M=0;M<U;++M)h.point((da=W[M])[0],da[1]);h.lineEnd()}}else 1<W&&M&2&&U.push(U.pop().concat(U.shift())),A.push(U.filter(Bs))}var v=b(h),z=Hl(),C=b(z),r=!1,t,A,E,H={point:k,lineStart:m,lineEnd:q,polygonStart:function(){H.point=B;H.lineStart=F;H.lineEnd=u;A=[];t=[]},polygonEnd:function(){H.point=k;H.lineStart=m;H.lineEnd=q;A=hd(A);var M=Kl(t,g);A.length?(r||(h.polygonStart(),r=!0),Il(A,Cs,M,f,h)):M&&
(r||(h.polygonStart(),r=!0),h.lineStart(),f(null,null,1,h),h.lineEnd());r&&(h.polygonEnd(),r=!1);A=t=null},sphere:function(){h.polygonStart();h.lineStart();f(null,null,1,h);h.lineEnd();h.polygonEnd()}};return H}}function Bs(a){return 1<a.length}function Cs(a,b){return(0>(a=a.x)[0]?a[1]-qb-1E-6:qb-a[1])-(0>(b=b.x)[0]?b[1]-qb-1E-6:qb-b[1])}function Ml(a){function b(q,B){return Ua(q)*Ua(B)>h}function f(q,B,F){var u=pd(q),v=pd(B),z=[1,0,0];v=Rd(u,v);var C=Rf(v,v);u=v[0];var r=C-u*u;if(!r)return!F&&q;
C=h*C/r;r=-h*u/r;u=Rd(z,v);z=Sf(z,C);v=Sf(v,r);Xh(z,v);v=Rf(z,u);C=Rf(u,u);r=v*v-C*(Rf(z,z)-1);if(!(0>r)){var t=Gb(r);r=Sf(u,(-v-t)/C);Xh(r,z);r=Qf(r);if(!F)return r;F=q[0];var A=B[0];q=q[1];B=B[1];if(A<F){var E=F;F=A;A=E}var H=A-F,M=1E-6>ib(H-gb);!M&&B<q&&(E=q,q=B,B=E);if(M||1E-6>H?M?0<q+B^r[1]<(1E-6>ib(r[0]-F)?q:B):q<=r[1]&&r[1]<=B:H>gb^(F<=r[0]&&r[0]<=A))return B=Sf(u,(-v+t)/C),Xh(B,z),[r,Qf(B)]}}function g(q,B){var F=p?a:gb-a,u=0;q<-F?u|=1:q>F&&(u|=2);B<-F?u|=4:B>F&&(u|=8);return u}var h=Ua(a),
k=6*Xa,p=0<h,m=1E-6<ib(h);return Ll(b,function(q){var B,F,u,v,z;return{lineStart:function(){v=u=!1;z=1},point:function(C,r){var t=[C,r],A=b(C,r);r=p?A?0:g(C,r):A?g(C+(0>C?gb:-gb),r):0;!B&&(v=u=A)&&q.lineStart();A!==u&&(C=f(B,t),!C||ag(B,C)||ag(t,C))&&(t[2]=1);if(A!==u)z=0,A?(q.lineStart(),C=f(t,B),q.point(C[0],C[1])):(C=f(B,t),q.point(C[0],C[1],2),q.lineEnd()),B=C;else if(m&&B&&p^A){var E;r&F||!(E=f(t,B,!0))||(z=0,p?(q.lineStart(),q.point(E[0][0],E[0][1]),q.point(E[1][0],E[1][1]),q.lineEnd()):(q.point(E[1][0],
E[1][1]),q.lineEnd(),q.lineStart(),q.point(E[0][0],E[0][1],3)))}!A||B&&ag(B,t)||q.point(t[0],t[1]);B=t;u=A;F=r},lineEnd:function(){u&&q.lineEnd();B=null},clean:function(){return z|(v&&u)<<1}}},function(q,B,F,u){Fl(u,a,k,F,q,B)},p?[0,-a]:[-gb,a-gb])}function Ds(a,b,f,g,h,k){var p=a[0],m=a[1],q=0,B=1,F=b[0]-p,u=b[1]-m;f-=p;if(F||!(0<f)){f/=F;if(0>F){if(f<q)return;f<B&&(B=f)}else if(0<F){if(f>B)return;f>q&&(q=f)}f=h-p;if(F||!(0>f)){f/=F;if(0>F){if(f>B)return;f>q&&(q=f)}else if(0<F){if(f<q)return;f<B&&
(B=f)}f=g-m;if(u||!(0<f)){f/=u;if(0>u){if(f<q)return;f<B&&(B=f)}else if(0<u){if(f>B)return;f>q&&(q=f)}f=k-m;if(u||!(0>f)){f/=u;if(0>u){if(f>B)return;f>q&&(q=f)}else if(0<u){if(f<q)return;f<B&&(B=f)}0<q&&(a[0]=p+q*F,a[1]=m+q*u);1>B&&(b[0]=p+B*F,b[1]=m+B*u);return!0}}}}}function cg(a,b,f,g){function h(q,B,F,u){var v=0,z=0;if(null==q||(v=k(q,F))!==(z=k(B,F))||0>m(q,B)^0<F){do u.point(0===v||3===v?a:f,1<v?g:b);while((v=(v+F+4)%4)!==z)}else u.point(B[0],B[1])}function k(q,B){return 1E-6>ib(q[0]-a)?0<B?
0:3:1E-6>ib(q[0]-f)?0<B?2:1:1E-6>ib(q[1]-b)?0<B?1:0:0<B?3:2}function p(q,B){return m(q.x,B.x)}function m(q,B){var F=k(q,1),u=k(B,1);return F!==u?F-u:0===F?B[1]-q[1]:1===F?q[0]-B[0]:2===F?q[1]-B[1]:B[0]-q[0]}return function(q){function B(Y,Z){a<=Y&&Y<=f&&b<=Z&&Z<=g&&u.point(Y,Z)}function F(Y,Z){var qa=a<=Y&&Y<=f&&b<=Z&&Z<=g;C&&r.push([Y,Z]);if(W)t=Y,A=Z,E=qa,W=!1,qa&&(u.lineStart(),u.point(Y,Z));else if(qa&&U)u.point(Y,Z);else{var oa=[H=Math.max(-1E9,Math.min(1E9,H)),M=Math.max(-1E9,Math.min(1E9,M))],
wa=[Y=Math.max(-1E9,Math.min(1E9,Y)),Z=Math.max(-1E9,Math.min(1E9,Z))];Ds(oa,wa,a,b,f,g)?(U||(u.lineStart(),u.point(oa[0],oa[1])),u.point(wa[0],wa[1]),qa||u.lineEnd(),da=!1):qa&&(u.lineStart(),u.point(Y,Z),da=!1)}H=Y;M=Z;U=qa}var u=q,v=Hl(),z,C,r,t,A,E,H,M,U,W,da,ka={point:B,lineStart:function(){ka.point=F;C&&C.push(r=[]);W=!0;U=!1;H=M=NaN},lineEnd:function(){z&&(F(t,A),E&&U&&v.rejoin(),z.push(v.result()));ka.point=B;U&&u.lineEnd()},polygonStart:function(){u=v;z=[];C=[];da=!0},polygonEnd:function(){for(var Y,
Z=Y=0,qa=C.length;Z<qa;++Z){var oa=C[Z],wa=1,La=oa.length,ta=oa[0],Ia=ta[0];for(ta=ta[1];wa<La;++wa){var Ta=Ia;var Q=ta;ta=oa[wa];Ia=ta[0];ta=ta[1];Q<=g?ta>g&&(Ia-Ta)*(g-Q)>(ta-Q)*(a-Ta)&&++Y:ta<=g&&(Ia-Ta)*(g-Q)<(ta-Q)*(a-Ta)&&--Y}}Z=da&&Y;qa=(z=hd(z)).length;if(Z||qa)q.polygonStart(),Z&&(q.lineStart(),h(null,null,1,q),q.lineEnd()),qa&&Il(z,p,Y,h,q),q.polygonEnd();u=q;z=C=r=null}};return ka}}function Es(){Ud.point=Ud.lineEnd=tb}function Fs(a,b){a*=Xa;b*=Xa;hi=a;dg=Ra(b);eg=Ua(b);Ud.point=Gs}function Gs(a,
b){a*=Xa;b*=Xa;var f=Ra(b);b=Ua(b);var g=ib(a-hi),h=Ua(g);g=Ra(g);g*=b;var k=eg*f-dg*b*h;h=dg*f+eg*b*h;ii.add(Tb(Gb(g*g+k*k),h));hi=a;dg=f;eg=b}function Nl(a){ii=new yb;oc(a,Ud);return+ii}function Ge(a,b){ji[0]=a;ji[1]=b;return Nl(Hs)}function fg(a,b){return a&&Ol.hasOwnProperty(a.type)?Ol[a.type](a,b):!1}function Pl(a,b){for(var f,g,h,k=0,p=a.length;k<p;k++){g=Ge(a[k],b);if(0===g||0<k&&(h=Ge(a[k],a[k-1]),0<h&&f<=h&&g<=h&&(f+g-h)*(1-Math.pow((f-g)/h,2))<1E-12*h))return!0;f=g}return!1}function Ql(a,
b){return!!Kl(a.map(Is),Rl(b))}function Is(a){return a=a.map(Rl),a.pop(),a}function Rl(a){return[a[0]*Xa,a[1]*Xa]}function Sl(a,b,f){var g=Zb(a,b-1E-6,f).concat(b);return function(h){return g.map(function(k){return[h,k]})}}function Tl(a,b,f){var g=Zb(a,b-1E-6,f).concat(b);return function(h){return g.map(function(k){return[k,h]})}}function Ul(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return Zb(gg(k/v)*v,h,v).map(t).concat(Zb(gg(B/z)*z,q,z).map(A)).concat(Zb(gg(g/F)*
F,f,F).filter(function(H){return 1E-6<ib(H%v)}).map(C)).concat(Zb(gg(m/u)*u,p,u).filter(function(H){return 1E-6<ib(H%z)}).map(r))}var f,g,h,k,p,m,q,B,F=10,u=F,v=90,z=360,C,r,t,A,E=2.5;a.lines=function(){return b().map(function(H){return{type:"LineString",coordinates:H}})};a.outline=function(){return{type:"Polygon",coordinates:[t(k).concat(A(q).slice(1),t(h).reverse().slice(1),A(B).reverse().slice(1))]}};a.extent=function(H){return arguments.length?a.extentMajor(H).extentMinor(H):a.extentMinor()};
a.extentMajor=function(H){if(!arguments.length)return[[k,B],[h,q]];k=+H[0][0];h=+H[1][0];B=+H[0][1];q=+H[1][1];k>h&&(H=k,k=h,h=H);B>q&&(H=B,B=q,q=H);return a.precision(E)};a.extentMinor=function(H){if(!arguments.length)return[[g,m],[f,p]];g=+H[0][0];f=+H[1][0];m=+H[0][1];p=+H[1][1];g>f&&(H=g,g=f,f=H);m>p&&(H=m,m=p,p=H);return a.precision(E)};a.step=function(H){return arguments.length?a.stepMajor(H).stepMinor(H):a.stepMinor()};a.stepMajor=function(H){if(!arguments.length)return[v,z];v=+H[0];z=+H[1];
return a};a.stepMinor=function(H){if(!arguments.length)return[F,u];F=+H[0];u=+H[1];return a};a.precision=function(H){if(!arguments.length)return E;E=+H;C=Sl(m,p,90);r=Tl(g,f,E);t=Sl(B,q,90);A=Tl(k,h,E);return a};return a.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Js(){Kc.point=Ks}function Ks(a,b){Kc.point=Vl;Wl=ki=a;Xl=li=b}function Vl(a,b){mi.add(li*a-ki*b);ki=a;li=b}function Ls(){Vl(Wl,Xl)}function rd(a,b){ni+=a;oi+=b;++He}function Yl(){hc.point=
Ms}function Ms(a,b){hc.point=Ns;rd(xc=a,yc=b)}function Ns(a,b){var f=a-xc,g=b-yc;f=Gb(f*f+g*g);hg+=f*(xc+a)/2;ig+=f*(yc+b)/2;Vd+=f;rd(xc=a,yc=b)}function Zl(){hc.point=rd}function Os(){hc.point=Ps}function Qs(){$l(am,bm)}function Ps(a,b){hc.point=$l;rd(am=xc=a,bm=yc=b)}function $l(a,b){var f=a-xc,g=b-yc;f=Gb(f*f+g*g);hg+=f*(xc+a)/2;ig+=f*(yc+b)/2;Vd+=f;f=yc*a-xc*b;pi+=f*(xc+a);qi+=f*(yc+b);Ie+=3*f;rd(xc=a,yc=b)}function cm(a){this._context=a}function Rs(a,b){Je.point=dm;em=Ke=a;fm=Le=b}function dm(a,
b){Ke-=a;Le-=b;ri.add(Gb(Ke*Ke+Le*Le));Ke=a;Le=b}function gm(){this._string=[]}function hm(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Me(a){return function(b){var f=new si,g;for(g in a)f[g]=a[g];f.stream=b;return f}}function si(){}function ti(a,b,f){var g=a.clipExtent&&a.clipExtent();a.scale(150).translate([0,0]);null!=g&&a.clipExtent(null);oc(f,a.stream(jg));b(jg.result());null!=g&&a.clipExtent(g);return a}function Wd(a,b,f){return ti(a,function(g){var h=
b[1][0]-b[0][0],k=b[1][1]-b[0][1],p=Math.min(h/(g[1][0]-g[0][0]),k/(g[1][1]-g[0][1]));h=+b[0][0]+(h-p*(g[1][0]+g[0][0]))/2;g=+b[0][1]+(k-p*(g[1][1]+g[0][1]))/2;a.scale(150*p).translate([h,g])},f)}function ui(a,b,f){return ti(a,function(g){var h=+b,k=h/(g[1][0]-g[0][0]);h=(h-k*(g[1][0]+g[0][0]))/2;g=-k*g[0][1];a.scale(150*k).translate([h,g])},f)}function vi(a,b,f){return ti(a,function(g){var h=+b,k=h/(g[1][1]-g[0][1]),p=-k*g[0][0];g=(h-k*(g[1][1]+g[0][1]))/2;a.scale(150*k).translate([p,g])},f)}function im(a){return Me({point:function(b,
f){b=a(b,f);this.stream.point(b[0],b[1])}})}function jm(a,b){function f(g,h,k,p,m,q,B,F,u,v,z,C,r,t){var A=B-g,E=F-h,H=A*A+E*E;if(H>4*b&&r--){var M=p+v,U=m+z,W=q+C,da=Gb(M*M+U*U+W*W),ka=Sb(W/=da),Y=1E-6>ib(ib(W)-1)||1E-6>ib(k-u)?(k+u)/2:Tb(U,M),Z=a(Y,ka);ka=Z[0];Z=Z[1];var qa=ka-g,oa=Z-h,wa=E*qa-A*oa;if(wa*wa/H>b||.3<ib((A*qa+E*oa)/H-.5)||p*v+m*z+q*C<Ss)f(g,h,k,p,m,q,ka,Z,Y,M/=da,U/=da,W,r,t),t.point(ka,Z),f(ka,Z,Y,M,U,W,B,F,u,v,z,C,r,t)}}return function(g){function h(ka,Y){ka=a(ka,Y);g.point(ka[0],
ka[1])}function k(){E=NaN;da.point=p;g.lineStart()}function p(ka,Y){var Z=pd([ka,Y]);Y=a(ka,Y);f(E,H,A,M,U,W,E=Y[0],H=Y[1],A=ka,M=Z[0],U=Z[1],W=Z[2],16,g);g.point(E,H)}function m(){da.point=h;g.lineEnd()}function q(){k();da.point=B;da.lineEnd=F}function B(ka,Y){p(u=ka,Y);v=E;z=H;C=M;r=U;t=W;da.point=p}function F(){f(E,H,A,M,U,W,v,z,u,C,r,t,16,g);da.lineEnd=m;m()}var u,v,z,C,r,t,A,E,H,M,U,W,da={point:h,lineStart:k,lineEnd:m,polygonStart:function(){g.polygonStart();da.lineStart=q},polygonEnd:function(){g.polygonEnd();
da.lineStart=k}};return da}}function Ts(a){return Me({point:function(b,f){b=a(b,f);return this.stream.point(b[0],b[1])}})}function Us(a,b,f,g,h){function k(p,m){p*=g;m*=h;return[b+a*p,f-a*m]}k.invert=function(p,m){return[(p-b)/a*g,(f-m)/a*h]};return k}function km(a,b,f,g,h,k){function p(C,r){C*=g;r*=h;return[q*C-B*r+b,f-B*C-q*r]}if(!k)return Us(a,b,f,g,h);var m=Ua(k);k=Ra(k);var q=m*a,B=k*a,F=m/a,u=k/a,v=(k*f-m*b)/a,z=(k*b+m*f)/a;p.invert=function(C,r){return[g*(F*C-u*r+v),h*(z-u*C-F*r)]};return p}
function zc(a){return wi(function(){return a})()}function wi(a){function b(ta){return oa(ta[0]*Xa,ta[1]*Xa)}function f(ta){return(ta=oa.invert(ta[0],ta[1]))&&[ta[0]*nb,ta[1]*nb]}function g(){var ta=km(p,0,0,t,A,r).apply(null,k(B,F));ta=km(p,m-ta[0],q-ta[1],t,A,r);C=fi(u,v,z);qa=di(k,ta);oa=di(C,qa);ta=qa;Z=+Y?jm(ta,Y):im(ta);return h()}function h(){wa=La=null;return b}var k,p=150,m=480,q=250,B=0,F=0,u=0,v=0,z=0,C,r=0,t=1,A=1,E=null,H=xi,M=null,U,W,da,ka=Ne,Y=.5,Z,qa,oa,wa,La;b.stream=function(ta){return wa&&
La===ta?wa:wa=Vs(Ts(C)(H(Z(ka(La=ta)))))};b.preclip=function(ta){return arguments.length?(H=ta,E=void 0,h()):H};b.postclip=function(ta){return arguments.length?(ka=ta,M=U=W=da=null,h()):ka};b.clipAngle=function(ta){return arguments.length?(H=+ta?Ml(E=ta*Xa):(E=null,xi),h()):E*nb};b.clipExtent=function(ta){return arguments.length?(ka=null==ta?(M=U=W=da=null,Ne):cg(M=+ta[0][0],U=+ta[0][1],W=+ta[1][0],da=+ta[1][1]),h()):null==M?null:[[M,U],[W,da]]};b.scale=function(ta){return arguments.length?(p=+ta,
g()):p};b.translate=function(ta){return arguments.length?(m=+ta[0],q=+ta[1],g()):[m,q]};b.center=function(ta){return arguments.length?(B=ta[0]%360*Xa,F=ta[1]%360*Xa,g()):[B*nb,F*nb]};b.rotate=function(ta){return arguments.length?(u=ta[0]%360*Xa,v=ta[1]%360*Xa,z=2<ta.length?ta[2]%360*Xa:0,g()):[u*nb,v*nb,z*nb]};b.angle=function(ta){return arguments.length?(r=ta%360*Xa,g()):r*nb};b.reflectX=function(ta){return arguments.length?(t=ta?-1:1,g()):0>t};b.reflectY=function(ta){return arguments.length?(A=
ta?-1:1,g()):0>A};b.precision=function(ta){if(arguments.length){var Ia=qa;var Ta=Y=ta*ta;Ia=(Z=+Ta?jm(Ia,Ta):im(Ia),h())}else Ia=Gb(Y);return Ia};b.fitExtent=function(ta,Ia){return Wd(b,ta,Ia)};b.fitSize=function(ta,Ia){return Wd(b,[[0,0],ta],Ia)};b.fitWidth=function(ta,Ia){return ui(b,ta,Ia)};b.fitHeight=function(ta,Ia){return vi(b,ta,Ia)};return function(){k=a.apply(this,arguments);b.invert=k.invert&&f;return g()}}function yi(a){var b=0,f=gb/3,g=wi(a);a=g(b,f);a.parallels=function(h){return arguments.length?
g(b=h[0]*Xa,f=h[1]*Xa):[b*nb,f*nb]};return a}function Ws(a){function b(g,h){return[g*f,Ra(h)/f]}var f=Ua(a);b.invert=function(g,h){return[g/f,Sb(h*f)]};return b}function lm(a,b){function f(m,q){q=Gb(k-2*h*Ra(q))/h;return[q*Ra(m*=h),p-q*Ua(m)]}var g=Ra(a),h=(g+Ra(b))/2;if(1E-6>ib(h))return Ws(a);var k=1+g*(2*h-g),p=Gb(k)/h;f.invert=function(m,q){q=p-q;var B=Tb(m,ib(q))*gc(q);0>q*h&&(B-=gb*gc(m)*gc(q));return[B/h,Sb((k-(m*m+q*q)*h*h)/(2*h))]};return f}function kg(){return yi(lm).scale(155.424).center([0,
33.6442])}function mm(){return kg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Xs(a){var b=a.length;return{point:function(f,g){for(var h=-1;++h<b;)a[h].point(f,g)},sphere:function(){for(var f=-1;++f<b;)a[f].sphere()},lineStart:function(){for(var f=-1;++f<b;)a[f].lineStart()},lineEnd:function(){for(var f=-1;++f<b;)a[f].lineEnd()},polygonStart:function(){for(var f=-1;++f<b;)a[f].polygonStart()},polygonEnd:function(){for(var f=-1;++f<b;)a[f].polygonEnd()}}}
function nm(a){return function(b,f){var g=Ua(b),h=Ua(f);g=a(g*h);return Infinity===g?[2,0]:[g*h*Ra(b),g*Ra(f)]}}function Oe(a){return function(b,f){var g=Gb(b*b+f*f),h=a(g),k=Ra(h);h=Ua(h);return[Tb(b*k,g*h),Sb(g&&f*k/g)]}}function Pe(a,b){return[a,lg(Xd((qb+b)/2))]}function om(a){function b(){var u=gb*h(),v=f(El(f.rotate()).invert([0,0]));return p(null==m?[[v[0]-u,v[1]-u],[v[0]+u,v[1]+u]]:a===Pe?[[Math.max(v[0]-u,m),q],[Math.min(v[0]+u,B),F]]:[[m,Math.max(v[1]-u,q)],[B,Math.min(v[1]+u,F)]])}var f=
zc(a),g=f.center,h=f.scale,k=f.translate,p=f.clipExtent,m=null,q,B,F;f.scale=function(u){return arguments.length?(h(u),b()):h()};f.translate=function(u){return arguments.length?(k(u),b()):k()};f.center=function(u){return arguments.length?(g(u),b()):g()};f.clipExtent=function(u){return arguments.length?(null==u?m=q=B=F=null:(m=+u[0][0],q=+u[0][1],B=+u[1][0],F=+u[1][1]),b()):null==m?null:[[m,q],[B,F]]};return b()}function pm(a,b){function f(p,m){0<k?m<-qb+1E-6&&(m=-qb+1E-6):m>qb-1E-6&&(m=qb-1E-6);m=
k/zi(Xd((qb+m)/2),h);return[m*Ra(h*p),k-m*Ua(h*p)]}var g=Ua(a),h=a===b?Ra(a):lg(g/Ua(b))/lg(Xd((qb+b)/2)/Xd((qb+a)/2)),k=g*zi(Xd((qb+a)/2),h)/h;if(!h)return Pe;f.invert=function(p,m){m=k-m;var q=gc(h)*Gb(p*p+m*m),B=Tb(p,ib(m))*gc(m);0>m*h&&(B-=gb*gc(p)*gc(m));return[B/h,2*Yd(zi(k/q,1/h))-qb]};return f}function Qe(a,b){return[a,b]}function qm(a,b){function f(p,m){m=k-m;p*=h;return[m*Ra(p),k-m*Ua(p)]}var g=Ua(a),h=a===b?Ra(a):(g-Ua(b))/(b-a),k=g/h+a;if(1E-6>ib(h))return Qe;f.invert=function(p,m){m=
k-m;var q=Tb(p,ib(m))*gc(m);0>m*h&&(q-=gb*gc(p)*gc(m));return[q/h,k-gc(h)*Gb(p*p+m*m)]};return f}function Ai(a,b){b=Sb(mg*Ra(b));var f=b*b,g=f*f*f;return[a*Ua(b)/(mg*(1.340264+3*-.081106*f+g*(7*8.93E-4+.034164*f))),b*(1.340264+-.081106*f+g*(8.93E-4+.003796*f))]}function Bi(a,b){var f=Ua(b),g=Ua(a)*f;return[f*Ra(a)/g,Ra(b)/g]}function Ci(a,b){var f=b*b,g=f*f;return[a*(.8707-.131979*f+g*(-.013791+g*(.003971*f-.001529*g))),b*(1.007226+f*(.015085+g*(-.044475+.028874*f-.005916*g)))]}function Di(a,b){return[Ua(b)*
Ra(a),Ra(b)]}function Ei(a,b){var f=Ua(b),g=1+Ua(a)*f;return[f*Ra(a)/g,Ra(b)/g]}function Fi(a,b){return[lg(Xd((qb+b)/2)),-a]}function Ys(a,b){return a.parent===b.parent?1:2}function Zs(a,b){return a+b.x}function $s(a,b){return Math.max(a,b.y)}function at(a){for(var b;b=a.children;)a=b[0];return a}function bt(a){for(var b;b=a.children;)a=b[b.length-1];return a}function ct(a){var b=0,f=a.children,g=f&&f.length;if(g)for(;0<=--g;)b+=f[g].value;else b=1;a.value=b}function rm(){var a=this,b,f,g,h,k,p;return $jscomp.generator.createGenerator(rm,
function(m){switch(m.nextAddress){case 1:b=a,g=[b];case 2:f=g.reverse(),g=[];case 5:if(!(b=f.pop())){m.jumpTo(4);break}return m.yield(b,7);case 7:if(h=b.children)for(k=0,p=h.length;k<p;++k)g.push(h[k]);m.jumpTo(5);break;case 4:g.length?m.jumpTo(2):m.jumpToEnd()}})}function Gi(a,b){a instanceof Map?(a=[void 0,a],void 0===b&&(b=dt)):void 0===b&&(b=et);a=new Zd(a);for(var f,g=[a],h,k,p,m;f=g.pop();)if((k=b(f.data))&&(m=(k=Array.from(k)).length))for(f.children=k,p=m-1;0<=p;--p)g.push(h=k[p]=new Zd(k[p])),
h.parent=f,h.depth=f.depth+1;return a.eachBefore(sm)}function et(a){return a.children}function dt(a){return Array.isArray(a)?a[1]:null}function ft(a){void 0!==a.data.value&&(a.value=a.data.value);a.data=a.data.data}function sm(a){var b=0;do a.height=b;while((a=a.parent)&&a.height<++b)}function Zd(a){this.data=a;this.depth=this.height=0;this.parent=null}function tm(a){var b=0;a=Array.from(a);for(var f=a.length,g,h;f;)h=Math.random()*f--|0,g=a[f],a[f]=a[h],a[h]=g;f=a.length;g=[];for(var k;b<f;)if(h=
a[b],k&&um(k,h))++b;else{a:if(b=g,Hi(h,b))b=[h];else{for(g=0;g<b.length;++g)if(ng(h,b[g])&&Hi(Re(b[g],h),b)){b=[b[g],h];break a}for(g=0;g<b.length-1;++g)for(k=g+1;k<b.length;++k)if(ng(Re(b[g],b[k]),h)&&ng(Re(b[g],h),b[k])&&ng(Re(b[k],h),b[g])&&Hi(vm(b[g],b[k],h),b)){b=[b[g],b[k],h];break a}throw Error();}a:{b=g=b;switch(b.length){case 1:b=b[0];b={x:b.x,y:b.y,r:b.r};break a;case 2:b=Re(b[0],b[1]);break a;case 3:b=vm(b[0],b[1],b[2]);break a}b=void 0}k=b;b=0}return k}function ng(a,b){var f=a.r-b.r,g=
b.x-a.x;a=b.y-a.y;return 0>f||f*f<g*g+a*a}function um(a,b){var f=a.r-b.r+1E-9*Math.max(a.r,b.r,1),g=b.x-a.x;a=b.y-a.y;return 0<f&&f*f>g*g+a*a}function Hi(a,b){for(var f=0;f<b.length;++f)if(!um(a,b[f]))return!1;return!0}function Re(a,b){var f=a.x,g=a.y;a=a.r;var h=b.x,k=b.y;b=b.r;var p=h-f,m=k-g,q=b-a,B=Math.sqrt(p*p+m*m);return{x:(f+h+p/B*q)/2,y:(g+k+m/B*q)/2,r:(B+a+b)/2}}function vm(a,b,f){var g=a.x,h=a.y;a=a.r;var k=b.x,p=b.y,m=b.r,q=f.x,B=f.y,F=f.r;f=g-k;b=g-q;var u=h-p,v=h-B,z=m-a,C=F-a,r=g*g+
h*h-a*a;p=r-k*k-p*p+m*m;B=r-q*q-B*B+F*F;q=b*u-f*v;k=(u*B-v*p)/(2*q)-g;u=(v*z-u*C)/q;v=(b*p-f*B)/(2*q)-h;f=(f*C-b*z)/q;b=u*u+f*f-1;z=2*(a+k*u+v*f);a=k*k+v*v-a*a;a=-(b?(z+Math.sqrt(z*z-4*b*a))/(2*b):a/z);return{x:g+k+u*a,y:h+v+f*a,r:a}}function wm(a,b,f){var g=a.x-b.x,h=a.y-b.y,k=g*g+h*h;if(k){var p=b.r+f.r;p*=p;var m=a.r+f.r;m*=m;if(p>m){var q=(k+m-p)/(2*k);p=Math.sqrt(Math.max(0,m/k-q*q));f.x=a.x-q*g-p*h;f.y=a.y-q*h+p*g}else q=(k+p-m)/(2*k),p=Math.sqrt(Math.max(0,p/k-q*q)),f.x=b.x+q*g-p*h,f.y=b.y+
q*h+p*g}else f.x=b.x+f.r,f.y=b.y}function xm(a,b){var f=a.r+b.r-1E-6,g=b.x-a.x;a=b.y-a.y;return 0<f&&f*f>g*g+a*a}function ym(a){var b=a._,f=a.next._,g=b.r+f.r;a=(b.x*f.r+f.x*b.r)/g;b=(b.y*f.r+f.y*b.r)/g;return a*a+b*b}function og(a){this._=a;this.previous=this.next=null}function zm(a){if(!(f=(a="object"===typeof a&&"length"in a?a:Array.from(a)).length))return 0;var b,f;var g=a[0];g.x=0;g.y=0;if(!(1<f))return g.r;var h=a[1];g.x=-h.r;h.x=g.r;h.y=0;if(!(2<f))return g.r+h.r;wm(h,g,b=a[2]);g=new og(g);
h=new og(h);b=new og(b);g.next=b.previous=h;h.next=g.previous=b;b.next=h.previous=g;var k=3;a:for(;k<f;++k){wm(g._,h._,b=a[k]);b=new og(b);var p=h.next;var m=g.previous;var q=h._.r;var B=g._.r;do if(q<=B){if(xm(p._,b._)){h=p;g.next=h;h.previous=g;--k;continue a}q+=p._.r;p=p.next}else{if(xm(m._,b._)){g=m;g.next=h;h.previous=g;--k;continue a}B+=m._.r;m=m.previous}while(p!==m.next);b.previous=g;b.next=h;g.next=h.previous=h=b;for(p=ym(g);(b=b.next)!==h;)(m=ym(b))<p&&(g=b,p=m);h=g.next}g=[h._];for(b=h;(b=
b.next)!==h;)g.push(b._);b=tm(g);for(k=0;k<f;++k)g=a[k],g.x-=b.x,g.y-=b.y;return b.r}function pg(a){if("function"!==typeof a)throw Error();return a}function sd(){return 0}function $d(a){return function(){return a}}function gt(a){return Math.sqrt(a.value)}function Am(a){return function(b){b.children||(b.r=Math.max(0,+a(b)||0))}}function Ii(a,b){return function(f){if(g=f.children){var g,h,k=g.length,p=a(f)*b||0;if(p)for(h=0;h<k;++h)g[h].r+=p;var m=zm(g);if(p)for(h=0;h<k;++h)g[h].r-=p;f.r=m+p}}}function Bm(a){return function(b){var f=
b.parent;b.r*=a;f&&(b.x=f.x+a*b.x,b.y=f.y+a*b.y)}}function Cm(a){a.x0=Math.round(a.x0);a.y0=Math.round(a.y0);a.x1=Math.round(a.x1);a.y1=Math.round(a.y1)}function Se(a,b,f,g,h){var k=a.children,p=-1,m=k.length;for(g=a.value&&(g-b)/a.value;++p<m;)a=k[p],a.y0=f,a.y1=h,a.x0=b,a.x1=b+=a.value*g}function ht(a){return a.id}function it(a){return a.parentId}function jt(a,b){return a.parent===b.parent?1:2}function Ji(a){var b=a.children;return b?b[0]:a.t}function Ki(a){var b=a.children;return b?b[b.length-
1]:a.t}function qg(a,b){this._=a;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=b}function kt(a){a=new qg(a,0);for(var b,f=[a],g,h,k;b=f.pop();)if(h=b._.children)for(b.children=Array(g=h.length),k=g-1;0<=k;--k)f.push(g=b.children[k]=new qg(h[k],k)),g.parent=b;(a.parent=new qg(null,0)).children=[a];return a}function rg(a,b,f,g,h){var k=a.children,p=-1,m=k.length;for(h=a.value&&(h-f)/a.value;++p<m;)a=k[p],a.x0=b,a.x1=g,a.y0=f,a.y1=f+=a.value*h}function Dm(a,
b,f,g,h,k){for(var p=[],m=b.children,q,B,F=q=0,u=m.length,v,z=b.value,C,r,t,A,E,H;q<u;){b=h-f;v=k-g;do C=m[F++].value;while(!C&&F<u);r=t=C;H=Math.max(v/b,b/v)/(z*a);A=C*C*H;for(E=Math.max(t/A,A/r);F<u;++F){C+=B=m[F].value;B<r&&(r=B);B>t&&(t=B);A=C*C*H;A=Math.max(t/A,A/r);if(A>E){C-=B;break}E=A}p.push(q={value:C,dice:b<v,children:m.slice(q,F)});q.dice?Se(q,f,g,h,z?g+=v*C/z:k):rg(q,f,g,z?f+=b*C/z:h,k);z-=C;q=F}return p}function lt(a,b,f){return(b[0]-a[0])*(f[1]-a[1])-(b[1]-a[1])*(f[0]-a[0])}function mt(a,
b){return a[0]-b[0]||a[1]-b[1]}function Em(a){var b=a.length,f=[0,1],g=2,h;for(h=2;h<b;++h){for(;1<g&&0>=lt(a[f[g-2]],a[f[g-1]],a[h]);)--g;f[g++]=h}return f.slice(0,g)}function ic(a,b){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(b).domain(a)}return this}function Lc(a,b){switch(arguments.length){case 0:break;case 1:"function"===typeof a?this.interpolator(a):this.range(a);break;default:this.domain(a),"function"===typeof b?this.interpolator(b):this.range(b)}return this}
function Li(){function a(k){var p=k+"",m=b.get(p);if(!m){if(h!==Mi)return h;b.set(p,m=f.push(k))}return g[(m-1)%g.length]}var b=new Map,f=[],g=[],h=Mi;a.domain=function(k){if(!arguments.length)return f.slice();f=[];b=new Map;for(var p=$jscomp.makeIterator(k),m=p.next();!m.done;m=p.next()){m=m.value;var q=m+"";b.has(q)||b.set(q,f.push(m))}return a};a.range=function(k){return arguments.length?(g=Array.from(k),a):g.slice()};a.unknown=function(k){return arguments.length?(h=k,a):h};a.copy=function(){return Li(f,
g).unknown(h)};ic.apply(a,arguments);return a}function Ni(){function a(){var v=f().length,z=k<h,C=z?k:h,r=z?h:k;p=(r-C)/Math.max(1,v-B+2*F);q&&(p=Math.floor(p));C+=(r-C-p*(v-B))*u;m=p*(1-B);q&&(C=Math.round(C),m=Math.round(m));v=Zb(v).map(function(t){return C+p*t});return g(z?v.reverse():v)}var b=Li().unknown(void 0),f=b.domain,g=b.range,h=0,k=1,p,m,q=!1,B=0,F=0,u=.5;delete b.unknown;b.domain=function(v){return arguments.length?(f(v),a()):f()};b.range=function(v){if(arguments.length){var z=$jscomp.makeIterator(v);
h=z.next().value;k=z.next().value;z=(h=+h,k=+k,a())}else z=[h,k];return z};b.rangeRound=function(v){v=$jscomp.makeIterator(v);h=v.next().value;k=v.next().value;return h=+h,k=+k,q=!0,a()};b.bandwidth=function(){return m};b.step=function(){return p};b.round=function(v){return arguments.length?(q=!!v,a()):q};b.padding=function(v){return arguments.length?(B=Math.min(1,F=+v),a()):B};b.paddingInner=function(v){return arguments.length?(B=Math.min(1,v),a()):B};b.paddingOuter=function(v){return arguments.length?
(F=+v,a()):F};b.align=function(v){return arguments.length?(u=Math.max(0,Math.min(1,v)),a()):u};b.copy=function(){return Ni(f(),[h,k]).round(q).paddingInner(B).paddingOuter(F).align(u)};return ic.apply(a(),arguments)}function Fm(a){var b=a.copy;a.padding=a.paddingOuter;delete a.paddingInner;delete a.paddingOuter;a.copy=function(){return Fm(b())};return a}function nt(a){return function(){return a}}function sg(a){return+a}function Cb(a){return a}function Oi(a,b){return(b-=a=+a)?function(f){return(f-
a)/b}:nt(isNaN(b)?NaN:.5)}function ot(a,b){if(a>b){var f=a;a=b;b=f}return function(g){return Math.max(a,Math.min(b,g))}}function pt(a,b,f){var g=a[0];a=a[1];var h=b[0];b=b[1];a<g?(g=Oi(a,g),h=f(b,h)):(g=Oi(g,a),h=f(h,b));return function(k){return h(g(k))}}function qt(a,b,f){var g=Math.min(a.length,b.length)-1,h=Array(g),k=Array(g),p=-1;a[g]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++p<g;)h[p]=Oi(a[p],a[p+1]),k[p]=f(b[p],b[p+1]);return function(m){var q=Qc(a,m,1,g)-1;return k[q](h[q](m))}}
function Te(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function ae(){function a(){var v=Math.min(f.length,g.length);q!==Cb&&(q=ot(f[0],f[v-1]));B=2<v?qt:pt;F=u=null;return b}function b(v){return null==v||isNaN(v=+v)?m:(F||(F=B(f.map(k),g,h)))(k(q(v)))}var f=Gm,g=Gm,h=Uc,k,p,m,q=Cb,B,F,u;b.invert=function(v){return q(p((u||(u=B(g,f.map(k),fc)))(v)))};b.domain=function(v){return arguments.length?(f=Array.from(v,sg),a()):f.slice()};
b.range=function(v){return arguments.length?(g=Array.from(v),a()):g.slice()};b.rangeRound=function(v){return g=Array.from(v),h=wf,a()};b.clamp=function(v){return arguments.length?(q=v?!0:Cb,a()):q!==Cb};b.interpolate=function(v){return arguments.length?(h=v,a()):h};b.unknown=function(v){return arguments.length?(m=v,b):m};return function(v,z){k=v;p=z;return a()}}function Hm(a,b,f,g){f=sb(a,b,f);var h;g=Ce(null==g?",f":g);switch(g.type){case "s":return a=Math.max(Math.abs(a),Math.abs(b)),null!=g.precision||
isNaN(h=el(f,a))||(g.precision=h),c.formatPrefix(g,a);case "":case "e":case "g":case "p":case "r":null!=g.precision||isNaN(h=fl(f,Math.max(Math.abs(a),Math.abs(b))))||(g.precision=h-("e"===g.type));break;case "f":case "%":null!=g.precision||isNaN(h=dl(f))||(g.precision=h-2*("%"===g.type))}return c.format(g)}function Zc(a){var b=a.domain;a.ticks=function(f){var g=b();return Eb(g[0],g[g.length-1],null==f?10:f)};a.tickFormat=function(f,g){var h=b();return Hm(h[0],h[h.length-1],null==f?10:f,g)};a.nice=
function(f){null==f&&(f=10);var g=b(),h=0,k=g.length-1,p=g[h],m=g[k],q=10;if(m<p){var B=p;p=m;m=B;B=h;h=k;k=B}for(;0<q--;){B=vb(p,m,f);if(B===F)return g[h]=p,g[k]=m,b(g);if(0<B)p=Math.floor(p/B)*B,m=Math.ceil(m/B)*B;else if(0>B)p=Math.ceil(p*B)/B,m=Math.floor(m*B)/B;else break;var F=B}return a};return a}function Im(){var a=ae()(Cb,Cb);a.copy=function(){return Te(a,Im())};ic.apply(a,arguments);return Zc(a)}function Jm(a){function b(g){return null==g||isNaN(g=+g)?f:g}var f;b.invert=b;b.domain=b.range=
function(g){return arguments.length?(a=Array.from(g,sg),b):a.slice()};b.unknown=function(g){return arguments.length?(f=g,b):f};b.copy=function(){return Jm(a).unknown(f)};a=arguments.length?Array.from(a,sg):[0,1];return Zc(b)}function Km(a,b){a=a.slice();var f=0,g=a.length-1,h=a[f],k=a[g];if(k<h){var p=f;f=g;g=p;p=h;h=k;k=p}a[f]=b.floor(h);a[g]=b.ceil(k);return a}function Lm(a){return Math.log(a)}function Mm(a){return Math.exp(a)}function rt(a){return-Math.log(-a)}function st(a){return-Math.exp(-a)}
function tt(a){return isFinite(a)?+("1e"+a):0>a?0:a}function ut(a){return 10===a?tt:a===Math.E?Math.exp:function(b){return Math.pow(a,b)}}function vt(a){return a===Math.E?Math.log:10===a&&Math.log10||2===a&&Math.log2||(a=Math.log(a),function(b){return Math.log(b)/a})}function Nm(a){return function(b){return-a(-b)}}function Pi(a){function b(){k=vt(h);p=ut(h);0>g()[0]?(k=Nm(k),p=Nm(p),a(rt,st)):a(Lm,Mm);return f}var f=a(Lm,Mm),g=f.domain,h=10,k,p;f.base=function(m){return arguments.length?(h=+m,b()):
h};f.domain=function(m){return arguments.length?(g(m),b()):g()};f.ticks=function(m){var q=g(),B=q[0];q=q[q.length-1];var F;if(F=q<B)u=B,B=q,q=u;var u=k(B),v=k(q),z=null==m?10:+m,C=[];if(!(h%1)&&v-u<z){u=Math.floor(u);v=Math.ceil(v);if(0<B)for(;u<=v;++u){var r=1;for(m=p(u);r<h;++r){var t=m*r;if(!(t<B)){if(t>q)break;C.push(t)}}}else for(;u<=v;++u)for(r=h-1,m=p(u);1<=r;--r)if(t=m*r,!(t<B)){if(t>q)break;C.push(t)}2*C.length<z&&(C=Eb(B,q,z))}else C=Eb(u,v,Math.min(v-u,z)).map(p);return F?C.reverse():C};
f.tickFormat=function(m,q){null==q&&(q=10===h?".0e":",");"function"!==typeof q&&(q=c.format(q));if(Infinity===m)return q;null==m&&(m=10);var B=Math.max(1,h*m/f.ticks().length);return function(F){var u=F/p(Math.round(k(F)));u*h<h-.5&&(u*=h);return u<=B?q(F):""}};f.nice=function(){return g(Km(g(),{floor:function(m){return p(Math.floor(k(m)))},ceil:function(m){return p(Math.ceil(k(m)))}}))};return f}function Om(){var a=Pi(ae()).domain([1,10]);a.copy=function(){return Te(a,Om()).base(a.base())};ic.apply(a,
arguments);return a}function Pm(a){return function(b){return Math.sign(b)*Math.log1p(Math.abs(b/a))}}function Qm(a){return function(b){return Math.sign(b)*Math.expm1(Math.abs(b))*a}}function Qi(a){var b=1,f=a(Pm(b),Qm(b));f.constant=function(g){return arguments.length?a(Pm(b=+g),Qm(b)):b};return Zc(f)}function Rm(){var a=Qi(ae());a.copy=function(){return Te(a,Rm()).constant(a.constant())};return ic.apply(a,arguments)}function Sm(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function wt(a){return 0>
a?-Math.sqrt(-a):Math.sqrt(a)}function xt(a){return 0>a?-a*a:a*a}function Ri(a){var b=a(Cb,Cb),f=1;b.exponent=function(g){return arguments.length?(f=+g,1===f?a(Cb,Cb):.5===f?a(wt,xt):a(Sm(f),Sm(1/f))):f};return Zc(b)}function Si(){var a=Ri(ae());a.copy=function(){return Te(a,Si()).exponent(a.exponent())};ic.apply(a,arguments);return a}function Tm(a){return Math.sign(a)*a*a}function Um(){function a(k){k=b(k);k=Math.sign(k)*Math.sqrt(Math.abs(k));return isNaN(k)?h:g?Math.round(k):k}var b=ae()(Cb,Cb),
f=[0,1],g=!1,h;a.invert=function(k){return b.invert(Tm(k))};a.domain=function(k){return arguments.length?(b.domain(k),a):b.domain()};a.range=function(k){return arguments.length?(b.range((f=Array.from(k,sg)).map(Tm)),a):f.slice()};a.rangeRound=function(k){return a.range(k).round(!0)};a.round=function(k){return arguments.length?(g=!!k,a):g};a.clamp=function(k){return arguments.length?(b.clamp(k),a):b.clamp()};a.unknown=function(k){return arguments.length?(h=k,a):h};a.copy=function(){return Um(b.domain(),
f).round(g).clamp(b.clamp()).unknown(h)};ic.apply(a,arguments);return Zc(a)}function Vm(){function a(){var p=0,m=Math.max(1,g.length);for(h=Array(m-1);++p<m;)h[p-1]=fd(f,p/m);return b}function b(p){return null==p||isNaN(p=+p)?k:g[Qc(h,p)]}var f=[],g=[],h=[],k;b.invertExtent=function(p){p=g.indexOf(p);return 0>p?[NaN,NaN]:[0<p?h[p-1]:f[0],p<h.length?h[p]:f[f.length-1]]};b.domain=function(p){if(!arguments.length)return f.slice();f=[];for(var m=$jscomp.makeIterator(p),q=m.next();!q.done;q=m.next())q=
q.value,null==q||isNaN(q=+q)||f.push(q);f.sort(n);return a()};b.range=function(p){return arguments.length?(g=Array.from(p),a()):g.slice()};b.unknown=function(p){return arguments.length?(k=p,b):k};b.quantiles=function(){return h.slice()};b.copy=function(){return Vm().domain(f).range(g).unknown(k)};return ic.apply(b,arguments)}function Wm(){function a(q){return null!=q&&q<=q?p[Qc(k,q,0,h)]:m}function b(){var q=-1;for(k=Array(h);++q<h;)k[q]=((q+1)*g-(q-h)*f)/(h+1);return a}var f=0,g=1,h=1,k=[.5],p=[0,
1],m;a.domain=function(q){if(arguments.length){var B=$jscomp.makeIterator(q);f=B.next().value;g=B.next().value;B=(f=+f,g=+g,b())}else B=[f,g];return B};a.range=function(q){return arguments.length?(h=(p=Array.from(q)).length-1,b()):p.slice()};a.invertExtent=function(q){q=p.indexOf(q);return 0>q?[NaN,NaN]:1>q?[f,k[0]]:q>=h?[k[h-1],g]:[k[q-1],k[q]]};a.unknown=function(q){return arguments.length?(m=q,a):a};a.thresholds=function(){return k.slice()};a.copy=function(){return Wm().domain([f,g]).range(p).unknown(m)};
return ic.apply(Zc(a),arguments)}function Xm(){function a(k){return null!=k&&k<=k?f[Qc(b,k,0,h)]:g}var b=[.5],f=[0,1],g,h=1;a.domain=function(k){return arguments.length?(b=Array.from(k),h=Math.min(b.length,f.length-1),a):b.slice()};a.range=function(k){return arguments.length?(f=Array.from(k),h=Math.min(b.length,f.length-1),a):f.slice()};a.invertExtent=function(k){k=f.indexOf(k);return[b[k-1],b[k]]};a.unknown=function(k){return arguments.length?(g=k,a):g};a.copy=function(){return Xm().domain(b).range(f).unknown(g)};
return ic.apply(a,arguments)}function Db(a,b,f,g){function h(k){return a(k=0===arguments.length?new Date:new Date(+k)),k}h.floor=function(k){return a(k=new Date(+k)),k};h.ceil=function(k){return a(k=new Date(k-1)),b(k,1),a(k),k};h.round=function(k){var p=h(k),m=h.ceil(k);return k-p<m-k?p:m};h.offset=function(k,p){return b(k=new Date(+k),null==p?1:Math.floor(p)),k};h.range=function(k,p,m){var q=[],B;k=h.ceil(k);m=null==m?1:Math.floor(m);if(!(k<p&&0<m))return q;do q.push(B=new Date(+k)),b(k,m),a(k);
while(B<k&&k<p);return q};h.filter=function(k){return Db(function(p){if(p>=p)for(;a(p),!k(p);)p.setTime(p-1)},function(p,m){if(p>=p)if(0>m)for(;0>=++m;)for(;b(p,-1),!k(p););else for(;0<=--m;)for(;b(p,1),!k(p););})};f&&(h.count=function(k,p){Ti.setTime(+k);Ui.setTime(+p);a(Ti);a(Ui);return Math.floor(f(Ti,Ui))},h.every=function(k){k=Math.floor(k);return isFinite(k)&&0<k?1<k?h.filter(g?function(p){return 0===g(p)%k}:function(p){return 0===h.count(0,p)%k}):h:null});return h}function td(a){return Db(function(b){b.setDate(b.getDate()-
(b.getDay()+7-a)%7);b.setHours(0,0,0,0)},function(b,f){b.setDate(b.getDate()+7*f)},function(b,f){return(f-b-6E4*(f.getTimezoneOffset()-b.getTimezoneOffset()))/Vi})}function ud(a){return Db(function(b){b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7);b.setUTCHours(0,0,0,0)},function(b,f){b.setUTCDate(b.getUTCDate()+7*f)},function(b,f){return(f-b)/Vi})}function Ym(a,b,f,g,h,k){function p(q,B,F){var u=Math.abs(B-q)/F,v=x(function(z){z=$jscomp.makeIterator(z);z.next();z.next();return z.next().value}).right(m,
u);if(v===m.length)return a.every(sb(q/Wi,B/Wi,F));if(0===v)return be.every(Math.max(sb(q,B,F),1));B=$jscomp.makeIterator(m[u/m[v-1][2]<m[v][2]/u?v-1:v]);q=B.next().value;B=B.next().value;return q.every(B)}var m=[[Mc,1,1E3],[Mc,5,5E3],[Mc,15,15E3],[Mc,30,3E4],[k,1,6E4],[k,5,3E5],[k,15,9E5],[k,30,18E5],[h,1,36E5],[h,3,108E5],[h,6,216E5],[h,12,432E5],[g,1,864E5],[g,2,1728E5],[f,1,Vi],[b,1,Zm],[b,3,3*Zm],[a,1,Wi]];return[function(q,B,F){var u=B<q;u&&(B=$jscomp.makeIterator([B,q]),q=B.next().value,B=
B.next().value);q=(F=F&&"function"===typeof F.range?F:p(q,B,F))?F.range(q,+B+1):[];return u?q.reverse():q},p]}function Xi(a){if(0<=a.y&&100>a.y){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);b.setFullYear(a.y);return b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Yi(a){if(0<=a.y&&100>a.y){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));b.setUTCFullYear(a.y);return b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function Ue(a,b,f){return{y:a,m:b,d:f,H:0,M:0,S:0,L:0}}function $m(a){function b(Y,
Z){return function(qa){var oa=[],wa=-1,La=0,ta=Y.length,Ia,Ta;for(qa instanceof Date||(qa=new Date(+qa));++wa<ta;)if(37===Y.charCodeAt(wa)){oa.push(Y.slice(La,wa));null!=(La=an[Ia=Y.charAt(++wa)])?Ia=Y.charAt(++wa):La="e"===Ia?" ":"0";if(Ta=Z[Ia])Ia=Ta(qa,La);oa.push(Ia);La=wa+1}oa.push(Y.slice(La,wa));return oa.join("")}}function f(Y,Z){return function(qa){var oa=Ue(1900,void 0,1);if(g(oa,Y,qa+="",0)!=qa.length)return null;if("Q"in oa)return new Date(oa.Q);if("s"in oa)return new Date(1E3*oa.s+("L"in
oa?oa.L:0));!Z||"Z"in oa||(oa.Z=0);"p"in oa&&(oa.H=oa.H%12+12*oa.p);void 0===oa.m&&(oa.m="q"in oa?oa.q:0);if("V"in oa){if(1>oa.V||53<oa.V)return null;"w"in oa||(oa.w=1);if("Z"in oa){qa=Yi(Ue(oa.y,0,1));var wa=qa.getUTCDay();qa=4<wa||0===wa?Ve.ceil(qa):Ve(qa);qa=ce.offset(qa,7*(oa.V-1));oa.y=qa.getUTCFullYear();oa.m=qa.getUTCMonth();oa.d=qa.getUTCDate()+(oa.w+6)%7}else qa=Xi(Ue(oa.y,0,1)),wa=qa.getDay(),qa=4<wa||0===wa?We.ceil(qa):We(qa),qa=de.offset(qa,7*(oa.V-1)),oa.y=qa.getFullYear(),oa.m=qa.getMonth(),
oa.d=qa.getDate()+(oa.w+6)%7}else if("W"in oa||"U"in oa)"w"in oa||(oa.w="u"in oa?oa.u%7:"W"in oa?1:0),wa="Z"in oa?Yi(Ue(oa.y,0,1)).getUTCDay():Xi(Ue(oa.y,0,1)).getDay(),oa.m=0,oa.d="W"in oa?(oa.w+6)%7+7*oa.W-(wa+5)%7:oa.w+7*oa.U-(wa+6)%7;return"Z"in oa?(oa.H+=oa.Z/100|0,oa.M+=oa.Z%100,Yi(oa)):Xi(oa)}}function g(Y,Z,qa,oa){for(var wa=0,La=Z.length,ta=qa.length,Ia;wa<La;){if(oa>=ta)return-1;Ia=Z.charCodeAt(wa++);if(37===Ia){if(Ia=Z.charAt(wa++),Ia=ka[Ia in an?Z.charAt(wa++):Ia],!Ia||0>(oa=Ia(Y,qa,oa)))return-1}else if(Ia!=
qa.charCodeAt(oa++))return-1}return oa}var h=a.dateTime,k=a.date,p=a.time,m=a.periods,q=a.days,B=a.shortDays,F=a.months,u=a.shortMonths,v=Xe(m),z=Ye(m),C=Xe(q),r=Ye(q),t=Xe(B),A=Ye(B),E=Xe(F),H=Ye(F),M=Xe(u),U=Ye(u),W={a:function(Y){return B[Y.getDay()]},A:function(Y){return q[Y.getDay()]},b:function(Y){return u[Y.getMonth()]},B:function(Y){return F[Y.getMonth()]},c:null,d:bn,e:bn,f:yt,g:zt,G:At,H:Bt,I:Ct,j:Dt,L:cn,m:Et,M:Ft,p:function(Y){return m[+(12<=Y.getHours())]},q:function(Y){return 1+~~(Y.getMonth()/
3)},Q:dn,s:en,S:Gt,u:Ht,U:It,V:Jt,w:Kt,W:Lt,x:null,X:null,y:Mt,Y:Nt,Z:Ot,"%":fn},da={a:function(Y){return B[Y.getUTCDay()]},A:function(Y){return q[Y.getUTCDay()]},b:function(Y){return u[Y.getUTCMonth()]},B:function(Y){return F[Y.getUTCMonth()]},c:null,d:gn,e:gn,f:Pt,g:Qt,G:Rt,H:St,I:Tt,j:Ut,L:hn,m:Vt,M:Wt,p:function(Y){return m[+(12<=Y.getUTCHours())]},q:function(Y){return 1+~~(Y.getUTCMonth()/3)},Q:dn,s:en,S:Xt,u:Yt,U:Zt,V:$t,w:au,W:bu,x:null,X:null,y:cu,Y:du,Z:eu,"%":fn},ka={a:function(Y,Z,qa){return(Z=
t.exec(Z.slice(qa)))?(Y.w=A.get(Z[0].toLowerCase()),qa+Z[0].length):-1},A:function(Y,Z,qa){return(Z=C.exec(Z.slice(qa)))?(Y.w=r.get(Z[0].toLowerCase()),qa+Z[0].length):-1},b:function(Y,Z,qa){return(Z=M.exec(Z.slice(qa)))?(Y.m=U.get(Z[0].toLowerCase()),qa+Z[0].length):-1},B:function(Y,Z,qa){return(Z=E.exec(Z.slice(qa)))?(Y.m=H.get(Z[0].toLowerCase()),qa+Z[0].length):-1},c:function(Y,Z,qa){return g(Y,h,Z,qa)},d:jn,e:jn,f:fu,g:kn,G:ln,H:mn,I:mn,j:gu,L:hu,m:iu,M:ju,p:function(Y,Z,qa){return(Z=v.exec(Z.slice(qa)))?
(Y.p=z.get(Z[0].toLowerCase()),qa+Z[0].length):-1},q:ku,Q:lu,s:mu,S:nu,u:ou,U:pu,V:qu,w:ru,W:su,x:function(Y,Z,qa){return g(Y,k,Z,qa)},X:function(Y,Z,qa){return g(Y,p,Z,qa)},y:kn,Y:ln,Z:tu,"%":uu};W.x=b(k,W);W.X=b(p,W);W.c=b(h,W);da.x=b(k,da);da.X=b(p,da);da.c=b(h,da);return{format:function(Y){var Z=b(Y+="",W);Z.toString=function(){return Y};return Z},parse:function(Y){var Z=f(Y+="",!1);Z.toString=function(){return Y};return Z},utcFormat:function(Y){var Z=b(Y+="",da);Z.toString=function(){return Y};
return Z},utcParse:function(Y){var Z=f(Y+="",!0);Z.toString=function(){return Y};return Z}}}function jb(a,b,f){var g=0>a?"-":"";a=(g?-a:a)+"";var h=a.length;return g+(h<f?Array(f-h+1).join(b)+a:a)}function vu(a){return a.replace(wu,"\\$&")}function Xe(a){return new RegExp("^(?:"+a.map(vu).join("|")+")","i")}function Ye(a){return new Map(a.map(function(b,f){return[b.toLowerCase(),f]}))}function ru(a,b,f){return(b=Hb.exec(b.slice(f,f+1)))?(a.w=+b[0],f+b[0].length):-1}function ou(a,b,f){return(b=Hb.exec(b.slice(f,
f+1)))?(a.u=+b[0],f+b[0].length):-1}function pu(a,b,f){return(b=Hb.exec(b.slice(f,f+2)))?(a.U=+b[0],f+b[0].length):-1}function qu(a,b,f){return(b=Hb.exec(b.slice(f,f+2)))?(a.V=+b[0],f+b[0].length):-1}function su(a,b,f){return(b=Hb.exec(b.slice(f,f+2)))?(a.W=+b[0],f+b[0].length):-1}function ln(a,b,f){return(b=Hb.exec(b.slice(f,f+4)))?(a.y=+b[0],f+b[0].length):-1}function kn(a,b,f){return(b=Hb.exec(b.slice(f,f+2)))?(a.y=+b[0]+(68<+b[0]?1900:2E3),f+b[0].length):-1}function tu(a,b,f){return(b=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(b.slice(f,
f+6)))?(a.Z=b[1]?0:-(b[2]+(b[3]||"00")),f+b[0].length):-1}function ku(a,b,f){return(b=Hb.exec(b.slice(f,f+1)))?(a.q=3*b[0]-3,f+b[0].length):-1}function iu(a,b,f){return(b=Hb.exec(b.slice(f,f+2)))?(a.m=b[0]-1,f+b[0].length):-1}function jn(a,b,f){return(b=Hb.exec(b.slice(f,f+2)))?(a.d=+b[0],f+b[0].length):-1}function gu(a,b,f){return(b=Hb.exec(b.slice(f,f+3)))?(a.m=0,a.d=+b[0],f+b[0].length):-1}function mn(a,b,f){return(b=Hb.exec(b.slice(f,f+2)))?(a.H=+b[0],f+b[0].length):-1}function ju(a,b,f){return(b=
Hb.exec(b.slice(f,f+2)))?(a.M=+b[0],f+b[0].length):-1}function nu(a,b,f){return(b=Hb.exec(b.slice(f,f+2)))?(a.S=+b[0],f+b[0].length):-1}function hu(a,b,f){return(b=Hb.exec(b.slice(f,f+3)))?(a.L=+b[0],f+b[0].length):-1}function fu(a,b,f){return(b=Hb.exec(b.slice(f,f+6)))?(a.L=Math.floor(b[0]/1E3),f+b[0].length):-1}function uu(a,b,f){return(a=xu.exec(b.slice(f,f+1)))?f+a[0].length:-1}function lu(a,b,f){return(b=Hb.exec(b.slice(f)))?(a.Q=+b[0],f+b[0].length):-1}function mu(a,b,f){return(b=Hb.exec(b.slice(f)))?
(a.s=+b[0],f+b[0].length):-1}function bn(a,b){return jb(a.getDate(),b,2)}function Bt(a,b){return jb(a.getHours(),b,2)}function Ct(a,b){return jb(a.getHours()%12||12,b,2)}function Dt(a,b){return jb(1+de.count(Ac(a),a),b,3)}function cn(a,b){return jb(a.getMilliseconds(),b,3)}function yt(a,b){return cn(a,b)+"000"}function Et(a,b){return jb(a.getMonth()+1,b,2)}function Ft(a,b){return jb(a.getMinutes(),b,2)}function Gt(a,b){return jb(a.getSeconds(),b,2)}function Ht(a){a=a.getDay();return 0===a?7:a}function It(a,
b){return jb(ee.count(Ac(a)-1,a),b,2)}function nn(a){var b=a.getDay();return 4<=b||0===b?vd(a):vd.ceil(a)}function Jt(a,b){a=nn(a);return jb(vd.count(Ac(a),a)+(4===Ac(a).getDay()),b,2)}function Kt(a){return a.getDay()}function Lt(a,b){return jb(We.count(Ac(a)-1,a),b,2)}function Mt(a,b){return jb(a.getFullYear()%100,b,2)}function zt(a,b){a=nn(a);return jb(a.getFullYear()%100,b,2)}function Nt(a,b){return jb(a.getFullYear()%1E4,b,4)}function At(a,b){var f=a.getDay();a=4<=f||0===f?vd(a):vd.ceil(a);return jb(a.getFullYear()%
1E4,b,4)}function Ot(a){a=a.getTimezoneOffset();return(0<a?"-":(a*=-1,"+"))+jb(a/60|0,"0",2)+jb(a%60,"0",2)}function gn(a,b){return jb(a.getUTCDate(),b,2)}function St(a,b){return jb(a.getUTCHours(),b,2)}function Tt(a,b){return jb(a.getUTCHours()%12||12,b,2)}function Ut(a,b){return jb(1+ce.count(Bc(a),a),b,3)}function hn(a,b){return jb(a.getUTCMilliseconds(),b,3)}function Pt(a,b){return hn(a,b)+"000"}function Vt(a,b){return jb(a.getUTCMonth()+1,b,2)}function Wt(a,b){return jb(a.getUTCMinutes(),b,2)}
function Xt(a,b){return jb(a.getUTCSeconds(),b,2)}function Yt(a){a=a.getUTCDay();return 0===a?7:a}function Zt(a,b){return jb(fe.count(Bc(a)-1,a),b,2)}function on(a){var b=a.getUTCDay();return 4<=b||0===b?wd(a):wd.ceil(a)}function $t(a,b){a=on(a);return jb(wd.count(Bc(a),a)+(4===Bc(a).getUTCDay()),b,2)}function au(a){return a.getUTCDay()}function bu(a,b){return jb(Ve.count(Bc(a)-1,a),b,2)}function cu(a,b){return jb(a.getUTCFullYear()%100,b,2)}function Qt(a,b){a=on(a);return jb(a.getUTCFullYear()%100,
b,2)}function du(a,b){return jb(a.getUTCFullYear()%1E4,b,4)}function Rt(a,b){var f=a.getUTCDay();a=4<=f||0===f?wd(a):wd.ceil(a);return jb(a.getUTCFullYear()%1E4,b,4)}function eu(){return"+0000"}function fn(){return"%"}function dn(a){return+a}function en(a){return Math.floor(+a/1E3)}function pn(a){ge=$m(a);c.timeFormat=ge.format;c.timeParse=ge.parse;c.utcFormat=ge.utcFormat;c.utcParse=ge.utcParse;return ge}function yu(a){return a.toISOString()}function zu(a){a=new Date(a);return isNaN(a)?null:a}function Au(a){return new Date(a)}
function Bu(a){return a instanceof Date?+a:+new Date(+a)}function Zi(a,b,f,g,h,k,p,m,q,B){function F(W){return(q(W)<W?C:m(W)<W?r:p(W)<W?t:k(W)<W?A:g(W)<W?h(W)<W?E:H:f(W)<W?M:U)(W)}var u=ae()(Cb,Cb),v=u.invert,z=u.domain,C=B(".%L"),r=B(":%S"),t=B("%I:%M"),A=B("%I %p"),E=B("%a %d"),H=B("%b %d"),M=B("%B"),U=B("%Y");u.invert=function(W){return new Date(v(W))};u.domain=function(W){return arguments.length?z(Array.from(W,Bu)):z().map(Au)};u.ticks=function(W){var da=z();return a(da[0],da[da.length-1],null==
W?10:W)};u.tickFormat=function(W,da){return null==da?F:B(da)};u.nice=function(W){var da=z();W&&"function"===typeof W.range||(W=b(da[0],da[da.length-1],null==W?10:W));return W?z(Km(da,W)):u};u.copy=function(){return Te(u,Zi(a,b,f,g,h,k,p,m,q,B))};return u}function tg(){function a(u){return null==u||isNaN(u=+u)?F:q(0===p?.5:(u=(m(u)-h)*p,B?Math.max(0,Math.min(1,u)):u))}function b(u){return function(v){if(arguments.length){var z=$jscomp.makeIterator(v);var C=z.next().value;z=z.next().value;C=(q=u(C,
z),a)}else C=[q(0),q(1)];return C}}var f=0,g=1,h,k,p,m,q=Cb,B=!1,F;a.domain=function(u){if(arguments.length){var v=$jscomp.makeIterator(u);f=v.next().value;g=v.next().value;v=(h=m(f=+f),k=m(g=+g),p=h===k?0:1/(k-h),a)}else v=[f,g];return v};a.clamp=function(u){return arguments.length?(B=!!u,a):B};a.interpolator=function(u){return arguments.length?(q=u,a):q};a.range=b(Uc);a.rangeRound=b(wf);a.unknown=function(u){return arguments.length?(F=u,a):F};return function(u){m=u;h=u(f);k=u(g);p=h===k?0:1/(k-
h);return a}}function $c(a,b){return b.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function qn(){var a=Zc(tg()(Cb));a.copy=function(){return $c(a,qn())};return Lc.apply(a,arguments)}function rn(){var a=Pi(tg()).domain([1,10]);a.copy=function(){return $c(a,rn()).base(a.base())};return Lc.apply(a,arguments)}function sn(){var a=Qi(tg());a.copy=function(){return $c(a,sn()).constant(a.constant())};return Lc.apply(a,arguments)}function $i(){var a=Ri(tg());a.copy=
function(){return $c(a,$i()).exponent(a.exponent())};return Lc.apply(a,arguments)}function tn(){function a(g){if(null!=g&&!isNaN(g=+g))return f((Qc(b,g,1)-1)/(b.length-1))}var b=[],f=Cb;a.domain=function(g){if(!arguments.length)return b.slice();b=[];for(var h=$jscomp.makeIterator(g),k=h.next();!k.done;k=h.next())k=k.value,null==k||isNaN(k=+k)||b.push(k);b.sort(n);return a};a.interpolator=function(g){return arguments.length?(f=g,a):f};a.range=function(){return b.map(function(g,h){return f(h/(b.length-
1))})};a.quantiles=function(g){return Array.from({length:g+1},function(h,k){return rc(b,k/g)})};a.copy=function(){return tn(f).domain(b)};return Lc.apply(a,arguments)}function ug(){function a(r){return isNaN(r=+r)?C:(r=.5+((r=+v(r))-m)*(k*r<k*m?B:F),u(z?Math.max(0,Math.min(1,r)):r))}function b(r){return function(t){if(arguments.length){var A=$jscomp.makeIterator(t);var E=A.next().value;var H=A.next().value;A=A.next().value;E=(u=qk(r,[E,H,A]),a)}else E=[u(0),u(.5),u(1)];return E}}var f=0,g=.5,h=1,
k=1,p,m,q,B,F,u=Cb,v,z=!1,C;a.domain=function(r){if(arguments.length){var t=$jscomp.makeIterator(r);f=t.next().value;g=t.next().value;h=t.next().value;t=(p=v(f=+f),m=v(g=+g),q=v(h=+h),B=p===m?0:.5/(m-p),F=m===q?0:.5/(q-m),k=m<p?-1:1,a)}else t=[f,g,h];return t};a.clamp=function(r){return arguments.length?(z=!!r,a):z};a.interpolator=function(r){return arguments.length?(u=r,a):u};a.range=b(Uc);a.rangeRound=b(wf);a.unknown=function(r){return arguments.length?(C=r,a):C};return function(r){v=r;p=r(f);m=
r(g);q=r(h);B=p===m?0:.5/(m-p);F=m===q?0:.5/(q-m);k=m<p?-1:1;return a}}function un(){var a=Zc(ug()(Cb));a.copy=function(){return $c(a,un())};return Lc.apply(a,arguments)}function vn(){var a=Pi(ug()).domain([.1,1,10]);a.copy=function(){return $c(a,vn()).base(a.base())};return Lc.apply(a,arguments)}function wn(){var a=Qi(ug());a.copy=function(){return $c(a,wn()).constant(a.constant())};return Lc.apply(a,arguments)}function aj(){var a=Ri(ug());a.copy=function(){return $c(a,aj()).exponent(a.exponent())};
return Lc.apply(a,arguments)}function eb(a){for(var b=a.length/6|0,f=Array(b),g=0;g<b;)f[g]="#"+a.slice(6*g,6*++g);return f}function vg(a){var b=a.length;return function(f){return a[Math.max(0,Math.min(b-1,Math.floor(f*b)))]}}function cb(a){return function(){return a}}function xn(a){return 1<=a?wg:-1>=a?-wg:Math.asin(a)}function Cu(a){return a.innerRadius}function Du(a){return a.outerRadius}function Eu(a){return a.startAngle}function Fu(a){return a.endAngle}function Gu(a){return a&&a.padAngle}function xg(a,
b,f,g,h,k,p){var m=a-f,q=b-g;p=(p?k:-k)/he(m*m+q*q);q*=p;m*=-p;var B=a+q,F=b+m,u=f+q,v=g+m;f=(B+u)/2;g=(F+v)/2;b=u-B;a=v-F;p=b*b+a*a;k=h-k;v=B*v-u*F;var z=(0>a?-1:1)*he(Hu(0,k*k*p-v*v));B=(v*a-b*z)/p;F=(-v*b-a*z)/p;u=(v*a+b*z)/p;b=(-v*b+a*z)/p;a=B-f;p=F-g;f=u-f;g=b-g;a*a+p*p>f*f+g*g&&(B=u,F=b);return{cx:B,cy:F,x01:-q,y01:-m,x11:B*(h/k-1),y11:F*(h/k-1)}}function yg(a){return"object"===typeof a&&"length"in a?a:Array.from(a)}function yn(a){this._context=a}function zg(a){return new yn(a)}function bj(a){return a[0]}
function cj(a){return a[1]}function dj(a,b){function f(m){var q,B=(m=yg(m)).length,F,u=!1,v;null==h&&(p=k(v=Wc()));for(q=0;q<=B;++q)!(q<B&&g(F=m[q],q,m))===u&&((u=!u)?p.lineStart():p.lineEnd()),u&&p.point(+a(F,q,m),+b(F,q,m));if(v)return p=null,v+""||null}var g=cb(!0),h=null,k=zg,p=null;a="function"===typeof a?a:void 0===a?bj:cb(a);b="function"===typeof b?b:void 0===b?cj:cb(b);f.x=function(m){return arguments.length?(a="function"===typeof m?m:cb(+m),f):a};f.y=function(m){return arguments.length?(b=
"function"===typeof m?m:cb(+m),f):b};f.defined=function(m){return arguments.length?(g="function"===typeof m?m:cb(!!m),f):g};f.curve=function(m){return arguments.length?(k=m,null!=h&&(p=k(h)),f):k};f.context=function(m){return arguments.length?(null==m?h=p=null:p=k(h=m),f):h};return f}function zn(a,b,f){function g(F){var u,v,z=(F=yg(F)).length,C,r=!1,t,A=Array(z),E=Array(z);null==m&&(B=q(t=Wc()));for(u=0;u<=z;++u){if(!(u<z&&p(C=F[u],u,F))===r)if(r=!r){var H=u;B.areaStart();B.lineStart()}else{B.lineEnd();
B.lineStart();for(v=u-1;v>=H;--v)B.point(A[v],E[v]);B.lineEnd();B.areaEnd()}r&&(A[u]=+a(C,u,F),E[u]=+b(C,u,F),B.point(k?+k(C,u,F):A[u],f?+f(C,u,F):E[u]))}if(t)return B=null,t+""||null}function h(){return dj().defined(p).curve(q).context(m)}var k=null,p=cb(!0),m=null,q=zg,B=null;a="function"===typeof a?a:void 0===a?bj:cb(+a);b="function"===typeof b?b:void 0===b?cb(0):cb(+b);f="function"===typeof f?f:void 0===f?cj:cb(+f);g.x=function(F){return arguments.length?(a="function"===typeof F?F:cb(+F),k=null,
g):a};g.x0=function(F){return arguments.length?(a="function"===typeof F?F:cb(+F),g):a};g.x1=function(F){return arguments.length?(k=null==F?null:"function"===typeof F?F:cb(+F),g):k};g.y=function(F){return arguments.length?(b="function"===typeof F?F:cb(+F),f=null,g):b};g.y0=function(F){return arguments.length?(b="function"===typeof F?F:cb(+F),g):b};g.y1=function(F){return arguments.length?(f=null==F?null:"function"===typeof F?F:cb(+F),g):f};g.lineX0=g.lineY0=function(){return h().x(a).y(b)};g.lineY1=
function(){return h().x(a).y(f)};g.lineX1=function(){return h().x(k).y(b)};g.defined=function(F){return arguments.length?(p="function"===typeof F?F:cb(!!F),g):p};g.curve=function(F){return arguments.length?(q=F,null!=m&&(B=q(m)),g):q};g.context=function(F){return arguments.length?(null==F?m=B=null:B=q(m=F),g):m};return g}function Iu(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function Ju(a){return a}function An(a){this._curve=a}function ej(a){function b(f){return new An(a(f))}b._curve=a;return b}function Ze(a){var b=
a.curve;a.angle=a.x;delete a.x;a.radius=a.y;delete a.y;a.curve=function(f){return arguments.length?b(ej(f)):b()._curve};return a}function Bn(){return Ze(dj().curve(Cn))}function Dn(){var a=zn().curve(Cn),b=a.curve,f=a.lineX0,g=a.lineX1,h=a.lineY0,k=a.lineY1;a.angle=a.x;delete a.x;a.startAngle=a.x0;delete a.x0;a.endAngle=a.x1;delete a.x1;a.radius=a.y;delete a.y;a.innerRadius=a.y0;delete a.y0;a.outerRadius=a.y1;delete a.y1;a.lineStartAngle=function(){return Ze(f())};delete a.lineX0;a.lineEndAngle=function(){return Ze(g())};
delete a.lineX1;a.lineInnerRadius=function(){return Ze(h())};delete a.lineY0;a.lineOuterRadius=function(){return Ze(k())};delete a.lineY1;a.curve=function(p){return arguments.length?b(ej(p)):b()._curve};return a}function $e(a,b){return[(b=+b)*Math.cos(a-=Math.PI/2),b*Math.sin(a)]}function Ku(a){return a.source}function Lu(a){return a.target}function fj(a){function b(){var m,q=Mu.call(arguments),B=f.apply(this,q),F=g.apply(this,q);p||(p=m=Wc());a(p,+h.apply(this,(q[0]=B,q)),+k.apply(this,q),+h.apply(this,
(q[0]=F,q)),+k.apply(this,q));if(m)return p=null,m+""||null}var f=Ku,g=Lu,h=bj,k=cj,p=null;b.source=function(m){return arguments.length?(f=m,b):f};b.target=function(m){return arguments.length?(g=m,b):g};b.x=function(m){return arguments.length?(h="function"===typeof m?m:cb(+m),b):h};b.y=function(m){return arguments.length?(k="function"===typeof m?m:cb(+m),b):k};b.context=function(m){return arguments.length?(p=null==m?null:m,b):p};return b}function Nu(a,b,f,g,h){a.moveTo(b,f);a.bezierCurveTo(b=(b+g)/
2,f,b,h,g,h)}function Ou(a,b,f,g,h){a.moveTo(b,f);a.bezierCurveTo(b,f=(f+h)/2,g,f,g,h)}function Pu(a,b,f,g,h){var k=$e(b,f);b=$e(b,f=(f+h)/2);f=$e(g,f);g=$e(g,h);a.moveTo(k[0],k[1]);a.bezierCurveTo(b[0],b[1],f[0],f[1],g[0],g[1])}function ad(){}function Ag(a,b,f){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+f)/6)}function Bg(a){this._context=a}function En(a){this._context=a}function Fn(a){this._context=a}function Gn(a,
b){this._basis=new Bg(a);this._beta=b}function Cg(a,b,f){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-b),a._y2+a._k*(a._y1-f),a._x2,a._y2)}function gj(a,b){this._context=a;this._k=(1-b)/6}function hj(a,b){this._context=a;this._k=(1-b)/6}function ij(a,b){this._context=a;this._k=(1-b)/6}function jj(a,b,f){var g=a._x1,h=a._y1,k=a._x2,p=a._y2;if(1E-12<a._l01_a){var m=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,q=3*a._l01_a*(a._l01_a+a._l12_a);g=(g*m-a._x0*
a._l12_2a+a._x2*a._l01_2a)/q;h=(h*m-a._y0*a._l12_2a+a._y2*a._l01_2a)/q}1E-12<a._l23_a&&(m=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,q=3*a._l23_a*(a._l23_a+a._l12_a),k=(k*m+a._x1*a._l23_2a-b*a._l12_2a)/q,p=(p*m+a._y1*a._l23_2a-f*a._l12_2a)/q);a._context.bezierCurveTo(g,h,k,p,a._x2,a._y2)}function Hn(a,b){this._context=a;this._alpha=b}function In(a,b){this._context=a;this._alpha=b}function Jn(a,b){this._context=a;this._alpha=b}function Kn(a){this._context=a}function Ln(a,b,f){var g=a._x1-a._x0;b-=a._x1;
var h=(a._y1-a._y0)/(g||0>b&&-0);a=(f-a._y1)/(b||0>g&&-0);return((0>h?-1:1)+(0>a?-1:1))*Math.min(Math.abs(h),Math.abs(a),.5*Math.abs((h*b+a*g)/(g+b)))||0}function Mn(a,b){var f=a._x1-a._x0;return f?(3*(a._y1-a._y0)/f-b)/2:b}function kj(a,b,f){var g=a._x0,h=a._x1,k=a._y1,p=(h-g)/3;a._context.bezierCurveTo(g+p,a._y0+p*b,h-p,k-p*f,h,k)}function Dg(a){this._context=a}function Nn(a){this._context=new On(a)}function On(a){this._context=a}function Pn(a){this._context=a}function Qn(a){var b,f=a.length-1,
g=Array(f),h=Array(f),k=Array(f);g[0]=0;h[0]=2;k[0]=a[0]+2*a[1];for(b=1;b<f-1;++b)g[b]=1,h[b]=4,k[b]=4*a[b]+2*a[b+1];g[f-1]=2;h[f-1]=7;k[f-1]=8*a[f-1]+a[f];for(b=1;b<f;++b){var p=g[b]/h[b-1];h[b]-=p;k[b]-=p*k[b-1]}g[f-1]=k[f-1]/h[f-1];for(b=f-2;0<=b;--b)g[b]=(k[b]-g[b+1])/h[b];h[f-1]=(a[f]+g[f-1])/2;for(b=0;b<f-1;++b)h[b]=2*a[b+1]-g[b+1];return[g,h]}function Eg(a,b){this._context=a;this._t=b}function ie(a,b){if(1<(p=a.length))for(var f=1,g,h,k=a[b[0]],p,m=k.length;f<p;++f)for(h=k,k=a[b[f]],g=0;g<
m;++g)k[g][1]+=k[g][0]=isNaN(h[g][1])?h[g][0]:h[g][1]}function je(a){a=a.length;for(var b=Array(a);0<=--a;)b[a]=a;return b}function Qu(a,b){return a[b]}function Ru(a){var b=[];b.key=a;return b}function Rn(a){var b=a.map(Su);return je(a).sort(function(f,g){return b[f]-b[g]})}function Su(a){for(var b=-1,f=0,g=a.length,h,k=-Infinity;++b<g;)(h=+a[b][1])>k&&(k=h,f=b);return f}function Sn(a){var b=a.map(Tn);return je(a).sort(function(f,g){return b[f]-b[g]})}function Tn(a){for(var b=0,f=-1,g=a.length,h;++f<
g;)if(h=+a[f][1])b+=h;return b}function Tu(a,b){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:b.sourceEvent,enumerable:!0,configurable:!0},target:{value:b.target,enumerable:!0,configurable:!0},transform:{value:b.transform,enumerable:!0,configurable:!0},_:{value:b.dispatch}})}function Nc(a,b,f){this.k=a;this.x=b;this.y=f}function Un(a){for(;!a.__zoom;)if(!(a=a.parentNode))return Fg;return a.__zoom}function af(a){a.preventDefault();a.stopImmediatePropagation()}
function Uu(a){return(!a.ctrlKey||"wheel"===a.type)&&!a.button}function Vu(){var a=this;return a instanceof SVGElement?(a=a.ownerSVGElement||a,a.hasAttribute("viewBox")?(a=a.viewBox.baseVal,[[a.x,a.y],[a.x+a.width,a.y+a.height]]):[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]):[[0,0],[a.clientWidth,a.clientHeight]]}function Vn(){return this.__zoom||Fg}function Wu(a){return-a.deltaY*(1===a.deltaMode?.05:a.deltaMode?1:.002)*(a.ctrlKey?10:1)}function Xu(){return navigator.maxTouchPoints||"ontouchstart"in
this}function Yu(a,b,f){var g=a.invertX(b[0][0])-f[0][0],h=a.invertX(b[1][0])-f[1][0],k=a.invertY(b[0][1])-f[0][1];b=a.invertY(b[1][1])-f[1][1];return a.translate(h>g?(g+h)/2:Math.min(0,g)||Math.max(0,h),b>k?(k+b)/2:Math.min(0,k)||Math.max(0,b))}var Wn=x(n),Qc=Wn.right,Zu=Wn.left,$u=x(w).center,yb=function(){this._partials=new Float64Array(32);this._n=0};yb.prototype.add=function(a){for(var b=this._partials,f=0,g=0;g<this._n&&32>g;g++){var h=b[g],k=a+h;(a=Math.abs(a)<Math.abs(h)?a-(k-h):h-(k-a))&&
(b[f++]=a);a=k}b[f]=a;this._n=f+1;return this};yb.prototype.valueOf=function(){var a=this._partials,b=this._n,f=0;if(0<b){for(f=a[--b];0<b;){var g=f;var h=a[--b];f=g+h;if(g=h-(f-g))break}0<b&&(0>g&&0>a[b-1]||0<g&&0<a[b-1])&&(h=2*g,g=f+h,h==g-f&&(f=g))}return f};var dd=function(a,b){b=void 0===b?Da:b;var f=$jscomp.construct(Map,[],this.constructor);Object.defineProperties(f,{_intern:{value:new Map},_key:{value:b}});if(null!=a)for(a=$jscomp.makeIterator(a),b=a.next();!b.done;b=a.next()){var g=$jscomp.makeIterator(b.value);
b=g.next().value;g=g.next().value;f.set(b,g)}return f};$jscomp.inherits(dd,Map);dd.prototype.get=function(a){return Map.prototype.get.call(this,la(this,a))};dd.prototype.has=function(a){return Map.prototype.has.call(this,la(this,a))};dd.prototype.set=function(a,b){return Map.prototype.set.call(this,ma(this,a),b)};dd.prototype.delete=function(a){return Map.prototype.delete.call(this,ua(this,a))};var bf=function(a,b){b=void 0===b?Da:b;var f=$jscomp.construct(Set,[],this.constructor);Object.defineProperties(f,
{_intern:{value:new Map},_key:{value:b}});if(null!=a)for(a=$jscomp.makeIterator(a),b=a.next();!b.done;b=a.next())f.add(b.value);return f};$jscomp.inherits(bf,Set);bf.prototype.has=function(a){return Set.prototype.has.call(this,la(this,a))};bf.prototype.add=function(a){return Set.prototype.add.call(this,ma(this,a))};bf.prototype.delete=function(a){return Set.prototype.delete.call(this,ua(this,a))};var vp=Array.prototype.slice,Xg=Math.sqrt(50),Yg=Math.sqrt(10),Zg=Math.sqrt(2),av=pe(Math.random),dh=
Array.prototype.slice,zp={value:function(){}};kf.prototype=id.prototype={constructor:kf,on:function(a,b){var f=this._,g=yp(a+"",f),h,k=-1,p=g.length;if(2>arguments.length)for(;++k<p;){var m;if(m=h=(a=g[k]).type){a:{m=f[h];for(var q=0,B=m.length;q<B;++q)if((h=m[q]).name===a.name){h=h.value;break a}h=void 0}m=h}if(m)return h}else{if(null!=b&&"function"!==typeof b)throw Error("invalid callback: "+b);for(;++k<p;)if(h=(a=g[k]).type)f[h]=Aj(f[h],a.name,b);else if(null==b)for(h in f)f[h]=Aj(f[h],a.name,
null);return this}},copy:function(){var a={},b=this._,f;for(f in b)a[f]=b[f].slice();return new kf(a)},call:function(a,b){if(0<(h=arguments.length-2))for(var f=Array(h),g=0,h,k;g<h;++g)f[g]=arguments[g+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);k=this._[a];g=0;for(h=k.length;g<h;++g)k[g].value.apply(b,f)},apply:function(a,b,f){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);a=this._[a];for(var g=0,h=a.length;g<h;++g)a[g].value.apply(b,f)}};var eh={svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Gp=Array.prototype.find,Kp=Array.prototype.filter;nf.prototype={constructor:nf,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};
Dj.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){a=this._names.indexOf(a);0<=a&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return 0<=this._names.indexOf(a)}};var kh=[null],hb={};Kb.prototype=kd.prototype=(hb.constructor=Kb,hb.select=function(a){"function"!==typeof a&&(a=mf(a));for(var b=this._groups,f=b.length,g=Array(f),h=0;h<f;++h)for(var k=
b[h],p=k.length,m=g[h]=Array(p),q,B,F=0;F<p;++F)(q=k[F])&&(B=a.call(q,q.__data__,F,k))&&("__data__"in q&&(B.__data__=q.__data__),m[F]=B);return new Kb(g,this._parents)},hb.selectAll=function(a){a="function"===typeof a?Ep(a):gh(a);for(var b=this._groups,f=b.length,g=[],h=[],k=0;k<f;++k)for(var p=b[k],m=p.length,q,B=0;B<m;++B)if(q=p[B])g.push(a.call(q,q.__data__,B,p)),h.push(q);return new Kb(g,h)},hb.selectChild=function(a){return this.select(null==a?Hp:Fp("function"===typeof a?a:Bj(a)))},hb.selectChildren=
function(a){return this.selectAll(null==a?Ip:Jp("function"===typeof a?a:Bj(a)))},hb.filter=function(a){"function"!==typeof a&&(a=hh(a));for(var b=this._groups,f=b.length,g=Array(f),h=0;h<f;++h)for(var k=b[h],p=k.length,m=g[h]=[],q,B=0;B<p;++B)(q=k[B])&&a.call(q,q.__data__,B,k)&&m.push(q);return new Kb(g,this._parents)},hb.data=function(a,b){if(!arguments.length)return Array.from(this,Op);var f=b?Np:Mp,g=this._parents,h=this._groups;"function"!==typeof a&&(a=Lp(a));for(var k=h.length,p=Array(k),m=
Array(k),q=Array(k),B=0;B<k;++B){var F=g[B],u=h[B],v=u.length,z=fh(a.call(F,F&&F.__data__,B,g)),C=z.length,r=m[B]=Array(C),t=p[B]=Array(C);v=q[B]=Array(v);f(F,u,r,t,v,z,b);for(u=F=0;F<C;++F)if(z=r[F]){for(F>=u&&(u=F+1);!(v=t[u])&&++u<C;);z._next=v||null}}p=new Kb(p,g);p._enter=m;p._exit=q;return p},hb.enter=function(){return new Kb(this._enter||this._groups.map(Cj),this._parents)},hb.exit=function(){return new Kb(this._exit||this._groups.map(Cj),this._parents)},hb.join=function(a,b,f){var g=this.enter(),
h=this,k=this.exit();g="function"===typeof a?a(g):g.append(a+"");null!=b&&(h=b(h));null==f?k.remove():f(k);return g&&h?g.merge(h).order():h},hb.merge=function(a){if(!(a instanceof Kb))throw Error("invalid merge");var b=this._groups;a=a._groups;for(var f=b.length,g=Math.min(f,a.length),h=Array(f),k=0;k<g;++k)for(var p=b[k],m=a[k],q=p.length,B=h[k]=Array(q),F,u=0;u<q;++u)if(F=p[u]||m[u])B[u]=F;for(;k<f;++k)h[k]=b[k];return new Kb(h,this._parents)},hb.selection=function(){return this},hb.order=function(){for(var a=
this._groups,b=-1,f=a.length;++b<f;)for(var g=a[b],h=g.length-1,k=g[h],p;0<=--h;)if(p=g[h])k&&p.compareDocumentPosition(k)^4&&k.parentNode.insertBefore(p,k),k=p;return this},hb.sort=function(a){function b(u,v){return u&&v?a(u.__data__,v.__data__):!u-!v}a||(a=Pp);for(var f=this._groups,g=f.length,h=Array(g),k=0;k<g;++k){for(var p=f[k],m=p.length,q=h[k]=Array(m),B,F=0;F<m;++F)if(B=p[F])q[F]=B;q.sort(b)}return(new Kb(h,this._parents)).order()},hb.call=function(){var a=arguments[0];arguments[0]=this;
a.apply(null,arguments);return this},hb.nodes=function(){return Array.from(this)},hb.node=function(){for(var a=this._groups,b=0,f=a.length;b<f;++b)for(var g=a[b],h=0,k=g.length;h<k;++h){var p=g[h];if(p)return p}return null},hb.size=function(){for(var a=0,b=$jscomp.makeIterator(this),f=b.next();!f.done;f=b.next())++a;return a},hb.empty=function(){return!this.node()},hb.each=function(a){for(var b=this._groups,f=0,g=b.length;f<g;++f)for(var h=b[f],k=0,p=h.length,m;k<p;++k)(m=h[k])&&a.call(m,m.__data__,
k,h);return this},hb.attr=function(a,b){var f=qe(a);if(2>arguments.length){var g=this.node();return f.local?g.getAttributeNS(f.space,f.local):g.getAttribute(f)}return this.each((null==b?f.local?Rp:Qp:"function"===typeof b?f.local?Vp:Up:f.local?Tp:Sp)(f,b))},hb.style=function(a,b,f){return 1<arguments.length?this.each((null==b?Wp:"function"===typeof b?Yp:Xp)(a,b,null==f?"":f)):jd(this.node(),a)},hb.property=function(a,b){return 1<arguments.length?this.each((null==b?Zp:"function"===typeof b?aq:$p)(a,
b)):this.node()[a]},hb.classed=function(a,b){var f=(a+"").trim().split(/^|\s+/);if(2>arguments.length){for(var g=jh(this.node()),h=-1,k=f.length;++h<k;)if(!g.contains(f[h]))return!1;return!0}return this.each(("function"===typeof b?dq:b?bq:cq)(f,b))},hb.text=function(a){return arguments.length?this.each(null==a?eq:("function"===typeof a?gq:fq)(a)):this.node().textContent},hb.html=function(a){return arguments.length?this.each(null==a?hq:("function"===typeof a?jq:iq)(a)):this.node().innerHTML},hb.raise=
function(){return this.each(kq)},hb.lower=function(){return this.each(lq)},hb.append=function(a){var b="function"===typeof a?a:lf(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},hb.insert=function(a,b){var f="function"===typeof a?a:lf(a),g=null==b?mq:"function"===typeof b?b:mf(b);return this.select(function(){return this.insertBefore(f.apply(this,arguments),g.apply(this,arguments)||null)})},hb.remove=function(){return this.each(nq)},hb.clone=function(a){return this.select(a?
pq:oq)},hb.datum=function(a){return arguments.length?this.property("__data__",a):this.node().__data__},hb.on=function(a,b,f){var g=rq(a+""),h=g.length,k;if(2>arguments.length){var p=this.node().__on;if(p)for(var m=0,q=p.length,B;m<q;++m){var F=0;for(B=p[m];F<h;++F)if((k=g[F]).type===B.type&&k.name===B.name)return B.value}}else{p=b?tq:sq;for(F=0;F<h;++F)this.each(p(g[F],b,f));return this}},hb.dispatch=function(a,b){return this.each(("function"===typeof b?vq:uq)(a,b))},hb[Symbol.iterator]=Hj,hb);var wq=
0;lh.prototype=Ij.prototype={constructor:lh,get:function(a){for(var b=this._;!(b in a);)if(!(a=a.parentNode))return;return a[b]},set:function(a,b){return a[this._]=b},remove:function(a){return this._ in a&&delete a[this._]},toString:function(){return this._}};var Gg=function(a){return function(){return a}};mh.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};var ke=1/.7,Bq=/^#([0-9a-f]{3,8})$/,Cq=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,
Dq=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Eq=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Fq=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Gq=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
Hq=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Oj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,
crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hd(Sc,Tc,{copy:function(a){return Object.assign(new this.constructor,this,a)},displayable:function(){return this.rgb().displayable()},hex:Kj,formatHex:Kj,formatHsl:function(){return Rj(this).formatHsl()},
formatRgb:Lj,toString:Lj});Hd(Ib,Id,re(Sc,{brighter:function(a){a=null==a?ke:Math.pow(ke,a);return new Ib(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Ib(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:Pj,formatHex:Pj,formatRgb:Qj,toString:Qj}));Hd(sc,rf,re(Sc,{brighter:function(a){a=
null==a?ke:Math.pow(ke,a);return new sc(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new sc(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,f=this.l;b=f+(.5>f?f:1-f)*b;f=2*f-b;return new Ib(ph(240<=a?a-240:a+120,f,b),ph(a,f,b),ph(120>a?a+240:a-120,f,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},
formatHsl:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}));var Yj=Math.PI/180,Xj=180/Math.PI,Vj=4/29,Jd=6/29,Uj=3*Jd*Jd,Iq=Jd*Jd*Jd;Hd(lc,sf,re(Sc,{brighter:function(a){return new lc(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new lc(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?
a:a+this.a/500,f=isNaN(this.b)?a:a-this.b/200;b=.96422*sh(b);a=1*sh(a);f=.82521*sh(f);return new Ib(th(3.1338561*b-1.6168667*a-.4906146*f),th(-.9787684*b+1.9161415*a+.033454*f),th(.0719453*b-.2289914*a+1.4052427*f),this.opacity)}}));Hd(tc,tf,re(Sc,{brighter:function(a){return new tc(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new tc(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Tj(this).rgb()}}));var Zj=1.78277*-.29227-.1347134789;Hd(ld,
mc,re(Sc,{brighter:function(a){a=null==a?ke:Math.pow(ke,a);return new ld(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new ld(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*Yj,b=+this.l,f=isNaN(this.s)?0:this.s*b*(1-b),g=Math.cos(a);a=Math.sin(a);return new Ib(255*(b+f*(-.14861*g+1.78277*a)),255*(b+f*(-.29227*g+-.90649*a)),255*(b+1.97294*f*g),this.opacity)}}));var vf=function(a){return function(){return a}},se=
function f(b){function g(k,p){var m=h((k=Id(k)).r,(p=Id(p)).r),q=h(k.g,p.g),B=h(k.b,p.b),F=Fb(k.opacity,p.opacity);return function(u){k.r=m(u);k.g=q(u);k.b=B(u);k.opacity=F(u);return k+""}}var h=Kq(b);g.gamma=f;return g}(1),Xn=ek(bk),bv=ek(ck),wh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xh=new RegExp(wh.source,"g"),kk=180/Math.PI,lj={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Hg,Yn=lk(function(b){b=new ("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(b+"");return b.isIdentity?
lj:jk(b.a,b.b,b.c,b.d,b.e,b.f)},"px, ","px)","deg)"),Zn=lk(function(b){if(null==b)return lj;Hg||(Hg=document.createElementNS("http://www.w3.org/2000/svg","g"));Hg.setAttribute("transform",b);if(!(b=Hg.transform.baseVal.consolidate()))return lj;b=b.matrix;return jk(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),$n=function k(f,g,h){function p(m,q){var B=m[0],F=m[1],u=m[2];m=q[2];var v=q[0]-B,z=q[1]-F,C=v*v+z*z;if(1E-12>C){var r=Math.log(m/u)/f;m=function(E){return[B+E*v,F+E*z,u*Math.exp(f*E*r)]}}else{var t=
Math.sqrt(C);q=(m*m-u*u+h*C)/(2*u*g*t);m=(m*m-u*u-h*C)/(2*m*g*t);var A=Math.log(Math.sqrt(q*q+1)-q);r=(Math.log(Math.sqrt(m*m+1)-m)-A)/f;m=function(E){E*=r;var H=mk(A),M=f*E+A;var U=((M=Math.exp(2*M))-1)/(M+1);var W=A;M=((W=Math.exp(W))-1/W)/2;U=u/(g*t)*(H*U-M);return[B+U*v,F+U*z,u*H/mk(f*E+A)]}}m.duration=1E3*r*f/Math.SQRT2;return m}p.rho=function(m){m=Math.max(.001,+m);var q=m*m;return k(m,q,q*q)};return p}(Math.SQRT2,2,4),cv=nk(uf),dv=nk(Fb),ev=ok(uf),fv=ok(Fb),gv=pk(uf),Ig=pk(Fb),Kd=0,we=0,ye=
0,zf,xe,Af=0,md=0,xf=0,ue="object"===typeof performance&&performance.now?performance:Date,rk="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};ve.prototype=yf.prototype={constructor:ve,restart:function(f,g,h){if("function"!==typeof f)throw new TypeError("callback is not a function");h=(null==h?te():+h)+(null==g?0:+g);this._next||xe===this||(xe?xe._next=this:zf=this,xe=this);this._call=f;this._time=h;yh()},stop:function(){this._call&&
(this._call=null,this._time=Infinity,yh())}};var Qq=id("start","end","cancel","interrupt"),Rq=[],hv=kd.prototype.constructor,ao=0,xd=kd.prototype,lb={};vc.prototype=wk.prototype=(lb.constructor=vc,lb.select=function(f){var g=this._name,h=this._id;"function"!==typeof f&&(f=mf(f));for(var k=this._groups,p=k.length,m=Array(p),q=0;q<p;++q)for(var B=k[q],F=B.length,u=m[q]=Array(F),v,z,C=0;C<F;++C)(v=B[C])&&(z=f.call(v,v.__data__,C,B))&&("__data__"in v&&(z.__data__=v.__data__),u[C]=z,Bf(u[C],g,h,C,u,nc(v,
h)));return new vc(m,this._parents,g,h)},lb.selectAll=function(f){var g=this._name,h=this._id;"function"!==typeof f&&(f=gh(f));for(var k=this._groups,p=k.length,m=[],q=[],B=0;B<p;++B)for(var F=k[B],u=F.length,v,z=0;z<u;++z)if(v=F[z]){for(var C=f.call(v,v.__data__,z,F),r,t=nc(v,h),A=0,E=C.length;A<E;++A)(r=C[A])&&Bf(r,g,h,A,C,t);m.push(C);q.push(v)}return new vc(m,q,g,h)},lb.filter=function(f){"function"!==typeof f&&(f=hh(f));for(var g=this._groups,h=g.length,k=Array(h),p=0;p<h;++p)for(var m=g[p],
q=m.length,B=k[p]=[],F,u=0;u<q;++u)(F=m[u])&&f.call(F,F.__data__,u,m)&&B.push(F);return new vc(k,this._parents,this._name,this._id)},lb.merge=function(f){if(f._id!==this._id)throw Error();var g=this._groups;f=f._groups;for(var h=g.length,k=Math.min(h,f.length),p=Array(h),m=0;m<k;++m)for(var q=g[m],B=f[m],F=q.length,u=p[m]=Array(F),v,z=0;z<F;++z)if(v=q[z]||B[z])u[z]=v;for(;m<h;++m)p[m]=g[m];return new vc(p,this._parents,this._name,this._id)},lb.selection=function(){return new hv(this._groups,this._parents)},
lb.transition=function(){for(var f=this._name,g=this._id,h=++ao,k=this._groups,p=k.length,m=0;m<p;++m)for(var q=k[m],B=q.length,F,u=0;u<B;++u)if(F=q[u]){var v=nc(F,g);Bf(F,f,h,u,q,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new vc(k,this._parents,f,h)},lb.call=xd.call,lb.nodes=xd.nodes,lb.node=xd.node,lb.size=xd.size,lb.empty=xd.empty,lb.each=xd.each,lb.on=function(f,g){var h=this._id;return 2>arguments.length?nc(this.node(),h).on.on(f):this.each(kr(h,f,g))},lb.attr=
function(f,g){var h=qe(f),k="transform"===h?Zn:uk;return this.attrTween(f,"function"===typeof g?(h.local?Zq:Yq)(h,k,Bh(this,"attr."+f,g)):null==g?(h.local?Vq:Uq)(h):(h.local?Xq:Wq)(h,k,g))},lb.attrTween=function(f,g){var h="attr."+f;if(2>arguments.length)return(h=this.tween(h))&&h._value;if(null==g)return this.tween(h,null);if("function"!==typeof g)throw Error();var k=qe(f);return this.tween(h,(k.local?br:cr)(k,g))},lb.style=function(f,g,h){var k="transform"===(f+="")?Yn:uk;return null==g?this.styleTween(f,
mr(f,k)).on("end.style."+f,vk(f)):"function"===typeof g?this.styleTween(f,or(f,k,Bh(this,"style."+f,g))).each(pr(this._id,f)):this.styleTween(f,nr(f,k,g),h).on("end.style."+f,null)},lb.styleTween=function(f,g,h){var k="style."+(f+="");if(2>arguments.length)return(k=this.tween(k))&&k._value;if(null==g)return this.tween(k,null);if("function"!==typeof g)throw Error();return this.tween(k,rr(f,g,null==h?"":h))},lb.text=function(f){return this.tween("text","function"===typeof f?tr(Bh(this,"text",f)):sr(null==
f?"":f+""))},lb.textTween=function(f){var g="text";if(1>arguments.length)return(g=this.tween(g))&&g._value;if(null==f)return this.tween(g,null);if("function"!==typeof f)throw Error();return this.tween(g,vr(f))},lb.remove=function(){return this.on("end.remove",lr(this._id))},lb.tween=function(f,g){var h=this._id;f+="";if(2>arguments.length){h=nc(this.node(),h).tween;for(var k=0,p=h.length,m;k<p;++k)if((m=h[k]).name===f)return m.value;return null}return this.each((null==g?Sq:Tq)(h,f,g))},lb.delay=function(f){var g=
this._id;return arguments.length?this.each(("function"===typeof f?dr:er)(g,f)):nc(this.node(),g).delay},lb.duration=function(f){var g=this._id;return arguments.length?this.each(("function"===typeof f?fr:gr)(g,f)):nc(this.node(),g).duration},lb.ease=function(f){var g=this._id;return arguments.length?this.each(hr(g,f)):nc(this.node(),g).ease},lb.easeVarying=function(f){if("function"!==typeof f)throw Error();return this.each(ir(this._id,f))},lb.end=function(){var f,g,h=this,k=h._id,p=h.size();return new Promise(function(m,
q){var B={value:q},F={value:function(){0===--p&&m()}};h.each(function(){var u=uc(this,k),v=u.on;v!==f&&(g=(f=v).copy(),g._.cancel.push(B),g._.interrupt.push(B),g._.end.push(F));u.on=g});0===p&&m()})},lb[Symbol.iterator]=xd[Symbol.iterator],lb);var iv=function h(g){function k(p){return Math.pow(p,g)}g=+g;k.exponent=h;return k}(3),jv=function k(h){function p(m){return 1-Math.pow(1-m,h)}h=+h;p.exponent=k;return p}(3),bo=function p(k){function m(q){return(1>=(q*=2)?Math.pow(q,k):2-Math.pow(2-q,k))/2}
k=+k;m.exponent=p;return m}(3),zk=Math.PI,co=zk/2,Dh=4/11,xr=6/11,wr=8/11,zr=9/11,yr=10/11,Ar=21/22,Cf=1/Dh/Dh,kv=function m(p){function q(B){return(B=+B)*B*(p*(B-1)+B)}p=+p;q.overshoot=m;return q}(1.70158),lv=function q(m){function B(F){return--F*F*((F+1)*m+F)+1}m=+m;B.overshoot=q;return B}(1.70158),eo=function B(q){function F(u){return(1>(u*=2)?u*u*((q+1)*u-q):(u-=2)*u*((q+1)*u+q)+2)/2}q=+q;F.overshoot=B;return F}(1.70158),le=2*Math.PI,mv=function u(B,F){function v(C){return B*Vc(- --C)*Math.sin((z-
C)/F)}var z=Math.asin(1/(B=Math.max(1,B)))*(F/=le);v.amplitude=function(C){return u(C,F*le)};v.period=function(C){return u(B,C)};return v}(1,.3),fo=function v(F,u){function z(r){return 1-F*Vc(r=+r)*Math.sin((r+C)/u)}var C=Math.asin(1/(F=Math.max(1,F)))*(u/=le);z.amplitude=function(r){return v(r,u*le)};z.period=function(r){return v(F,r)};return z}(1,.3),nv=function z(u,v){function C(t){return(0>(t=2*t-1)?u*Vc(-t)*Math.sin((r-t)/v):2-u*Vc(t)*Math.sin((r+t)/v))/2}var r=Math.asin(1/(u=Math.max(1,u)))*
(v/=le);C.amplitude=function(t){return z(t,v*le)};C.period=function(t){return z(u,t)};return C}(1,.3),ov={time:null,delay:0,duration:250,ease:Ch};kd.prototype.interrupt=function(u){return this.each(function(){nd(this,u)})};kd.prototype.transition=function(u){var v;if(u instanceof vc){var z=u._id;u=u._name}else z=++ao,(v=ov).time=te(),u=null==u?null:u+"";for(var C=this._groups,r=C.length,t=0;t<r;++t)for(var A=C[t],E=A.length,H,M=0;M<E;++M)if(H=A[M]){var U=H,W=u,da=z,ka=M,Y=A,Z;if(!(Z=v))for(Z=void 0;!(Z=
H.__transition)||!(Z=Z[z]);)if(!(H=H.parentNode))throw Error("transition "+z+" not found");Bf(U,W,da,ka,Y,Z)}return new vc(C,this._parents,u,z)};var pv=[null],Ih=function(u){return function(){return u}},Ek={name:"drag"},Hh={name:"space"},Ld={name:"handle"},Md={name:"center"},mj=Math,Dk=mj.abs,Mb=mj.max,Nb=mj.min,Ef={name:"x",handles:["w","e"].map(Ae),input:function(u,v){return null==u?null:[[+u[0],v[0][1]],[+u[1],v[1][1]]]},output:function(u){return u&&[u[0][0],u[1][0]]}},Df={name:"y",handles:["n",
"s"].map(Ae),input:function(u,v){return null==u?null:[[v[0][0],+u[0]],[v[1][0],+u[1]]]},output:function(u){return u&&[u[0][1],u[1][1]]}},qv={name:"xy",handles:"n w e s nw ne sw se".split(" ").map(Ae),input:function(u){return null==u?null:Eh(u)},output:function(u){return u}},Gc={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Fk={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Gk={n:"s",s:"n",
nw:"sw",ne:"se",se:"ne",sw:"nw"},Fr={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Gr={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},Lk=Math.abs,Nd=Math.cos,Od=Math.sin,go=Math.PI,Ff=go/2,Ik=2*go,Hk=Math.max,nj=Math.PI,oj=2*nj,rv=oj-1E-6;Lh.prototype=Wc.prototype={constructor:Lh,moveTo:function(u,v){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+v)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(u,
v){this._+="L"+(this._x1=+u)+","+(this._y1=+v)},quadraticCurveTo:function(u,v,z,C){this._+="Q"+ +u+","+ +v+","+(this._x1=+z)+","+(this._y1=+C)},bezierCurveTo:function(u,v,z,C,r,t){this._+="C"+ +u+","+ +v+","+ +z+","+ +C+","+(this._x1=+r)+","+(this._y1=+t)},arcTo:function(u,v,z,C,r){u=+u;v=+v;z=+z;C=+C;r=+r;var t=this._x1,A=this._y1,E=z-u,H=C-v,M=t-u,U=A-v,W=M*M+U*U;if(0>r)throw Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=u)+","+(this._y1=v);else if(1E-6<W)if(1E-6<Math.abs(U*
E-H*M)&&r){z-=t;C-=A;var da=E*E+H*H;A=Math.sqrt(da);t=Math.sqrt(W);W=r*Math.tan((nj-Math.acos((da+W-(z*z+C*C))/(2*A*t)))/2);t=W/t;W/=A;1E-6<Math.abs(t-1)&&(this._+="L"+(u+t*M)+","+(v+t*U));this._+="A"+r+","+r+",0,0,"+ +(U*z>M*C)+","+(this._x1=u+W*E)+","+(this._y1=v+W*H)}else this._+="L"+(this._x1=u)+","+(this._y1=v)},arc:function(u,v,z,C,r,t){u=+u;v=+v;z=+z;t=!!t;var A=z*Math.cos(C),E=z*Math.sin(C),H=u+A,M=v+E,U=1^t;C=t?C-r:r-C;if(0>z)throw Error("negative radius: "+z);if(null===this._x1)this._+=
"M"+H+","+M;else if(1E-6<Math.abs(this._x1-H)||1E-6<Math.abs(this._y1-M))this._+="L"+H+","+M;z&&(0>C&&(C=C%oj+oj),C>rv?this._+="A"+z+","+z+",0,1,"+U+","+(u-A)+","+(v-E)+"A"+z+","+z+",0,1,"+U+","+(this._x1=H)+","+(this._y1=M):1E-6<C&&(this._+="A"+z+","+z+",0,"+ +(C>=nj)+","+U+","+(this._x1=u+z*Math.cos(r))+","+(this._y1=v+z*Math.sin(r))))},rect:function(u,v,z,C){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+v)+"h"+ +z+"v"+ +C+"h"+-z+"Z"},toString:function(){return this._}};var Or=Array.prototype.slice,
Nk=Array.prototype.slice,Xc=function(u){return function(){return u}},Hc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],ho=Math.pow(2,-52),Jg=new Uint32Array(512),Oc=function(u){var v=u.length>>1;if(0<v&&"number"!==typeof u[0])throw Error("Expected coords to contain numbers.");
this.coords=u;u=Math.max(2*v-5,0);this._triangles=new Uint32Array(3*u);this._halfedges=new Int32Array(3*u);this._hashSize=Math.ceil(Math.sqrt(v));this._hullPrev=new Uint32Array(v);this._hullNext=new Uint32Array(v);this._hullTri=new Uint32Array(v);this._hullHash=(new Int32Array(this._hashSize)).fill(-1);this._ids=new Uint32Array(v);this._dists=new Float64Array(v);this.update()};Oc.from=function(u,v,z){v=void 0===v?Ur:v;z=void 0===z?Vr:z;for(var C=u.length,r=new Float64Array(2*C),t=0;t<C;t++){var A=
u[t];r[2*t]=v(A);r[2*t+1]=z(A)}return new Oc(r)};Oc.prototype.update=function(){for(var u,v,z=this.coords,C=this._hullPrev,r=this._hullNext,t=this._hullTri,A=this._hullHash,E=z.length>>1,H=Infinity,M=Infinity,U=-Infinity,W=-Infinity,da=0;da<E;da++){var ka=z[2*da];u=z[2*da+1];ka<H&&(H=ka);u<M&&(M=u);ka>U&&(U=ka);u>W&&(W=u);this._ids[da]=da}U=(H+U)/2;M=(M+W)/2;H=Infinity;for(W=0;W<E;W++)if(da=Oh(U,M,z[2*W],z[2*W+1]),da<H){var Y=W;H=da}M=z[2*Y];W=z[2*Y+1];H=Infinity;for(U=0;U<E;U++)if(U!==Y&&(da=Oh(M,
W,z[2*U],z[2*U+1]),da<H&&0<da)){var Z=U;H=da}H=z[2*Z];U=z[2*Z+1];u=Infinity;for(da=0;da<E;da++)if(da!==Y&&da!==Z){ka=H-M;var qa=U-W;v=z[2*da]-M;var oa=z[2*da+1]-W,wa=ka*ka+qa*qa,La=v*v+oa*oa,ta=.5/(ka*oa-qa*v);qa=(oa*wa-qa*La)*ta;ka=(ka*La-v*wa)*ta;ka=qa*qa+ka*ka;if(ka<u){var Ia=da;u=ka}}da=z[2*Ia];ka=z[2*Ia+1];if(Infinity===u){for(r=0;r<E;r++)this._dists[r]=z[2*r]-z[0]||z[2*r+1]-z[1];Pd(this._ids,this._dists,0,E-1);r=new Uint32Array(E);C=z=0;for(t=-Infinity;C<E;C++)A=this._ids[C],this._dists[A]>
t&&(r[z++]=A,t=this._dists[A]);this.hull=r.subarray(0,z);this.triangles=new Uint32Array(0);this.halfedges=new Uint32Array(0)}else{Gf(M,W,H,U,da,ka)&&(u=Z,v=H,wa=U,Z=Ia,H=da,U=ka,Ia=u,da=v,ka=wa);v=H-M;u=U-W;wa=da-M;oa=ka-W;La=v*v+u*u;ta=wa*wa+oa*oa;qa=.5/(v*oa-u*wa);u=M+(oa*La-u*ta)*qa;v=W+(v*ta-wa*La)*qa;this._cx=u;this._cy=v;for(wa=0;wa<E;wa++)this._dists[wa]=Oh(z[2*wa],z[2*wa+1],u,v);Pd(this._ids,this._dists,0,E-1);this._hullStart=Y;E=3;r[Y]=C[Ia]=Z;r[Z]=C[Y]=Ia;r[Ia]=C[Z]=Y;t[Y]=0;t[Z]=1;t[Ia]=
2;A.fill(-1);A[this._hashKey(M,W)]=Y;A[this._hashKey(H,U)]=Z;A[this._hashKey(da,ka)]=Ia;this.trianglesLen=0;this._addTriangle(Y,Z,Ia,-1,-1,-1);M=0;for(H=W=void 0;M<this._ids.length;M++)if(U=this._ids[M],da=z[2*U],ka=z[2*U+1],!(0<M&&Math.abs(da-W)<=ho&&Math.abs(ka-H)<=ho)&&(W=da,H=ka,U!==Y&&U!==Z&&U!==Ia)){v=u=0;for(wa=this._hashKey(da,ka);v<this._hashSize&&(u=A[(wa+v)%this._hashSize],-1===u||u===r[u]);v++);v=u=C[u];for(wa=void 0;wa=r[v],!Gf(da,ka,z[2*v],z[2*v+1],z[2*wa],z[2*wa+1]);)if(v=wa,v===u){v=
-1;break}if(-1!==v){La=this._addTriangle(v,U,r[v],-1,-1,t[v]);t[U]=this._legalize(La+2);t[v]=La;E++;for(ta=r[v];wa=r[ta],Gf(da,ka,z[2*ta],z[2*ta+1],z[2*wa],z[2*wa+1]);)La=this._addTriangle(ta,U,wa,t[U],-1,t[ta]),t[U]=this._legalize(La+2),r[ta]=ta,E--,ta=wa;if(v===u)for(;wa=C[v],Gf(da,ka,z[2*wa],z[2*wa+1],z[2*v],z[2*v+1]);)La=this._addTriangle(wa,U,v,-1,t[v],t[wa]),this._legalize(La+2),t[wa]=La,r[v]=v,E--,v=wa;this._hullStart=C[U]=v;r[v]=C[ta]=U;r[U]=ta;A[this._hashKey(da,ka)]=U;A[this._hashKey(z[2*
v],z[2*v+1])]=v}}this.hull=new Uint32Array(E);z=0;for(C=this._hullStart;z<E;z++)this.hull[z]=C,C=r[C];this.triangles=this._triangles.subarray(0,this.trianglesLen);this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}};Oc.prototype._hashKey=function(u,v){var z=Math;u-=this._cx;v-=this._cy;u/=Math.abs(u)+Math.abs(v);return z.floor.call(z,(0<v?3-u:1+u)/4*this._hashSize)%this._hashSize};Oc.prototype._legalize=function(u){for(var v=this._triangles,z=this._halfedges,C=this.coords,r=0,t;;){var A=
z[u],E=u-u%3;t=E+(u+2)%3;if(-1===A){if(0===r)break;u=Jg[--r]}else{var H=A-A%3,M=H+(A+2)%3,U=v[t],W=v[u],da=v[E+(u+1)%3];E=v[M];var ka=C[2*E],Y=C[2*E+1],Z=C[2*U]-ka,qa=C[2*U+1]-Y,oa=C[2*W]-ka;W=C[2*W+1]-Y;ka=C[2*da]-ka;da=C[2*da+1]-Y;Y=oa*oa+W*W;var wa=ka*ka+da*da;if(0>Z*(W*wa-Y*da)-qa*(oa*wa-Y*ka)+(Z*Z+qa*qa)*(oa*da-W*ka)){v[u]=E;v[A]=U;U=z[M];if(-1===U){E=this._hullStart;do{if(this._hullTri[E]===M){this._hullTri[E]=u;break}E=this._hullPrev[E]}while(E!==this._hullStart)}this._link(u,U);this._link(A,
z[t]);this._link(t,M);t=H+(A+1)%3;r<Jg.length&&(Jg[r++]=t)}else{if(0===r)break;u=Jg[--r]}}}return t};Oc.prototype._link=function(u,v){this._halfedges[u]=v;-1!==v&&(this._halfedges[v]=u)};Oc.prototype._addTriangle=function(u,v,z,C,r,t){var A=this.trianglesLen;this._triangles[A]=u;this._triangles[A+1]=v;this._triangles[A+2]=z;this._link(A,C);this._link(A+1,r);this._link(A+2,t);this.trianglesLen+=3;return A};var ec=function(){this._x0=this._y0=this._x1=this._y1=null;this._=""};ec.prototype.moveTo=function(u,
v){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+v)};ec.prototype.closePath=function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")};ec.prototype.lineTo=function(u,v){this._+="L"+(this._x1=+u)+","+(this._y1=+v)};ec.prototype.arc=function(u,v,z){u=+u;v=+v;z=+z;var C=u+z,r=v;if(0>z)throw Error("negative radius");if(null===this._x1)this._+="M"+C+","+r;else if(1E-6<Math.abs(this._x1-C)||1E-6<Math.abs(this._y1-r))this._+="L"+C+","+r;z&&(this._+="A"+z+","+z+",0,1,1,"+
(u-z)+","+v+"A"+z+","+z+",0,1,1,"+(this._x1=C)+","+(this._y1=r))};ec.prototype.rect=function(u,v,z,C){this._+="M"+(this._x0=this._x1=+u)+","+(this._y0=this._y1=+v)+"h"+ +z+"v"+ +C+"h"+-z+"Z"};ec.prototype.value=function(){return this._||null};var yd=function(){this._=[]};yd.prototype.moveTo=function(u,v){this._.push([u,v])};yd.prototype.closePath=function(){this._.push(this._[0].slice())};yd.prototype.lineTo=function(u,v){this._.push([u,v])};yd.prototype.value=function(){return this._.length?this._:
null};var zb=function(u,v){var z=$jscomp.makeIterator(void 0===v?[0,0,960,500]:v);v=z.next().value;var C=z.next().value,r=z.next().value;z=z.next().value;if(!((r=+r)>=(v=+v)&&(z=+z)>=(C=+C)))throw Error("invalid bounds");this.delaunay=u;this._circumcenters=new Float64Array(2*u.points.length);this.vectors=new Float64Array(2*u.points.length);this.xmax=r;this.xmin=v;this.ymax=z;this.ymin=C;this._init()};zb.prototype.update=function(){this.delaunay.update();this._init();return this};zb.prototype._init=
function(){var u=this.delaunay,v=u.points,z=u.hull,C=u.triangles;u=this.vectors;for(var r=this.circumcenters=this._circumcenters.subarray(0,C.length/3*2),t=0,A=0,E=C.length,H,M;t<E;t+=3,A+=2){M=2*C[t];var U=2*C[t+1],W=2*C[t+2];H=v[M];M=v[M+1];var da=v[W],ka=v[W+1];W=v[U]-H;var Y=v[U+1]-M;U=da-H;var Z=ka-M,qa=W*W+Y*Y,oa=U*U+Z*Z,wa=2*(W*Z-Y*U);wa?1E-8>Math.abs(wa)?(H=(H+da)/2,M=(M+ka)/2):(da=1/wa,H+=(Z*qa-Y*oa)*da,M+=(W*oa-U*qa)*da):(H=(H+da)/2-1E8*Z,M=(M+ka)/2+1E8*U);r[A]=H;r[A+1]=M}C=z[z.length-1];
t=4*C;E=v[2*C];M=v[2*C+1];u.fill(0);for(W=0;W<z.length;++W)C=z[W],r=t,A=E,H=M,t=4*C,E=v[2*C],M=v[2*C+1],u[r+2]=u[t]=H-M,u[r+3]=u[t+1]=E-A};zb.prototype.render=function(u){var v=null==u?u=new ec:void 0,z=this.delaunay,C=z.halfedges,r=z.inedges;z=z.hull;var t=this.circumcenters,A=this.vectors;if(1>=z.length)return null;for(var E=0,H=C.length;E<H;++E){var M=C[E];if(!(M<E)){var U=2*Math.floor(E/3);M=2*Math.floor(M/3);this._renderSegment(t[U],t[U+1],t[M],t[M+1],u)}}C=z[z.length-1];for(E=0;E<z.length;++E)M=
C,C=z[E],U=2*Math.floor(r[C]/3),H=t[U],U=t[U+1],M*=4,(M=this._project(H,U,A[M+2],A[M+3]))&&this._renderSegment(H,U,M[0],M[1],u);return v&&v.value()};zb.prototype.renderBounds=function(u){var v=null==u?u=new ec:void 0;u.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin);return v&&v.value()};zb.prototype.renderCell=function(u,v){var z=null==v?v=new ec:void 0;u=this._clip(u);if(null!==u&&u.length){v.moveTo(u[0],u[1]);for(var C=u.length;u[0]===u[C-2]&&u[1]===u[C-1]&&1<C;)C-=2;for(var r=
2;r<C;r+=2)u[r]===u[r-2]&&u[r+1]===u[r-1]||v.lineTo(u[r],u[r+1]);v.closePath();return z&&z.value()}};zb.prototype.cellPolygons=function v(){var z=this,C,r,t,A,E,H;return $jscomp.generator.createGenerator(v,function(M){switch(M.nextAddress){case 1:C=z,r=C.delaunay,t=r.points,A=0,E=t.length/2;case 2:if(!(A<E)){M.jumpTo(0);break}H=z.cellPolygon(A);if(!H){M.jumpTo(3);break}H.index=A;return M.yield(H,6);case 6:case 3:++A,M.jumpTo(2)}})};zb.prototype.cellPolygon=function(v){var z=new yd;this.renderCell(v,
z);return z.value()};zb.prototype._renderSegment=function(v,z,C,r,t){var A=this._regioncode(v,z),E=this._regioncode(C,r);if(0===A&&0===E)t.moveTo(v,z),t.lineTo(C,r);else if(v=this._clipSegment(v,z,C,r,A,E))t.moveTo(v[0],v[1]),t.lineTo(v[2],v[3])};zb.prototype.contains=function(v,z,C){return(z=+z,z!==z)||(C=+C,C!==C)?!1:this.delaunay._step(v,z,C)===v};zb.prototype.neighbors=function C(z){var r=this,t,A,E,H,M,U,W,da,ka;return $jscomp.generator.createGenerator(C,function(Y){switch(Y.nextAddress){case 1:t=
r._clip(z);if(!t){Y.jumpTo(0);break}A=$jscomp.makeIterator(r.delaunay.neighbors(z));E=A.next();case 3:if(E.done){Y.jumpTo(0);break}H=E.value;M=r._clip(H);if(!M){Y.jumpTo(4);break}U=0;W=t.length;case 9:if(!(U<W)){Y.jumpTo(4);break}da=0;ka=M.length;case 10:if(!(da<ka)){U+=2;Y.jumpTo(9);break}if(t[U]!=M[da]||t[U+1]!=M[da+1]||t[(U+2)%W]!=M[(da+ka-2)%ka]||t[(U+3)%W]!=M[(da+ka-1)%ka]){Y.jumpTo(11);break}return Y.yield(H,14);case 14:Y.jumpTo(4);break;case 11:da+=2;Y.jumpTo(10);break;case 4:E=A.next(),Y.jumpTo(3)}})};
zb.prototype._cell=function(z){var C=this.circumcenters,r=this.delaunay,t=r.halfedges,A=r.triangles;r=r.inedges[z];if(-1===r)return null;var E=[],H=r;do{var M=Math.floor(H/3);E.push(C[2*M],C[2*M+1]);H=2===H%3?H-2:H+1;if(A[H]!==z)break;H=t[H]}while(H!==r&&-1!==H);return E};zb.prototype._clip=function(z){if(0===z&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var C=this._cell(z);if(null===C)return null;var r=this.vectors,t=4*z;
return r[t]||r[t+1]?this._clipInfinite(z,C,r[t],r[t+1],r[t+2],r[t+3]):this._clipFinite(z,C)};zb.prototype._clipFinite=function(z,C){for(var r=C.length,t=null,A,E,H=C[r-2],M=C[r-1],U,W=this._regioncode(H,M),da,ka,Y=0;Y<r;Y+=2)if(A=H,E=M,H=C[Y],M=C[Y+1],U=W,W=this._regioncode(H,M),0===U&&0===W)ka=0,t?t.push(H,M):t=[H,M];else{if(0===U){if(null===(A=this._clipSegment(A,E,H,M,U,W)))continue;E=$jscomp.makeIterator(A);E.next();E.next();A=E.next().value;U=E.next().value}else{if(null===(A=this._clipSegment(H,
M,A,E,W,U)))continue;da=$jscomp.makeIterator(A);A=da.next().value;U=da.next().value;E=da.next().value;var Z=da.next().value;da=ka;ka=this._edgecode(E,Z);da&&ka&&this._edge(z,da,ka,t,t.length);t?t.push(E,Z):t=[E,Z]}da=ka;ka=this._edgecode(A,U);da&&ka&&this._edge(z,da,ka,t,t.length);t?t.push(A,U):t=[A,U]}if(t)da=ka,ka=this._edgecode(t[0],t[1]),da&&ka&&this._edge(z,da,ka,t,t.length);else if(this.contains(z,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,
this.xmin,this.ymax,this.xmin,this.ymin];return t};zb.prototype._clipSegment=function(z,C,r,t,A,E){for(;;){if(0===A&&0===E)return[z,C,r,t];if(A&E)return null;var H=A||E;if(H&8){H=z+(r-z)*(this.ymax-C)/(t-C);var M=this.ymax}else H&4?(H=z+(r-z)*(this.ymin-C)/(t-C),M=this.ymin):H&2?(M=C+(t-C)*(this.xmax-z)/(r-z),H=this.xmax):(M=C+(t-C)*(this.xmin-z)/(r-z),H=this.xmin);A?(z=H,C=M,A=this._regioncode(z,C)):(r=H,t=M,E=this._regioncode(r,t))}};zb.prototype._clipInfinite=function(z,C,r,t,A,E){C=Array.from(C);
var H;(H=this._project(C[0],C[1],r,t))&&C.unshift(H[0],H[1]);(H=this._project(C[C.length-2],C[C.length-1],A,E))&&C.push(H[0],H[1]);if(C=this._clipFinite(z,C))for(r=0,t=C.length,E=this._edgecode(C[t-2],C[t-1]);r<t;r+=2)A=E,E=this._edgecode(C[r],C[r+1]),A&&E&&(r=this._edge(z,A,E,C,r),t=C.length);else this.contains(z,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(C=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return C};zb.prototype._edge=function(z,C,r,t,A){for(;C!==
r;){var E=void 0,H=void 0;switch(C){case 5:C=4;continue;case 4:C=6;E=this.xmax;H=this.ymin;break;case 6:C=2;continue;case 2:C=10;E=this.xmax;H=this.ymax;break;case 10:C=8;continue;case 8:C=9;E=this.xmin;H=this.ymax;break;case 9:C=1;continue;case 1:C=5,E=this.xmin,H=this.ymin}t[A]===E&&t[A+1]===H||!this.contains(z,E,H)||(t.splice(A,0,E,H),A+=2)}if(4<t.length)for(z=0;z<t.length;z+=2)if(C=(z+2)%t.length,r=(z+4)%t.length,t[z]===t[C]&&t[C]===t[r]||t[z+1]===t[C+1]&&t[C+1]===t[r+1])t.splice(C,2),z-=2;return A};
zb.prototype._project=function(z,C,r,t){var A=Infinity,E;if(0>t){if(C<=this.ymin)return null;if((E=(this.ymin-C)/t)<A){var H=this.ymin;var M=z+(A=E)*r}}else if(0<t){if(C>=this.ymax)return null;(E=(this.ymax-C)/t)<A&&(H=this.ymax,M=z+(A=E)*r)}if(0<r){if(z>=this.xmax)return null;(E=(this.xmax-z)/r)<A&&(M=this.xmax,H=C+E*t)}else if(0>r){if(z<=this.xmin)return null;(E=(this.xmin-z)/r)<A&&(M=this.xmin,H=C+E*t)}return[M,H]};zb.prototype._edgecode=function(z,C){return(z===this.xmin?1:z===this.xmax?2:0)|
(C===this.ymin?4:C===this.ymax?8:0)};zb.prototype._regioncode=function(z,C){return(z<this.xmin?1:z>this.xmax?2:0)|(C<this.ymin?4:C>this.ymax?8:0)};var sv=2*Math.PI,me=Math.pow,Ob=function(z){this._delaunator=new Oc(z);this.inedges=new Int32Array(z.length/2);this._hullIndex=new Int32Array(z.length/2);this.points=this._delaunator.coords;this._init()};Ob.from=function(z,C,r,t){C=void 0===C?Wr:C;r=void 0===r?Xr:r;if("length"in z){for(var A=z.length,E=new Float64Array(2*A),H=0;H<A;++H){var M=z[H];E[2*
H]=C.call(t,M,H,z);E[2*H+1]=r.call(t,M,H,z)}z=E}else z=Float64Array.from(Ok(z,C,r,t));return new Ob(z)};Ob.prototype.update=function(){this._delaunator.update();this._init();return this};Ob.prototype._init=function(){var z=this._delaunator,C=this.points;if(z.hull&&2<z.hull.length&&Yr(z)){this.collinear=Int32Array.from({length:C.length/2},function(W,da){return da}).sort(function(W,da){return C[2*W]-C[2*da]||C[2*W+1]-C[2*da+1]});z=this.collinear[0];var r=this.collinear[this.collinear.length-1];z=[C[2*
z],C[2*z+1],C[2*r],C[2*r+1]];z=1E-8*Math.hypot(z[3]-z[1],z[2]-z[0]);r=0;for(var t=C.length/2;r<t;++r){var A=Zr(C[2*r],C[2*r+1],z);C[2*r]=A[0];C[2*r+1]=A[1]}this._delaunator=new Oc(C)}else delete this.collinear;A=this.halfedges=this._delaunator.halfedges;z=this.hull=this._delaunator.hull;var E=this.triangles=this._delaunator.triangles;r=this.inedges.fill(-1);t=this._hullIndex.fill(-1);for(var H=0,M=A.length;H<M;++H){var U=E[2===H%3?H-2:H+1];if(-1===A[H]||-1===r[U])r[U]=H}A=0;for(E=z.length;A<E;++A)t[z[A]]=
A;2>=z.length&&0<z.length&&(this.triangles=(new Int32Array(3)).fill(-1),this.halfedges=(new Int32Array(3)).fill(-1),this.triangles[0]=z[0],this.triangles[1]=z[1],this.triangles[2]=z[1],r[z[0]]=1,2===z.length&&(r[z[1]]=0))};Ob.prototype.voronoi=function(z){return new zb(this,z)};Ob.prototype.neighbors=function r(C){var t=this,A,E,H,M,U,W,da,ka,Y,Z,qa,oa;return $jscomp.generator.createGenerator(r,function(wa){switch(wa.nextAddress){case 1:A=t;E=A.inedges;H=A.hull;M=A._hullIndex;U=A.halfedges;W=A.triangles;
da=A.collinear;if(!da){wa.jumpTo(2);break}ka=da.indexOf(C);if(!(0<ka)){wa.jumpTo(3);break}return wa.yield(da[ka-1],3);case 3:if(!(ka<da.length-1)){wa.jumpTo(5);break}return wa.yield(da[ka+1],5);case 5:return wa.return();case 2:Y=E[C];if(-1===Y)return wa.return();Z=Y;qa=-1;case 7:return wa.yield(qa=W[Z],10);case 10:Z=2===Z%3?Z-2:Z+1;if(W[Z]!==C)return wa.return();Z=U[Z];if(-1!==Z){wa.jumpTo(9);break}oa=H[(M[C]+1)%H.length];if(oa===qa){wa.jumpTo(12);break}return wa.yield(oa,12);case 12:return wa.return();
case 9:Z!==Y?wa.jumpTo(7):wa.jumpToEnd()}})};Ob.prototype.find=function(C,r,t){t=void 0===t?0:t;if((C=+C,C!==C)||(r=+r,r!==r))return-1;for(var A=t,E;0<=(E=this._step(t,C,r))&&E!==t&&E!==A;)t=E;return E};Ob.prototype._step=function(C,r,t){var A=this.inedges,E=this.hull,H=this._hullIndex,M=this.halfedges,U=this.triangles,W=this.points;if(-1===A[C]||!W.length)return(C+1)%(W.length>>1);var da=C,ka=me(r-W[2*C],2)+me(t-W[2*C+1],2),Y=A=A[C];do{var Z=U[Y],qa=me(r-W[2*Z],2)+me(t-W[2*Z+1],2);qa<ka&&(ka=qa,
da=Z);Y=2===Y%3?Y-2:Y+1;if(U[Y]!==C)break;Y=M[Y];if(-1===Y){Y=E[(H[C]+1)%E.length];if(Y!==Z&&me(r-W[2*Y],2)+me(t-W[2*Y+1],2)<ka)return Y;break}}while(Y!==A);return da};Ob.prototype.render=function(C){for(var r=null==C?C=new ec:void 0,t=this.points,A=this.halfedges,E=this.triangles,H=0,M=A.length;H<M;++H){var U=A[H];if(!(U<H)){var W=2*E[H];U=2*E[U];C.moveTo(t[W],t[W+1]);C.lineTo(t[U],t[U+1])}}this.renderHull(C);return r&&r.value()};Ob.prototype.renderPoints=function(C,r){r=void 0===r?2:r;for(var t=
null==C?C=new ec:void 0,A=this.points,E=0,H=A.length;E<H;E+=2){var M=A[E],U=A[E+1];C.moveTo(M+r,U);C.arc(M,U,r,0,sv)}return t&&t.value()};Ob.prototype.renderHull=function(C){var r=null==C?C=new ec:void 0,t=this.hull,A=this.points,E=2*t[0],H=t.length;C.moveTo(A[E],A[E+1]);for(E=1;E<H;++E){var M=2*t[E];C.lineTo(A[M],A[M+1])}C.closePath();return r&&r.value()};Ob.prototype.hullPolygon=function(){var C=new yd;this.renderHull(C);return C.value()};Ob.prototype.renderTriangle=function(C,r){var t=null==r?
r=new ec:void 0,A=this.points,E=this.triangles,H=2*E[C*=3],M=2*E[C+1];C=2*E[C+2];r.moveTo(A[H],A[H+1]);r.lineTo(A[M],A[M+1]);r.lineTo(A[C],A[C+1]);r.closePath();return t&&t.value()};Ob.prototype.trianglePolygons=function r(){var t=this,A,E,H,M;return $jscomp.generator.createGenerator(r,function(U){1==U.nextAddress&&(A=t,E=A.triangles,H=0,M=E.length/3);if(3!=U.nextAddress)return H<M?U.yield(t.trianglePolygon(H),3):U.jumpTo(0);++H;return U.jumpTo(2)})};Ob.prototype.trianglePolygon=function(r){var t=
new yd;this.renderTriangle(r,t);return t.value()};var Rk={},Qh={},zd=Hf(","),io=zd.parse,tv=zd.parseRows,uv=zd.format,vv=zd.formatBody,wv=zd.formatRows,xv=zd.formatRow,yv=zd.formatValue,Ad=Hf("\t"),jo=Ad.parse,zv=Ad.parseRows,Av=Ad.format,Bv=Ad.formatBody,Cv=Ad.formatRows,Dv=Ad.formatRow,Ev=Ad.formatValue,Fv=(new Date("2019-01-01T00:00")).getHours()||(new Date("2019-07-01T00:00")).getHours(),Gv=Sk(io),Hv=Sk(jo),Iv=Rh("application/xml"),Jv=Rh("text/html"),Kv=Rh("image/svg+xml"),Yb=Jf.prototype=Sh.prototype;
Yb.copy=function(){var r=new Sh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,A,E;if(!t)return r;if(!t.length)return r._root=Uk(t),r;for(A=[{source:t,target:r._root=Array(4)}];t=A.pop();)for(var H=0;4>H;++H)if(E=t.source[H])E.length?A.push({source:E,target:t.target[H]=Array(4)}):t.target[H]=Uk(E);return r};Yb.add=function(r){var t=+this._x.call(null,r),A=+this._y.call(null,r);return Tk(this.cover(t,A),t,A,r)};Yb.addAll=function(r){var t,A,E=r.length,H,M,U=Array(E),W=Array(E),da=
Infinity,ka=Infinity,Y=-Infinity,Z=-Infinity;for(A=0;A<E;++A)isNaN(H=+this._x.call(null,t=r[A]))||isNaN(M=+this._y.call(null,t))||(U[A]=H,W[A]=M,H<da&&(da=H),H>Y&&(Y=H),M<ka&&(ka=M),M>Z&&(Z=M));if(da>Y||ka>Z)return this;this.cover(da,ka).cover(Y,Z);for(A=0;A<E;++A)Tk(this,U[A],W[A],r[A]);return this};Yb.cover=function(r,t){if(isNaN(r=+r)||isNaN(t=+t))return this;var A=this._x0,E=this._y0,H=this._x1,M=this._y1;if(isNaN(A))H=(A=Math.floor(r))+1,M=(E=Math.floor(t))+1;else{for(var U=H-A||1,W=this._root,
da,ka;A>r||r>=H||E>t||t>=M;)switch(ka=(t<E)<<1|r<A,da=Array(4),da[ka]=W,W=da,U*=2,ka){case 0:H=A+U;M=E+U;break;case 1:A=H-U;M=E+U;break;case 2:H=A+U;E=M-U;break;case 3:A=H-U,E=M-U}this._root&&this._root.length&&(this._root=W)}this._x0=A;this._y0=E;this._x1=H;this._y1=M;return this};Yb.data=function(){var r=[];this.visit(function(t){if(!t.length){do r.push(t.data);while(t=t.next)}});return r};Yb.extent=function(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?
void 0:[[this._x0,this._y0],[this._x1,this._y1]]};Yb.find=function(r,t,A){var E=this._x0,H=this._y0,M,U,W,da,ka=this._x1,Y=this._y1,Z=[],qa=this._root,oa;qa&&Z.push(new Rb(qa,E,H,ka,Y));null==A?A=Infinity:(E=r-A,H=t-A,ka=r+A,Y=t+A,A*=A);for(;oa=Z.pop();)if(!(!(qa=oa.node)||(M=oa.x0)>ka||(U=oa.y0)>Y||(W=oa.x1)<E||(da=oa.y1)<H))if(qa.length){oa=(M+W)/2;var wa=(U+da)/2;Z.push(new Rb(qa[3],oa,wa,W,da),new Rb(qa[2],M,wa,oa,da),new Rb(qa[1],oa,U,W,wa),new Rb(qa[0],M,U,oa,wa));if(qa=(t>=wa)<<1|r>=oa)oa=
Z[Z.length-1],Z[Z.length-1]=Z[Z.length-1-qa],Z[Z.length-1-qa]=oa}else if(oa=r-+this._x.call(null,qa.data),wa=t-+this._y.call(null,qa.data),oa=oa*oa+wa*wa,oa<A){var La=Math.sqrt(A=oa);E=r-La;H=t-La;ka=r+La;Y=t+La;La=qa.data}return La};Yb.remove=function(r){if(isNaN(da=+this._x.call(null,r))||isNaN(ka=+this._y.call(null,r)))return this;var t,A=this._root,E,H=this._x0,M=this._y0,U=this._x1,W=this._y1,da,ka,Y,Z,qa,oa;if(!A)return this;if(A.length)for(;;){(qa=da>=(Y=(H+U)/2))?H=Y:U=Y;(oa=ka>=(Z=(M+W)/
2))?M=Z:W=Z;if(!(t=A,A=A[qa|=oa<<1]))return this;if(!A.length)break;if(t[qa+1&3]||t[qa+2&3]||t[qa+3&3]){var wa=t;var La=qa}}for(;A.data!==r;)if(!(E=A,A=A.next))return this;(r=A.next)&&delete A.next;if(E)return r?E.next=r:delete E.next,this;if(!t)return this._root=r,this;r?t[qa]=r:delete t[qa];(A=t[0]||t[1]||t[2]||t[3])&&A===(t[3]||t[2]||t[1]||t[0])&&!A.length&&(wa?wa[La]=A:this._root=A);return this};Yb.removeAll=function(r){for(var t=0,A=r.length;t<A;++t)this.remove(r[t]);return this};Yb.root=function(){return this._root};
Yb.size=function(){var r=0;this.visit(function(t){if(!t.length){do++r;while(t=t.next)}});return r};Yb.visit=function(r){var t=[],A,E=this._root,H,M,U,W;for(E&&t.push(new Rb(E,this._x0,this._y0,this._x1,this._y1));A=t.pop();)if(!r(E=A.node,M=A.x0,U=A.y0,W=A.x1,A=A.y1)&&E.length){var da=(M+W)/2,ka=(U+A)/2;(H=E[3])&&t.push(new Rb(H,da,ka,W,A));(H=E[2])&&t.push(new Rb(H,M,ka,da,A));(H=E[1])&&t.push(new Rb(H,da,U,W,ka));(H=E[0])&&t.push(new Rb(H,M,U,da,ka))}return this};Yb.visitAfter=function(r){var t=
[],A=[],E;for(this._root&&t.push(new Rb(this._root,this._x0,this._y0,this._x1,this._y1));E=t.pop();){var H=E.node;if(H.length){var M,U=E.x0,W=E.y0,da=E.x1,ka=E.y1,Y=(U+da)/2,Z=(W+ka)/2;(M=H[0])&&t.push(new Rb(M,U,W,Y,Z));(M=H[1])&&t.push(new Rb(M,Y,W,da,Z));(M=H[2])&&t.push(new Rb(M,U,Z,Y,ka));(M=H[3])&&t.push(new Rb(M,Y,Z,da,ka))}A.push(E)}for(;E=A.pop();)r(E.node,E.x0,E.y0,E.x1,E.y1);return this};Yb.x=function(r){return arguments.length?(this._x=r,this):this._x};Yb.y=function(r){return arguments.length?
(this._y=r,this):this._y};var Lv=Math.PI*(3-Math.sqrt(5)),ps=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Ce.prototype=Lf.prototype;Lf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var $k,al={"%":function(r,t){return(100*r).toFixed(t)},b:function(r){return Math.round(r).toString(2)},
c:function(r){return r+""},d:function(r){return 1E21<=Math.abs(r=Math.round(r))?r.toLocaleString("en").replace(/,/g,""):r.toString(10)},e:function(r,t){return r.toExponential(t)},f:function(r,t){return r.toFixed(t)},g:function(r,t){return r.toPrecision(t)},o:function(r){return Math.round(r).toString(8)},p:function(r,t){return Wk(100*r,t)},r:Wk,s:function(r,t){var A=Kf(r,t);if(!A)return r+"";var E=A[0];A=A[1];A=A-($k=3*Math.max(-8,Math.min(8,Math.floor(A/3))))+1;var H=E.length;return A===H?E:A>H?E+
Array(A-H+1).join("0"):0<A?E.slice(0,A)+"."+E.slice(A):"0."+Array(1-A).join("0")+Kf(r,Math.max(0,t+A-1))[0]},X:function(r){return Math.round(r).toString(16).toUpperCase()},x:function(r){return Math.round(r).toString(16)}},bl=Array.prototype.map,Zk="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),Mf;c.format=void 0;c.formatPrefix=void 0;cl({thousands:",",grouping:[3],currency:["$",""]});var gb=Math.PI,qb=gb/2,Of=gb/4,Xb=2*gb,nb=180/gb,Xa=gb/180,ib=Math.abs,Yd=Math.atan,Tb=Math.atan2,Ua=Math.cos,
gg=Math.ceil,ko=Math.exp,$h=Math.hypot,lg=Math.log,zi=Math.pow,Ra=Math.sin,gc=Math.sign||function(r){return 0<r?1:0>r?-1:0},Gb=Math.sqrt,Xd=Math.tan,kl={Feature:function(r,t){Nf(r.geometry,t)},FeatureCollection:function(r,t){r=r.features;for(var A=-1,E=r.length;++A<E;)Nf(r[A].geometry,t)}},il={Sphere:function(r,t){t.sphere()},Point:function(r,t){r=r.coordinates;t.point(r[0],r[1],r[2])},MultiPoint:function(r,t){for(var A=r.coordinates,E=-1,H=A.length;++E<H;)r=A[E],t.point(r[0],r[1],r[2])},LineString:function(r,
t){Th(r.coordinates,t,0)},MultiLineString:function(r,t){r=r.coordinates;for(var A=-1,E=r.length;++A<E;)Th(r[A],t,0)},Polygon:function(r,t){jl(r.coordinates,t)},MultiPolygon:function(r,t){r=r.coordinates;for(var A=-1,E=r.length;++A<E;)jl(r[A],t)},GeometryCollection:function(r,t){r=r.geometries;for(var A=-1,E=r.length;++A<E;)Nf(r[A],t)}},Pf=new yb,Kg=new yb,ml,nl,Uh,Vh,Wh,wc={point:tb,lineStart:tb,lineEnd:tb,polygonStart:function(){Pf=new yb;wc.lineStart=qs;wc.lineEnd=ss},polygonEnd:function(){var r=
+Pf;Kg.add(0>r?Xb+r:r);this.lineStart=this.lineEnd=this.point=tb},sphere:function(){Kg.add(Xb)}},ub,ac,wb,cc,qd,tl,ul,Sd,De,Yc,Ic,Jc={point:Yh,lineStart:ql,lineEnd:rl,polygonStart:function(){Jc.point=sl;Jc.lineStart=ts;Jc.lineEnd=us;De=new yb;wc.polygonStart()},polygonEnd:function(){wc.polygonEnd();Jc.point=Yh;Jc.lineStart=ql;Jc.lineEnd=rl;0>Pf?(ub=-(wb=180),ac=-(cc=90)):1E-6<De?cc=90:-1E-6>De&&(ac=-90);Ic[0]=ub;Ic[1]=wb},sphere:function(){ub=-(wb=180);ac=-(cc=90)}},Fe,Xf,Uf,Vf,Wf,Yf,Zf,$f,ai,bi,
ci,zl,Al,Ub,Vb,Wb,pc={sphere:tb,point:Zh,lineStart:wl,lineEnd:xl,polygonStart:function(){pc.lineStart=ys;pc.lineEnd=As},polygonEnd:function(){pc.lineStart=wl;pc.lineEnd=xl}};ei.invert=ei;var xi=Ll(function(){return!0},function(r){var t=NaN,A=NaN,E=NaN,H;return{lineStart:function(){r.lineStart();H=1},point:function(M,U){var W=0<M?gb:-gb,da=ib(M-t);if(1E-6>ib(da-gb))r.point(t,A=0<(A+U)/2?qb:-qb),r.point(E,A),r.lineEnd(),r.lineStart(),r.point(W,A),r.point(M,A),H=0;else if(E!==W&&da>=gb){1E-6>ib(t-E)&&
(t-=1E-6*E);1E-6>ib(M-W)&&(M-=1E-6*W);da=t;var ka=A,Y=M,Z,qa,oa=Ra(da-Y);A=1E-6<ib(oa)?Yd((Ra(ka)*(qa=Ua(U))*Ra(Y)-Ra(U)*(Z=Ua(ka))*Ra(da))/(Z*qa*oa)):(ka+U)/2;r.point(E,A);r.lineEnd();r.lineStart();r.point(W,A);H=0}r.point(t=M,A=U);E=W},lineEnd:function(){r.lineEnd();t=A=NaN},clean:function(){return 2-H}}},function(r,t,A,E){null==r?(A*=qb,E.point(-gb,A),E.point(0,A),E.point(gb,A),E.point(gb,0),E.point(gb,-A),E.point(0,-A),E.point(-gb,-A),E.point(-gb,0),E.point(-gb,A)):1E-6<ib(r[0]-t[0])?(r=r[0]<
t[0]?gb:-gb,A=A*r/2,E.point(-r,A),E.point(0,A),E.point(r,A)):E.point(t[0],t[1])},[-gb,-qb]),ii,hi,dg,eg,Ud={sphere:tb,point:tb,lineStart:function(){Ud.point=Fs;Ud.lineEnd=Es},lineEnd:tb,polygonStart:tb,polygonEnd:tb},ji=[null,null],Hs={type:"LineString",coordinates:ji},lo={Feature:function(r,t){return fg(r.geometry,t)},FeatureCollection:function(r,t){r=r.features;for(var A=-1,E=r.length;++A<E;)if(fg(r[A].geometry,t))return!0;return!1}},Ol={Sphere:function(){return!0},Point:function(r,t){return 0===
Ge(r.coordinates,t)},MultiPoint:function(r,t){r=r.coordinates;for(var A=-1,E=r.length;++A<E;)if(0===Ge(r[A],t))return!0;return!1},LineString:function(r,t){return Pl(r.coordinates,t)},MultiLineString:function(r,t){r=r.coordinates;for(var A=-1,E=r.length;++A<E;)if(Pl(r[A],t))return!0;return!1},Polygon:function(r,t){return Ql(r.coordinates,t)},MultiPolygon:function(r,t){r=r.coordinates;for(var A=-1,E=r.length;++A<E;)if(Ql(r[A],t))return!0;return!1},GeometryCollection:function(r,t){r=r.geometries;for(var A=
-1,E=r.length;++A<E;)if(fg(r[A],t))return!0;return!1}},Ne=function(r){return r},pj=new yb,mi=new yb,Wl,Xl,ki,li,Kc={point:tb,lineStart:tb,lineEnd:tb,polygonStart:function(){Kc.lineStart=Js;Kc.lineEnd=Ls},polygonEnd:function(){Kc.lineStart=Kc.lineEnd=Kc.point=tb;pj.add(ib(mi));mi=new yb},result:function(){var r=pj/2;pj=new yb;return r}},ne=Infinity,Lg=ne,cf=-ne,Mg=cf,jg={point:function(r,t){r<ne&&(ne=r);r>cf&&(cf=r);t<Lg&&(Lg=t);t>Mg&&(Mg=t)},lineStart:tb,lineEnd:tb,polygonStart:tb,polygonEnd:tb,result:function(){var r=
[[ne,Lg],[cf,Mg]];cf=Mg=-(Lg=ne=Infinity);return r}},ni=0,oi=0,He=0,hg=0,ig=0,Vd=0,pi=0,qi=0,Ie=0,am,bm,xc,yc,hc={point:rd,lineStart:Yl,lineEnd:Zl,polygonStart:function(){hc.lineStart=Os;hc.lineEnd=Qs},polygonEnd:function(){hc.point=rd;hc.lineStart=Yl;hc.lineEnd=Zl},result:function(){var r=Ie?[pi/Ie,qi/Ie]:Vd?[hg/Vd,ig/Vd]:He?[ni/He,oi/He]:[NaN,NaN];ni=oi=He=hg=ig=Vd=pi=qi=Ie=0;return r}};cm.prototype={_radius:4.5,pointRadius:function(r){return this._radius=r,this},polygonStart:function(){this._line=
0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath();this._point=NaN},point:function(r,t){switch(this._point){case 0:this._context.moveTo(r,t);this._point=1;break;case 1:this._context.lineTo(r,t);break;default:this._context.moveTo(r+this._radius,t),this._context.arc(r,t,this._radius,0,Xb)}},result:tb};var ri=new yb,qj,em,fm,Ke,Le,Je={point:tb,lineStart:function(){Je.point=Rs},lineEnd:function(){qj&&dm(em,fm);Je.point=
tb},polygonStart:function(){qj=!0},polygonEnd:function(){qj=null},result:function(){var r=+ri;ri=new yb;return r}};gm.prototype={_radius:4.5,_circle:hm(4.5),pointRadius:function(r){(r=+r)!==this._radius&&(this._radius=r,this._circle=null);return this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z");this._point=NaN},point:function(r,t){switch(this._point){case 0:this._string.push("M",
r,",",t);this._point=1;break;case 1:this._string.push("L",r,",",t);break;default:null==this._circle&&(this._circle=hm(this._radius)),this._string.push("M",r,",",t,this._circle)}},result:function(){if(this._string.length){var r=this._string.join("");this._string=[];return r}return null}};si.prototype={constructor:si,point:function(r,t){this.stream.point(r,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},
polygonEnd:function(){this.stream.polygonEnd()}};var Ss=Ua(30*Xa),Vs=Me({point:function(r,t){this.stream.point(r*Xa,t*Xa)}}),rj=nm(function(r){return Gb(2/(1+r))});rj.invert=Oe(function(r){return 2*Sb(r/2)});var sj=nm(function(r){return(r=gl(r))&&r/Ra(r)});sj.invert=Oe(function(r){return r});Pe.invert=function(r,t){return[r,2*Yd(ko(t))-qb]};Qe.invert=Qe;var mg=Gb(3)/2;Ai.invert=function(r,t){for(var A=t,E=A*A,H=E*E*E,M=0,U;12>M&&!(U=A*(1.340264+-.081106*E+H*(8.93E-4+.003796*E))-t,E=1.340264+3*-.081106*
E+H*(7*8.93E-4+.034164*E),A-=U/=E,E=A*A,H=E*E*E,1E-12>ib(U));++M);return[mg*r*(1.340264+3*-.081106*E+H*(7*8.93E-4+.034164*E))/Ua(A),Sb(Ra(A)/mg)]};Bi.invert=Oe(Yd);Ci.invert=function(r,t){var A=t,E=25;do{var H=A*A;var M=H*H;A-=M=(A*(1.007226+H*(.015085+M*(-.044475+.028874*H-.005916*M)))-t)/(1.007226+H*(.045255+M*(-.311325+.259866*H-.005916*11*M)))}while(1E-6<ib(M)&&0<--E);return[r/(.8707+(H=A*A)*(-.131979+H*(-.013791+H*H*H*(.003971-.001529*H)))),A]};Di.invert=Oe(Sb);Ei.invert=Oe(function(r){return 2*
Yd(r)});Fi.invert=function(r,t){return[-t,2*Yd(ko(r))-qb]};var Pb={};Zd.prototype=Gi.prototype=(Pb.constructor=Zd,Pb.count=function(){return this.eachAfter(ct)},Pb.each=function(r,t){for(var A=-1,E=$jscomp.makeIterator(this),H=E.next();!H.done;H=E.next())r.call(t,H.value,++A,this);return this},Pb.eachAfter=function(r,t){for(var A,E=[this],H=[],M,U,W=-1;A=E.pop();)if(H.push(A),A=A.children)for(M=0,U=A.length;M<U;++M)E.push(A[M]);for(;A=H.pop();)r.call(t,A,++W,this);return this},Pb.eachBefore=function(r,
t){for(var A,E=[this],H,M=-1;A=E.pop();)if(r.call(t,A,++M,this),A=A.children)for(H=A.length-1;0<=H;--H)E.push(A[H]);return this},Pb.find=function(r,t){for(var A=-1,E=$jscomp.makeIterator(this),H=E.next();!H.done;H=E.next())if(H=H.value,r.call(t,H,++A,this))return H},Pb.sum=function(r){return this.eachAfter(function(t){for(var A=+r(t.data)||0,E=t.children,H=E&&E.length;0<=--H;)A+=E[H].value;t.value=A})},Pb.sort=function(r){return this.eachBefore(function(t){t.children&&t.children.sort(r)})},Pb.path=
function(r){var t=this;var A=t;var E=r;if(A!==E){var H=A.ancestors(),M=E.ancestors(),U=null;A=H.pop();for(E=M.pop();A===E;)U=A,A=H.pop(),E=M.pop();A=U}for(E=[t];t!==A;)t=t.parent,E.push(t);for(t=E.length;r!==A;)E.splice(t,0,r),r=r.parent;return E},Pb.ancestors=function(){for(var r=this,t=[r];r=r.parent;)t.push(r);return t},Pb.descendants=function(){return Array.from(this)},Pb.leaves=function(){var r=[];this.eachBefore(function(t){t.children||r.push(t)});return r},Pb.links=function(){var r=this,t=
[];r.each(function(A){A!==r&&t.push({source:A.parent,target:A})});return t},Pb.copy=function(){return Gi(this).eachBefore(ft)},Pb[Symbol.iterator]=rm,Pb);var Mv={depth:-1},mo={};qg.prototype=Object.create(Zd.prototype);var no=(1+Math.sqrt(5))/2,oo=function A(t){function E(H,M,U,W,da){Dm(t,H,M,U,W,da)}E.ratio=function(H){return A(1<(H=+H)?H:1)};return E}(no),Nv=function E(A){function H(M,U,W,da,ka){if((Y=M._squarify)&&Y.ratio===A)for(var Y,Z,qa,oa=-1,wa,La=Y.length,ta=M.value;++oa<La;){M=Y[oa];Z=M.children;
qa=M.value=0;for(wa=Z.length;qa<wa;++qa)M.value+=Z[qa].value;M.dice?Se(M,U,W,da,ta?W+=(ka-W)*M.value/ta:ka):rg(M,U,W,ta?U+=(da-U)*M.value/ta:da,ka);ta-=M.value}else M._squarify=Y=Dm(A,M,U,W,da,ka),Y.ratio=A}H.ratio=function(M){return E(1<(M=+M)?M:1)};return H}(no),Jb=Math.random,Ov=function H(E){function M(U,W){U=null==U?0:+U;W=null==W?1:+W;1===arguments.length?(W=U,U=0):W-=U;return function(){return E()*W+U}}M.source=H;return M}(Jb),Pv=function M(H){function U(W,da){2>arguments.length&&(da=W,W=0);
W=Math.floor(W);da=Math.floor(da)-W;return function(){return Math.floor(H()*da+W)}}U.source=M;return U}(Jb),tj=function U(M){function W(da,ka){var Y,Z;da=null==da?0:+da;ka=null==ka?1:+ka;return function(){if(null!=Y){var qa=Y;Y=null}else{do Y=2*M()-1,qa=2*M()-1,Z=Y*Y+qa*qa;while(!Z||1<Z)}return da+ka*qa*Math.sqrt(-2*Math.log(Z)/Z)}}W.source=U;return W}(Jb),Qv=function W(U){function da(){var Y=ka.apply(this,arguments);return function(){return Math.exp(Y())}}var ka=tj.source(U);da.source=W;return da}(Jb),
po=function da(W){function ka(Y){return 0>=(Y=+Y)?function(){return 0}:function(){for(var Z=0,qa=Y;1<qa;--qa)Z+=W();return Z+qa*W()}}ka.source=da;return ka}(Jb),Rv=function ka(da){function Y(qa){if(0===(qa=+qa))return da;var oa=Z(qa);return function(){return oa()/qa}}var Z=po.source(da);Y.source=ka;return Y}(Jb),Sv=function Y(ka){function Z(qa){return function(){return-Math.log1p(-ka())/qa}}Z.source=Y;return Z}(Jb),Tv=function Z(Y){function qa(oa){if(0>(oa=+oa))throw new RangeError("invalid alpha");
oa=1/-oa;return function(){return Math.pow(1-Y(),oa)}}qa.source=Z;return qa}(Jb),Uv=function qa(Z){function oa(wa){if(0>(wa=+wa)||1<wa)throw new RangeError("invalid p");return function(){return Math.floor(Z()+wa)}}oa.source=qa;return oa}(Jb),qo=function oa(qa){function wa(La){if(0>(La=+La)||1<La)throw new RangeError("invalid p");if(0===La)return function(){return Infinity};if(1===La)return function(){return 1};La=Math.log1p(-La);return function(){return 1+Math.floor(Math.log1p(-qa())/La)}}wa.source=
oa;return wa}(Jb),uj=function wa(oa){function La(Ia,Ta){if(0>(Ia=+Ia))throw new RangeError("invalid k");if(0===Ia)return function(){return 0};Ta=null==Ta?1:+Ta;if(1===Ia)return function(){return-Math.log1p(-oa())*Ta};var Q=(1>Ia?Ia+1:Ia)-1/3,ca=1/(3*Math.sqrt(Q)),Ea=1>Ia?function(){return Math.pow(oa(),1/Ia)}:function(){return 1};return function(){do{do var Na=ta(),Ha=1+ca*Na;while(0>=Ha);Ha*=Ha*Ha;var Pa=1-oa()}while(Pa>=1-.0331*Na*Na*Na*Na&&Math.log(Pa)>=.5*Na*Na+Q*(1-Ha+Math.log(Ha)));return Q*
Ha*Ea()*Ta}}var ta=tj.source(oa)();La.source=wa;return La}(Jb),ro=function La(wa){function ta(Ta,Q){var ca=Ia(Ta),Ea=Ia(Q);return function(){var Na=ca();return 0===Na?0:Na/(Na+Ea())}}var Ia=uj.source(wa);ta.source=La;return ta}(Jb),so=function ta(La){function Ia(ca,Ea){ca=+ca;return 1<=(Ea=+Ea)?function(){return ca}:0>=Ea?function(){return 0}:function(){for(var Na=0,Ha=ca,Pa=Ea;16<Ha*Pa&&16<Ha*(1-Pa);){var Za=Math.floor((Ha+1)*Pa),l=Q(Za,Ha-Za+1)();l<=Pa?(Na+=Za,Ha-=Za,Pa=(Pa-l)/(1-l)):(Ha=Za-1,Pa/=
l)}Za=.5>Pa;Pa=Ta(Za?Pa:1-Pa);l=Pa();for(var D=0;l<=Ha;++D)l+=Pa();return Na+(Za?D:Ha-D)}}var Ta=qo.source(La),Q=ro.source(La);Ia.source=ta;return Ia}(Jb),Vv=function Ia(ta){function Ta(Q,ca,Ea){if(0===(Q=+Q))var Na=function(Ha){return-Math.log(Ha)};else Q=1/Q,Na=function(Ha){return Math.pow(Ha,Q)};ca=null==ca?0:+ca;Ea=null==Ea?1:+Ea;return function(){return ca+Ea*Na(-Math.log1p(-ta()))}}Ta.source=Ia;return Ta}(Jb),Wv=function Ta(Ia){function Q(ca,Ea){ca=null==ca?0:+ca;Ea=null==Ea?1:+Ea;return function(){return ca+
Ea*Math.tan(Math.PI*Ia())}}Q.source=Ta;return Q}(Jb),Xv=function Q(Ta){function ca(Ea,Na){Ea=null==Ea?0:+Ea;Na=null==Na?1:+Na;return function(){var Ha=Ta();return Ea+Na*Math.log(Ha/(1-Ha))}}ca.source=Q;return ca}(Jb),Yv=function ca(Q){function Ea(Pa){return function(){for(var Za=0,l=Pa;16<l;){var D=Math.floor(.875*l),J=Na(D)();if(J>l)return Za+Ha(D-1,l/J)();Za+=D;l-=J}D=-Math.log1p(-Q());for(J=0;D<=l;++J)D-=Math.log1p(-Q());return Za+J}}var Na=uj.source(Q),Ha=so.source(Q);Ea.source=ca;return Ea}(Jb),
to=1/4294967296,Mi=Symbol("implicit"),Gm=[0,1],Ti=new Date,Ui=new Date,be=Db(function(){},function(Q,ca){Q.setTime(+Q+ca)},function(Q,ca){return ca-Q});be.every=function(Q){Q=Math.floor(Q);return isFinite(Q)&&0<Q?1<Q?Db(function(ca){ca.setTime(Math.floor(ca/Q)*Q)},function(ca,Ea){ca.setTime(+ca+Ea*Q)},function(ca,Ea){return(Ea-ca)/Q}):be:null};var uo=be.range,Vi=6048E5,Zm=2592E6,Wi=31536E6,Mc=Db(function(Q){Q.setTime(Q-Q.getMilliseconds())},function(Q,ca){Q.setTime(+Q+1E3*ca)},function(Q,ca){return(ca-
Q)/1E3},function(Q){return Q.getUTCSeconds()}),vo=Mc.range,Ng=Db(function(Q){Q.setTime(Q-Q.getMilliseconds()-1E3*Q.getSeconds())},function(Q,ca){Q.setTime(+Q+6E4*ca)},function(Q,ca){return(ca-Q)/6E4},function(Q){return Q.getMinutes()}),Zv=Ng.range,Og=Db(function(Q){Q.setTime(Q-Q.getMilliseconds()-1E3*Q.getSeconds()-6E4*Q.getMinutes())},function(Q,ca){Q.setTime(+Q+36E5*ca)},function(Q,ca){return(ca-Q)/36E5},function(Q){return Q.getHours()}),$v=Og.range,de=Db(function(Q){return Q.setHours(0,0,0,0)},
function(Q,ca){return Q.setDate(Q.getDate()+ca)},function(Q,ca){return(ca-Q-6E4*(ca.getTimezoneOffset()-Q.getTimezoneOffset()))/864E5},function(Q){return Q.getDate()-1}),aw=de.range,ee=td(0),We=td(1),wo=td(2),xo=td(3),vd=td(4),yo=td(5),zo=td(6),Ao=ee.range,bw=We.range,cw=wo.range,dw=xo.range,ew=vd.range,fw=yo.range,gw=zo.range,Pg=Db(function(Q){Q.setDate(1);Q.setHours(0,0,0,0)},function(Q,ca){Q.setMonth(Q.getMonth()+ca)},function(Q,ca){return ca.getMonth()-Q.getMonth()+12*(ca.getFullYear()-Q.getFullYear())},
function(Q){return Q.getMonth()}),hw=Pg.range,Ac=Db(function(Q){Q.setMonth(0,1);Q.setHours(0,0,0,0)},function(Q,ca){Q.setFullYear(Q.getFullYear()+ca)},function(Q,ca){return ca.getFullYear()-Q.getFullYear()},function(Q){return Q.getFullYear()});Ac.every=function(Q){return isFinite(Q=Math.floor(Q))&&0<Q?Db(function(ca){ca.setFullYear(Math.floor(ca.getFullYear()/Q)*Q);ca.setMonth(0,1);ca.setHours(0,0,0,0)},function(ca,Ea){ca.setFullYear(ca.getFullYear()+Ea*Q)}):null};var iw=Ac.range,Qg=Db(function(Q){Q.setUTCSeconds(0,
0)},function(Q,ca){Q.setTime(+Q+6E4*ca)},function(Q,ca){return(ca-Q)/6E4},function(Q){return Q.getUTCMinutes()}),jw=Qg.range,Rg=Db(function(Q){Q.setUTCMinutes(0,0,0)},function(Q,ca){Q.setTime(+Q+36E5*ca)},function(Q,ca){return(ca-Q)/36E5},function(Q){return Q.getUTCHours()}),kw=Rg.range,ce=Db(function(Q){Q.setUTCHours(0,0,0,0)},function(Q,ca){Q.setUTCDate(Q.getUTCDate()+ca)},function(Q,ca){return(ca-Q)/864E5},function(Q){return Q.getUTCDate()-1}),lw=ce.range,fe=ud(0),Ve=ud(1),Bo=ud(2),Co=ud(3),wd=
ud(4),Do=ud(5),Eo=ud(6),Fo=fe.range,mw=Ve.range,nw=Bo.range,ow=Co.range,pw=wd.range,qw=Do.range,rw=Eo.range,Sg=Db(function(Q){Q.setUTCDate(1);Q.setUTCHours(0,0,0,0)},function(Q,ca){Q.setUTCMonth(Q.getUTCMonth()+ca)},function(Q,ca){return ca.getUTCMonth()-Q.getUTCMonth()+12*(ca.getUTCFullYear()-Q.getUTCFullYear())},function(Q){return Q.getUTCMonth()}),sw=Sg.range,Bc=Db(function(Q){Q.setUTCMonth(0,1);Q.setUTCHours(0,0,0,0)},function(Q,ca){Q.setUTCFullYear(Q.getUTCFullYear()+ca)},function(Q,ca){return ca.getUTCFullYear()-
Q.getUTCFullYear()},function(Q){return Q.getUTCFullYear()});Bc.every=function(Q){return isFinite(Q=Math.floor(Q))&&0<Q?Db(function(ca){ca.setUTCFullYear(Math.floor(ca.getUTCFullYear()/Q)*Q);ca.setUTCMonth(0,1);ca.setUTCHours(0,0,0,0)},function(ca,Ea){ca.setUTCFullYear(ca.getUTCFullYear()+Ea*Q)}):null};var tw=Bc.range,Go=$jscomp.makeIterator(Ym(Bc,Sg,fe,ce,Rg,Qg)),Ho=Go.next().value,Io=Go.next().value,Jo=$jscomp.makeIterator(Ym(Ac,Pg,ee,de,Og,Ng)),Ko=Jo.next().value,Lo=Jo.next().value,an={"-":"",_:" ",
0:"0"},Hb=/^\s*\d+/,xu=/^%/,wu=/[\\^$*+?|[\]().{}]/g,ge;c.timeFormat=void 0;c.timeParse=void 0;c.utcFormat=void 0;c.utcParse=void 0;pn({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
var uw=Date.prototype.toISOString?yu:c.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),vw=+new Date("2000-01-01T00:00:00.000Z")?zu:c.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),ww=eb("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),xw=eb("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),yw=eb("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),zw=eb("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Aw=eb("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Bw=eb("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),
Cw=eb("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Dw=eb("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ew=eb("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Fw=eb("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ob=function(Q){return Xn(Q[Q.length-1])},Mo=Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e",
"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(eb),Gw=ob(Mo),No=Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b",
"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(eb),Hw=ob(No),Oo=Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(eb),
Iw=ob(Oo),Po=Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(eb),Jw=ob(Po),Qo=Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0",
"ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(eb),Kw=ob(Qo),Ro=Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d",
"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(eb),Lw=ob(Ro),So=Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4",
"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(eb),Mw=ob(So),To=Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837",
"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(eb),Nw=ob(To),Uo=Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(eb),
Ow=ob(Uo),Vo=Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(eb),Pw=ob(Vo),Wo=Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b",
"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(eb),Qw=ob(Wo),Xo=Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(eb),Rw=ob(Xo),Yo=Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f",
"fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(eb),Sw=ob(Yo),Zo=Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(eb),
Tw=ob(Zo),$o=Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(eb),Uw=ob($o),ap=Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f",
"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(eb),Vw=ob(ap),bp=Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(eb),Ww=ob(bp),cp=Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8",
"ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(eb),Xw=ob(cp),dp=Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(eb),
Yw=ob(dp),ep=Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(eb),Zw=ob(ep),fp=Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026",
"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(eb),$w=ob(fp),gp=Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(eb),ax=ob(gp),hp=Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45",
"edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(eb),bx=ob(hp),ip=Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(eb),
cx=ob(ip),jp=Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(eb),dx=ob(jp),kp=Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d",
"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(eb),ex=ob(kp),lp=Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(eb),fx=ob(lp),gx=Ig(mc(300,.5,0),mc(-240,.5,1)),hx=Ig(mc(-100,.75,.35),mc(80,
1.5,.8)),ix=Ig(mc(260,.75,.35),mc(80,1.5,.8)),Tg=mc(),Ug=Id(),jx=Math.PI/3,kx=2*Math.PI/3,lx=vg(eb("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),
mx=vg(eb("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),
nx=vg(eb("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),
ox=vg(eb("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),
mp=Math.abs,Qb=Math.atan2,Bd=Math.cos,Hu=Math.max,vj=Math.min,Cc=Math.sin,he=Math.sqrt,bd=Math.PI,wg=bd/2,cd=2*bd,Mu=Array.prototype.slice;yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Q,ca){Q=+Q;ca=+ca;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Q,ca):this._context.moveTo(Q,
ca);break;case 1:this._point=2;default:this._context.lineTo(Q,ca)}}};var Cn=ej(zg);An.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Q,ca){this._curve.point(ca*Math.sin(Q),ca*-Math.cos(Q))}};var wj={draw:function(Q,ca){ca=Math.sqrt(ca/bd);Q.moveTo(ca,0);Q.arc(0,0,ca,0,cd)}},np={draw:function(Q,ca){ca=Math.sqrt(ca/5)/2;Q.moveTo(-3*ca,-ca);Q.lineTo(-ca,
-ca);Q.lineTo(-ca,-3*ca);Q.lineTo(ca,-3*ca);Q.lineTo(ca,-ca);Q.lineTo(3*ca,-ca);Q.lineTo(3*ca,ca);Q.lineTo(ca,ca);Q.lineTo(ca,3*ca);Q.lineTo(-ca,3*ca);Q.lineTo(-ca,ca);Q.lineTo(-3*ca,ca);Q.closePath()}},op=Math.sqrt(1/3),px=2*op,pp={draw:function(Q,ca){ca=Math.sqrt(ca/px);var Ea=ca*op;Q.moveTo(0,-ca);Q.lineTo(Ea,0);Q.lineTo(0,ca);Q.lineTo(-Ea,0);Q.closePath()}},qp=Math.sin(bd/10)/Math.sin(7*bd/10),qx=Math.sin(cd/10)*qp,rx=-Math.cos(cd/10)*qp,rp={draw:function(Q,ca){ca=Math.sqrt(.8908130915292852*
ca);var Ea=qx*ca,Na=rx*ca;Q.moveTo(0,-ca);Q.lineTo(Ea,Na);for(var Ha=1;5>Ha;++Ha){var Pa=cd*Ha/5,Za=Math.cos(Pa);Pa=Math.sin(Pa);Q.lineTo(Pa*ca,-Za*ca);Q.lineTo(Za*Ea-Pa*Na,Pa*Ea+Za*Na)}Q.closePath()}},sp={draw:function(Q,ca){ca=Math.sqrt(ca);var Ea=-ca/2;Q.rect(Ea,Ea,ca,ca)}},xj=Math.sqrt(3),tp={draw:function(Q,ca){ca=-Math.sqrt(ca/(3*xj));Q.moveTo(0,2*ca);Q.lineTo(-xj*ca,-ca);Q.lineTo(xj*ca,-ca);Q.closePath()}},jc=Math.sqrt(3)/2,yj=1/Math.sqrt(12),sx=3*(yj/2+1),up={draw:function(Q,ca){var Ea=Math.sqrt(ca/
sx);ca=Ea/2;var Na=Ea*yj;Ea=Ea*yj+Ea;var Ha=-ca;Q.moveTo(ca,Na);Q.lineTo(ca,Ea);Q.lineTo(Ha,Ea);Q.lineTo(-.5*ca-jc*Na,jc*ca+-.5*Na);Q.lineTo(-.5*ca-jc*Ea,jc*ca+-.5*Ea);Q.lineTo(-.5*Ha-jc*Ea,jc*Ha+-.5*Ea);Q.lineTo(-.5*ca+jc*Na,-.5*Na-jc*ca);Q.lineTo(-.5*ca+jc*Ea,-.5*Ea-jc*ca);Q.lineTo(-.5*Ha+jc*Ea,-.5*Ea-jc*Ha);Q.closePath()}},tx=[wj,np,pp,sp,rp,tp,up];Bg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=
0},lineEnd:function(){switch(this._point){case 3:Ag(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Q,ca){Q=+Q;ca=+ca;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Q,ca):this._context.moveTo(Q,ca);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ag(this,Q,
ca)}this._x0=this._x1;this._x1=Q;this._y0=this._y1;this._y1=ca}};En.prototype={areaStart:ad,areaEnd:ad,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();
break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Q,ca){Q=+Q;ca=+ca;switch(this._point){case 0:this._point=1;this._x2=Q;this._y2=ca;break;case 1:this._point=2;this._x3=Q;this._y3=ca;break;case 2:this._point=3;this._x4=Q;this._y4=ca;this._context.moveTo((this._x0+4*this._x1+Q)/6,(this._y0+4*this._y1+ca)/6);break;default:Ag(this,Q,ca)}this._x0=this._x1;this._x1=Q;this._y0=this._y1;this._y1=ca}};Fn.prototype={areaStart:function(){this._line=
0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Q,ca){Q=+Q;ca=+ca;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Ea=(this._x0+4*this._x1+Q)/6,Na=(this._y0+4*this._y1+ca)/6;this._line?this._context.lineTo(Ea,Na):this._context.moveTo(Ea,Na);break;case 3:this._point=
4;default:Ag(this,Q,ca)}this._x0=this._x1;this._x1=Q;this._y0=this._y1;this._y1=ca}};var Cd=function(Q,ca){this._context=Q;this._x=ca};Cd.prototype.areaStart=function(){this._line=0};Cd.prototype.areaEnd=function(){this._line=NaN};Cd.prototype.lineStart=function(){this._point=0};Cd.prototype.lineEnd=function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line};Cd.prototype.point=function(Q,ca){Q=+Q;ca=+ca;switch(this._point){case 0:this._point=1;this._line?
this._context.lineTo(Q,ca):this._context.moveTo(Q,ca);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+Q)/2,this._y0,this._x0,ca,Q,ca):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+ca)/2,Q,this._y0,Q,ca)}this._x0=Q;this._y0=ca};Gn.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var Q=this._x,ca=this._y,Ea=Q.length-1;if(0<Ea)for(var Na=Q[0],Ha=ca[0],Pa=Q[Ea]-Na,Za=ca[Ea]-Ha,l=-1,D;++l<=Ea;)D=l/Ea,this._basis.point(this._beta*
Q[l]+(1-this._beta)*(Na+D*Pa),this._beta*ca[l]+(1-this._beta)*(Ha+D*Za));this._x=this._y=null;this._basis.lineEnd()},point:function(Q,ca){this._x.push(+Q);this._y.push(+ca)}};var ux=function Ea(ca){function Na(Ha){return 1===ca?new Bg(Ha):new Gn(Ha,ca)}Na.beta=function(Ha){return Ea(+Ha)};return Na}(.85);gj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,
this._y2);break;case 3:Cg(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ca,Ea){ca=+ca;Ea=+Ea;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(ca,Ea):this._context.moveTo(ca,Ea);break;case 1:this._point=2;this._x1=ca;this._y1=Ea;break;case 2:this._point=3;default:Cg(this,ca,Ea)}this._x0=this._x1;this._x1=this._x2;this._x2=ca;this._y0=this._y1;this._y1=this._y2;this._y2=Ea}};var vx=function Na(Ea){function Ha(Pa){return new gj(Pa,
Ea)}Ha.tension=function(Pa){return Na(+Pa)};return Ha}(0);hj.prototype={areaStart:ad,areaEnd:ad,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),
this.point(this._x5,this._y5)}},point:function(Ea,Na){Ea=+Ea;Na=+Na;switch(this._point){case 0:this._point=1;this._x3=Ea;this._y3=Na;break;case 1:this._point=2;this._context.moveTo(this._x4=Ea,this._y4=Na);break;case 2:this._point=3;this._x5=Ea;this._y5=Na;break;default:Cg(this,Ea,Na)}this._x0=this._x1;this._x1=this._x2;this._x2=Ea;this._y0=this._y1;this._y1=this._y2;this._y2=Na}};var wx=function Ha(Na){function Pa(Za){return new hj(Za,Na)}Pa.tension=function(Za){return Ha(+Za)};return Pa}(0);ij.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Na,Ha){Na=+Na;Ha=+Ha;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);
break;case 3:this._point=4;default:Cg(this,Na,Ha)}this._x0=this._x1;this._x1=this._x2;this._x2=Na;this._y0=this._y1;this._y1=this._y2;this._y2=Ha}};var xx=function Pa(Ha){function Za(l){return new ij(l,Ha)}Za.tension=function(l){return Pa(+l)};return Za}(0);Hn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=
0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Ha,Pa){Ha=+Ha;Pa=+Pa;if(this._point){var Za=this._x2-Ha,l=this._y2-Pa;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Za*Za+l*l,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Ha,Pa):this._context.moveTo(Ha,Pa);break;case 1:this._point=
2;break;case 2:this._point=3;default:jj(this,Ha,Pa)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Ha;this._y0=this._y1;this._y1=this._y2;this._y2=Pa}};var yx=function Za(Pa){function l(D){return Pa?new Hn(D,Pa):new gj(D,0)}l.alpha=function(D){return Za(+D)};return l}(.5);In.prototype={areaStart:ad,areaEnd:ad,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=
this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Pa,Za){Pa=+Pa;Za=+Za;if(this._point){var l=this._x2-Pa,D=this._y2-
Za;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(l*l+D*D,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=Pa;this._y3=Za;break;case 1:this._point=2;this._context.moveTo(this._x4=Pa,this._y4=Za);break;case 2:this._point=3;this._x5=Pa;this._y5=Za;break;default:jj(this,Pa,Za)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Pa;this._y0=this._y1;this._y1=this._y2;this._y2=Za}};var zx=function l(Za){function D(J){return Za?
new In(J,Za):new hj(J,0)}D.alpha=function(J){return l(+J)};return D}(.5);Jn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Za,l){Za=+Za;l=+l;if(this._point){var D=this._x2-
Za,J=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(D*D+J*J,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jj(this,Za,l)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Za;this._y0=this._y1;this._y1=this._y2;
this._y2=l}};var Ax=function D(l){function J(I){return l?new Jn(I,l):new ij(I,0)}J.alpha=function(I){return D(+I)};return J}(.5);Kn.prototype={areaStart:ad,areaEnd:ad,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(l,D){l=+l;D=+D;this._point?this._context.lineTo(l,D):(this._point=1,this._context.moveTo(l,D))}};Dg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=
this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kj(this,this._t0,Mn(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(l,D){var J=NaN;l=+l;D=+D;if(l!==this._x1||D!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(l,D):this._context.moveTo(l,D);break;case 1:this._point=2;break;case 2:this._point=3;kj(this,
Mn(this,J=Ln(this,l,D)),J);break;default:kj(this,this._t0,J=Ln(this,l,D))}this._x0=this._x1;this._x1=l;this._y0=this._y1;this._y1=D;this._t0=J}}};(Nn.prototype=Object.create(Dg.prototype)).point=function(l,D){Dg.prototype.point.call(this,D,l)};On.prototype={moveTo:function(l,D){this._context.moveTo(D,l)},closePath:function(){this._context.closePath()},lineTo:function(l,D){this._context.lineTo(D,l)},bezierCurveTo:function(l,D,J,I,K,N){this._context.bezierCurveTo(D,l,I,J,N,K)}};Pn.prototype={areaStart:function(){this._line=
0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var l=this._x,D=this._y,J=l.length;if(J)if(this._line?this._context.lineTo(l[0],D[0]):this._context.moveTo(l[0],D[0]),2===J)this._context.lineTo(l[1],D[1]);else for(var I=Qn(l),K=Qn(D),N=0,aa=1;aa<J;++N,++aa)this._context.bezierCurveTo(I[0][N],K[0][N],I[1][N],K[1][N],l[aa],D[aa]);(this._line||0!==this._line&&1===J)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(l,
D){this._x.push(+l);this._y.push(+D)}};Eg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(l,D){l=+l;D=+D;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(l,
D):this._context.moveTo(l,D);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,D),this._context.lineTo(l,D);else{var J=this._x*(1-this._t)+l*this._t;this._context.lineTo(J,this._y);this._context.lineTo(J,D)}}this._x=l;this._y=D}};var Vg=function(l){return function(){return l}};Nc.prototype={constructor:Nc,scale:function(l){return 1===l?this:new Nc(this.k*l,this.x,this.y)},translate:function(l,D){return 0===l&0===D?this:new Nc(this.k,this.x+this.k*l,this.y+this.k*D)},apply:function(l){return[l[0]*
this.k+this.x,l[1]*this.k+this.y]},applyX:function(l){return l*this.k+this.x},applyY:function(l){return l*this.k+this.y},invert:function(l){return[(l[0]-this.x)/this.k,(l[1]-this.y)/this.k]},invertX:function(l){return(l-this.x)/this.k},invertY:function(l){return(l-this.y)/this.k},rescaleX:function(l){return l.copy().domain(l.range().map(this.invertX,this).map(l.invert,l))},rescaleY:function(l){return l.copy().domain(l.range().map(this.invertY,this).map(l.invert,l))},toString:function(){return"translate("+
this.x+","+this.y+") scale("+this.k+")"}};var Fg=new Nc(1,0,0);Un.prototype=Nc.prototype;c.Adder=yb;c.Delaunay=Ob;c.FormatSpecifier=Lf;c.InternMap=dd;c.InternSet=bf;c.Voronoi=zb;c.active=function(l,D){var J=l.__transition,I,K;if(J)for(K in D=null==D?null:D+"",J)if(1<(I=J[K]).state&&I.name===D)return new vc([[l]],pv,D,+K);return null};c.arc=function(){function l(){var ja,ra=+D.apply(this,arguments),xa=+J.apply(this,arguments),V=N.apply(this,arguments)-wg,ea=aa.apply(this,arguments)-wg,sa=mp(ea-V),
fa=ea>V;ha||(ha=ja=Wc());if(xa<ra){var za=xa;xa=ra;ra=za}if(1E-12<xa)if(sa>cd-1E-12)ha.moveTo(xa*Bd(V),xa*Cc(V)),ha.arc(0,0,xa,V,ea,!fa),1E-12<ra&&(ha.moveTo(ra*Bd(ea),ra*Cc(ea)),ha.arc(0,0,ra,ea,V,fa));else{var na=V,Aa=ea;za=V;var Ba=ea,pa=sa,Ga=sa,Qa=X.apply(this,arguments)/2,Wa=1E-12<Qa&&(K?+K.apply(this,arguments):he(ra*ra+xa*xa)),fb=vj(mp(xa-ra)/2,+I.apply(this,arguments)),bb=fb,pb=fb;if(1E-12<Wa){var rb=xn(Wa/ra*Cc(Qa));Qa=xn(Wa/xa*Cc(Qa));1E-12<(pa-=2*rb)?(rb*=fa?1:-1,za+=rb,Ba-=rb):(pa=0,
za=Ba=(V+ea)/2);1E-12<(Ga-=2*Qa)?(Qa*=fa?1:-1,na+=Qa,Aa-=Qa):(Ga=0,na=Aa=(V+ea)/2)}V=xa*Bd(na);ea=xa*Cc(na);rb=ra*Bd(Ba);Qa=ra*Cc(Ba);if(1E-12<fb){var ya=xa*Bd(Aa),Sa=xa*Cc(Aa),Ca=ra*Bd(za),Oa=ra*Cc(za);if(sa=sa<bd){var Ja=Ca-V;sa=Oa-ea;Wa=rb-ya;var db=Qa-Sa,$a=db*Ja-Wa*sa;1E-12>$a*$a?Ja=void 0:($a=(Wa*(ea-Sa)-db*(V-ya))/$a,Ja=[V+$a*Ja,ea+$a*sa]);sa=Ja}sa&&(bb=V-Ja[0],pb=ea-Ja[1],sa=ya-Ja[0],Wa=Sa-Ja[1],bb=(bb*sa+pb*Wa)/(he(bb*bb+pb*pb)*he(sa*sa+Wa*Wa)),pb=1/Cc((1<bb?0:-1>bb?bd:Math.acos(bb))/2),
Ja=he(Ja[0]*Ja[0]+Ja[1]*Ja[1]),bb=vj(fb,(ra-Ja)/(pb-1)),pb=vj(fb,(xa-Ja)/(pb+1)))}1E-12<Ga?1E-12<pb?(na=xg(Ca,Oa,V,ea,xa,pb,fa),Aa=xg(ya,Sa,rb,Qa,xa,pb,fa),ha.moveTo(na.cx+na.x01,na.cy+na.y01),pb<fb?ha.arc(na.cx,na.cy,pb,Qb(na.y01,na.x01),Qb(Aa.y01,Aa.x01),!fa):(ha.arc(na.cx,na.cy,pb,Qb(na.y01,na.x01),Qb(na.y11,na.x11),!fa),ha.arc(0,0,xa,Qb(na.cy+na.y11,na.cx+na.x11),Qb(Aa.cy+Aa.y11,Aa.cx+Aa.x11),!fa),ha.arc(Aa.cx,Aa.cy,pb,Qb(Aa.y11,Aa.x11),Qb(Aa.y01,Aa.x01),!fa))):(ha.moveTo(V,ea),ha.arc(0,0,xa,
na,Aa,!fa)):ha.moveTo(V,ea);1E-12<ra&&1E-12<pa?1E-12<bb?(na=xg(rb,Qa,ya,Sa,ra,-bb,fa),Aa=xg(V,ea,Ca,Oa,ra,-bb,fa),ha.lineTo(na.cx+na.x01,na.cy+na.y01),bb<fb?ha.arc(na.cx,na.cy,bb,Qb(na.y01,na.x01),Qb(Aa.y01,Aa.x01),!fa):(ha.arc(na.cx,na.cy,bb,Qb(na.y01,na.x01),Qb(na.y11,na.x11),!fa),ha.arc(0,0,ra,Qb(na.cy+na.y11,na.cx+na.x11),Qb(Aa.cy+Aa.y11,Aa.cx+Aa.x11),fa),ha.arc(Aa.cx,Aa.cy,bb,Qb(Aa.y11,Aa.x11),Qb(Aa.y01,Aa.x01),!fa))):ha.arc(0,0,ra,Ba,za,fa):ha.lineTo(rb,Qa)}else ha.moveTo(0,0);ha.closePath();
if(ja)return ha=null,ja+""||null}var D=Cu,J=Du,I=cb(0),K=null,N=Eu,aa=Fu,X=Gu,ha=null;l.centroid=function(){var ja=(+D.apply(this,arguments)+ +J.apply(this,arguments))/2,ra=(+N.apply(this,arguments)+ +aa.apply(this,arguments))/2-bd/2;return[Bd(ra)*ja,Cc(ra)*ja]};l.innerRadius=function(ja){return arguments.length?(D="function"===typeof ja?ja:cb(+ja),l):D};l.outerRadius=function(ja){return arguments.length?(J="function"===typeof ja?ja:cb(+ja),l):J};l.cornerRadius=function(ja){return arguments.length?
(I="function"===typeof ja?ja:cb(+ja),l):I};l.padRadius=function(ja){return arguments.length?(K=null==ja?null:"function"===typeof ja?ja:cb(+ja),l):K};l.startAngle=function(ja){return arguments.length?(N="function"===typeof ja?ja:cb(+ja),l):N};l.endAngle=function(ja){return arguments.length?(aa="function"===typeof ja?ja:cb(+ja),l):aa};l.padAngle=function(ja){return arguments.length?(X="function"===typeof ja?ja:cb(+ja),l):X};l.context=function(ja){return arguments.length?(ha=null==ja?null:ja,l):ha};
return l};c.area=zn;c.areaRadial=Dn;c.ascending=n;c.autoType=function(l){for(var D in l){var J=l[D].trim(),I;if(J)if("true"===J)J=!0;else if("false"===J)J=!1;else if("NaN"===J)J=NaN;else if(isNaN(I=+J))if(I=J.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Fv&&I[4]&&!I[7]&&(J=J.replace(/-/g,"/").replace(/T/," ")),J=new Date(J);else continue;else J=I;else J=null;l[D]=J}return l};c.axisBottom=function(l){return jf(3,l)};c.axisLeft=function(l){return jf(4,
l)};c.axisRight=function(l){return jf(2,l)};c.axisTop=function(l){return jf(1,l)};c.bin=ed;c.bisect=Qc;c.bisectCenter=$u;c.bisectLeft=Zu;c.bisectRight=Qc;c.bisector=x;c.blob=function(l,D){return fetch(l,D).then(as)};c.brush=function(){return Gh(qv)};c.brushSelection=function(l){return(l=l.__brush)?l.dim.output(l.selection):null};c.brushX=function(){return Gh(Ef)};c.brushY=function(){return Gh(Df)};c.buffer=function(l,D){return fetch(l,D).then(bs)};c.chord=function(){return Kh(!1,!1)};c.chordDirected=
function(){return Kh(!0,!1)};c.chordTranspose=function(){return Kh(!1,!0)};c.cluster=function(){function l(N){var aa,X=0;N.eachAfter(function(V){var ea=V.children;if(ea){var sa=ea.reduce(Zs,0)/ea.length;V.x=sa;V.y=1+ea.reduce($s,0)}else V.x=aa?X+=D(V,aa):0,V.y=0,aa=V});var ha=at(N),ja=bt(N),ra=ha.x-D(ha,ja)/2,xa=ja.x+D(ja,ha)/2;return N.eachAfter(K?function(V){V.x=(V.x-N.x)*J;V.y=(N.y-V.y)*I}:function(V){V.x=(V.x-ra)/(xa-ra)*J;V.y=(1-(N.y?V.y/N.y:1))*I})}var D=Ys,J=1,I=1,K=!1;l.separation=function(N){return arguments.length?
(D=N,l):D};l.size=function(N){return arguments.length?(K=!1,J=+N[0],I=+N[1],l):K?null:[J,I]};l.nodeSize=function(N){return arguments.length?(K=!0,J=+N[0],I=+N[1],l):K?[J,I]:null};return l};c.color=Tc;c.contourDensity=function(){function l(na){var Aa=new Float32Array(sa*fa),Ba=new Float32Array(sa*fa);na.forEach(function(pa,Ga,Qa){var Wa=+aa(pa,Ga,Qa)+ea>>V,fb=+X(pa,Ga,Qa)+ea>>V;pa=+ha(pa,Ga,Qa);0<=Wa&&Wa<sa&&0<=fb&&fb<fa&&(Aa[Wa+fb*sa]+=pa)});Mh({width:sa,height:fa,data:Aa},{width:sa,height:fa,data:Ba},
xa>>V);Nh({width:sa,height:fa,data:Ba},{width:sa,height:fa,data:Aa},xa>>V);Mh({width:sa,height:fa,data:Aa},{width:sa,height:fa,data:Ba},xa>>V);Nh({width:sa,height:fa,data:Ba},{width:sa,height:fa,data:Aa},xa>>V);Mh({width:sa,height:fa,data:Aa},{width:sa,height:fa,data:Ba},xa>>V);Nh({width:sa,height:fa,data:Ba},{width:sa,height:fa,data:Aa},xa>>V);na=za(Aa);Array.isArray(na)||(Ba=Ec(Aa),na=sb(0,Ba,na),na=Zb(0,Math.floor(Ba/na)*na,na),na.shift());return Mk().thresholds(na).size([sa,fa])(Aa).map(D)}function D(na){na.value*=
Math.pow(2,-2*V);na.coordinates.forEach(J);return na}function J(na){na.forEach(I)}function I(na){na.forEach(K)}function K(na){na[0]=na[0]*Math.pow(2,V)-ea;na[1]=na[1]*Math.pow(2,V)-ea}function N(){ea=3*xa;sa=ja+2*ea>>V;fa=ra+2*ea>>V;return l}var aa=Rr,X=Sr,ha=Tr,ja=960,ra=500,xa=20,V=2,ea=3*xa,sa=ja+2*ea>>V,fa=ra+2*ea>>V,za=Xc(20);l.x=function(na){return arguments.length?(aa="function"===typeof na?na:Xc(+na),l):aa};l.y=function(na){return arguments.length?(X="function"===typeof na?na:Xc(+na),l):X};
l.weight=function(na){return arguments.length?(ha="function"===typeof na?na:Xc(+na),l):ha};l.size=function(na){if(!arguments.length)return[ja,ra];var Aa=+na[0],Ba=+na[1];if(!(0<=Aa&&0<=Ba))throw Error("invalid size");return ja=Aa,ra=Ba,N()};l.cellSize=function(na){if(!arguments.length)return 1<<V;if(!(1<=(na=+na)))throw Error("invalid cell size");return V=Math.floor(Math.log(na)/Math.LN2),N()};l.thresholds=function(na){return arguments.length?(za="function"===typeof na?na:Array.isArray(na)?Xc(Nk.call(na)):
Xc(na),l):za};l.bandwidth=function(na){if(!arguments.length)return Math.sqrt(xa*(xa+1));if(!(0<=(na=+na)))throw Error("invalid bandwidth");return xa=Math.round((Math.sqrt(4*na*na+1)-1)/2),N()};return l};c.contours=Mk;c.count=L;c.create=function(l){return Lb(lf(l).call(document.documentElement))};c.creator=lf;c.cross=function(l){for(var D=[],J=0;J<arguments.length;++J)D[J-0]=arguments[J];var I=D;D="function"===typeof I[I.length-1]&&R(I.pop());I=I.map(T);J=I.map(P);var K=I.length-1,N=Array(K+1).fill(0),
aa=[];if(0>K||J.some(G))return aa;for(;;){aa.push(N.map(function(ha,ja){return I[ja][ha]}));for(var X=K;++N[X]===J[X];){if(0===X)return D?aa.map(D):aa;N[X--]=0}}};c.csv=Gv;c.csvFormat=uv;c.csvFormatBody=vv;c.csvFormatRow=xv;c.csvFormatRows=wv;c.csvFormatValue=yv;c.csvParse=io;c.csvParseRows=tv;c.cubehelix=mc;c.cumsum=function(l,D){var J=0,I=0;return Float64Array.from(l,void 0===D?function(K){return J+=+K||0}:function(K){return J+=+D(K,I++,l)||0})};c.curveBasis=function(l){return new Bg(l)};c.curveBasisClosed=
function(l){return new En(l)};c.curveBasisOpen=function(l){return new Fn(l)};c.curveBumpX=function(l){return new Cd(l,!0)};c.curveBumpY=function(l){return new Cd(l,!1)};c.curveBundle=ux;c.curveCardinal=vx;c.curveCardinalClosed=wx;c.curveCardinalOpen=xx;c.curveCatmullRom=yx;c.curveCatmullRomClosed=zx;c.curveCatmullRomOpen=Ax;c.curveLinear=zg;c.curveLinearClosed=function(l){return new Kn(l)};c.curveMonotoneX=function(l){return new Dg(l)};c.curveMonotoneY=function(l){return new Nn(l)};c.curveNatural=
function(l){return new Pn(l)};c.curveStep=function(l){return new Eg(l,.5)};c.curveStepAfter=function(l){return new Eg(l,1)};c.curveStepBefore=function(l){return new Eg(l,0)};c.descending=function(l,D){return D<l?-1:D>l?1:D>=l?0:NaN};c.deviation=ba;c.difference=function(l,D){for(var J=[],I=1;I<arguments.length;++I)J[I-1]=arguments[I];l=new Set(l);J=$jscomp.makeIterator(J);for(I=J.next();!I.done;I=J.next()){I=$jscomp.makeIterator(I.value);for(var K=I.next();!K.done;K=I.next())l.delete(K.value)}return l};
c.disjoint=function(l,D){var J=D[Symbol.iterator]();D=new Set;var I={};l=$jscomp.makeIterator(l);for(var K=l.next();!K.done;I={$jscomp$loop$prop$value$332:I.$jscomp$loop$prop$value$332,$jscomp$loop$prop$done$333:I.$jscomp$loop$prop$done$333},K=l.next()){K=K.value;if(D.has(K))return!1;I.$jscomp$loop$prop$value$332=void 0;for(I.$jscomp$loop$prop$done$333=void 0;function(N){return function(){var aa=J.next();N.$jscomp$loop$prop$value$332=aa.value;N.$jscomp$loop$prop$done$333=aa.done;return aa}}(I)()&&
!I.$jscomp$loop$prop$done$333;){if(Object.is(K,I.$jscomp$loop$prop$value$332))return!1;D.add(I.$jscomp$loop$prop$value$332)}}return!0};c.dispatch=id;c.drag=function(){function l(pa){pa.on("mousedown.drag",D).filter(xa).on("touchstart.drag",K).on("touchmove.drag",N).on("touchend.drag touchcancel.drag",aa).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function D(pa,Ga){!Aa&&ha.call(this,pa,Ga)&&(Ga=X(this,ja.call(this,pa,Ga),pa,Ga,"mouse"))&&(Lb(pa.view).on("mousemove.drag",
J,!0).on("mouseup.drag",I,!0),of(pa.view),pa.stopImmediatePropagation(),na=!1,fa=pa.clientX,za=pa.clientY,Ga("start",pa))}function J(pa){Gd(pa);if(!na){var Ga=pa.clientX-fa,Qa=pa.clientY-za;na=Ga*Ga+Qa*Qa>Ba}V.mouse("drag",pa)}function I(pa){Lb(pa.view).on("mousemove.drag mouseup.drag",null);pf(pa.view,na);Gd(pa);V.mouse("end",pa)}function K(pa,Ga){if(ha.call(this,pa,Ga)){var Qa=pa.changedTouches,Wa=ja.call(this,pa,Ga),fb=Qa.length,bb,pb;for(bb=0;bb<fb;++bb)if(pb=X(this,Wa,pa,Ga,Qa[bb].identifier,
Qa[bb]))pa.stopImmediatePropagation(),pb("start",pa,Qa[bb])}}function N(pa){var Ga=pa.changedTouches,Qa=Ga.length,Wa,fb;for(Wa=0;Wa<Qa;++Wa)if(fb=V[Ga[Wa].identifier])Gd(pa),fb("drag",pa,Ga[Wa])}function aa(pa){var Ga=pa.changedTouches,Qa=Ga.length,Wa,fb;Aa&&clearTimeout(Aa);Aa=setTimeout(function(){Aa=null},500);for(Wa=0;Wa<Qa;++Wa)if(fb=V[Ga[Wa].identifier])pa.stopImmediatePropagation(),fb("end",pa,Ga[Wa])}function X(pa,Ga,Qa,Wa,fb,bb){var pb=ea.copy(),rb=bc(bb||Qa,Ga),ya;if(null!=(ya=ra.call(pa,
new mh("beforestart",{sourceEvent:Qa,target:l,identifier:fb,active:sa,x:rb[0],y:rb[1],dx:0,dy:0,dispatch:pb}),Wa))){var Sa=ya.x-rb[0]||0;var Ca=ya.y-rb[1]||0;return function kb(Ja,db,$a){var Ab=rb;switch(Ja){case "start":V[fb]=kb;var xb=sa++;break;case "end":delete V[fb],--sa;case "drag":rb=bc($a||db,Ga),xb=sa}pb.call(Ja,pa,new mh(Ja,{sourceEvent:db,subject:ya,target:l,identifier:fb,active:xb,x:rb[0]+Sa,y:rb[1]+Ca,dx:rb[0]-Ab[0],dy:rb[1]-Ab[1],dispatch:pb}),Wa)}}}var ha=xq,ja=yq,ra=zq,xa=Aq,V={},
ea=id("start","drag","end"),sa=0,fa,za,na,Aa,Ba=0;l.filter=function(pa){return arguments.length?(ha="function"===typeof pa?pa:Gg(!!pa),l):ha};l.container=function(pa){return arguments.length?(ja="function"===typeof pa?pa:Gg(pa),l):ja};l.subject=function(pa){return arguments.length?(ra="function"===typeof pa?pa:Gg(pa),l):ra};l.touchable=function(pa){return arguments.length?(xa="function"===typeof pa?pa:Gg(!!pa),l):xa};l.on=function(){var pa=ea.on.apply(ea,arguments);return pa===ea?l:pa};l.clickDistance=
function(pa){return arguments.length?(Ba=(pa=+pa)*pa,l):Math.sqrt(Ba)};return l};c.dragDisable=of;c.dragEnable=pf;c.dsv=function(l,D,J,I){3===arguments.length&&"function"===typeof J&&(I=J,J=void 0);var K=Hf(l);return If(D,J).then(function(N){return K.parse(N,I)})};c.dsvFormat=Hf;c.easeBack=eo;c.easeBackIn=kv;c.easeBackInOut=eo;c.easeBackOut=lv;c.easeBounce=ze;c.easeBounceIn=function(l){return 1-ze(1-l)};c.easeBounceInOut=function(l){return(1>=(l*=2)?1-ze(1-l):ze(l-1)+1)/2};c.easeBounceOut=ze;c.easeCircle=
Bk;c.easeCircleIn=function(l){return 1-Math.sqrt(1-l*l)};c.easeCircleInOut=Bk;c.easeCircleOut=function(l){return Math.sqrt(1- --l*l)};c.easeCubic=Ch;c.easeCubicIn=function(l){return l*l*l};c.easeCubicInOut=Ch;c.easeCubicOut=function(l){return--l*l*l+1};c.easeElastic=fo;c.easeElasticIn=mv;c.easeElasticInOut=nv;c.easeElasticOut=fo;c.easeExp=Ak;c.easeExpIn=function(l){return Vc(1-+l)};c.easeExpInOut=Ak;c.easeExpOut=function(l){return 1-Vc(l)};c.easeLinear=function(l){return+l};c.easePoly=bo;c.easePolyIn=
iv;c.easePolyInOut=bo;c.easePolyOut=jv;c.easeQuad=xk;c.easeQuadIn=function(l){return l*l};c.easeQuadInOut=xk;c.easeQuadOut=function(l){return l*(2-l)};c.easeSin=yk;c.easeSinIn=function(l){return 1===+l?1:1-Math.cos(l*co)};c.easeSinInOut=yk;c.easeSinOut=function(l){return Math.sin(l*co)};c.every=function(l,D){if("function"!==typeof D)throw new TypeError("test is not a function");for(var J=-1,I=$jscomp.makeIterator(l),K=I.next();!K.done;K=I.next())if(!D(K.value,++J,l))return!1;return!0};c.extent=ia;
c.fcumsum=function(l,D){var J=new yb,I=-1;return Float64Array.from(l,void 0===D?function(K){return J.add(+K||0)}:function(K){return J.add(+D(K,++I,l)||0)})};c.filter=function(l,D){if("function"!==typeof D)throw new TypeError("test is not a function");for(var J=[],I=-1,K=$jscomp.makeIterator(l),N=K.next();!N.done;N=K.next())N=N.value,D(N,++I,l)&&J.push(N);return J};c.forceCenter=function(l,D){function J(){var N,aa=I.length,X=0,ha=0;for(N=0;N<aa;++N){var ja=I[N];X+=ja.x;ha+=ja.y}X=(X/aa-l)*K;ha=(ha/
aa-D)*K;for(N=0;N<aa;++N)ja=I[N],ja.x-=X,ja.y-=ha}var I,K=1;null==l&&(l=0);null==D&&(D=0);J.initialize=function(N){I=N};J.x=function(N){return arguments.length?(l=+N,J):l};J.y=function(N){return arguments.length?(D=+N,J):D};J.strength=function(N){return arguments.length?(K=+N,J):K};return J};c.forceCollide=function(l){function D(){function ja(Ba,pa,Ga,Qa,Wa){var fb=Ba.data;Ba=Ba.r;var bb=za+Ba;if(fb)fb.index>ea.index&&(pa=sa-fb.x-fb.vx,Ga=fa-fb.y-fb.vy,Qa=pa*pa+Ga*Ga,Qa<bb*bb&&(0===pa&&(pa=1E-6*(aa()-
.5),Qa+=pa*pa),0===Ga&&(Ga=1E-6*(aa()-.5),Qa+=Ga*Ga),Qa=(bb-(Qa=Math.sqrt(Qa)))/Qa*X,ea.vx+=(pa*=Qa)*(bb=(Ba*=Ba)/(na+Ba)),ea.vy+=(Ga*=Qa)*bb,fb.vx-=pa*(bb=1-bb),fb.vy-=Ga*bb));else return pa>sa+bb||Qa<sa-bb||Ga>fa+bb||Wa<fa-bb}for(var ra,xa=K.length,V,ea,sa,fa,za,na,Aa=0;Aa<ha;++Aa)for(V=Jf(K,gs,hs).visitAfter(J),ra=0;ra<xa;++ra)ea=K[ra],za=N[ea.index],na=za*za,sa=ea.x+ea.vx,fa=ea.y+ea.vy,V.visit(ja)}function J(ja){if(ja.data)return ja.r=N[ja.data.index];for(var ra=ja.r=0;4>ra;++ra)ja[ra]&&ja[ra].r>
ja.r&&(ja.r=ja[ra].r)}function I(){if(K){var ja,ra=K.length;N=Array(ra);for(ja=0;ja<ra;++ja){var xa=K[ja];N[xa.index]=+l(xa,ja,K)}}}var K,N,aa,X=1,ha=1;"function"!==typeof l&&(l=Bb(null==l?1:+l));D.initialize=function(ja,ra){K=ja;aa=ra;I()};D.iterations=function(ja){return arguments.length?(ha=+ja,D):ha};D.strength=function(ja){return arguments.length?(X=+ja,D):X};D.radius=function(ja){return arguments.length?(l="function"===typeof ja?ja:Bb(+ja),I(),D):l};return D};c.forceLink=function(l){function D(fa){for(var za=
0,na=l.length;za<sa;++za)for(var Aa=0,Ba,pa,Ga,Qa,Wa;Aa<na;++Aa)Ba=l[Aa],pa=Ba.source,Ba=Ba.target,Ga=Ba.x+Ba.vx-pa.x-pa.vx||1E-6*(ea()-.5),Qa=Ba.y+Ba.vy-pa.y-pa.vy||1E-6*(ea()-.5),Wa=Math.sqrt(Ga*Ga+Qa*Qa),Wa=(Wa-ja[Aa])/Wa*fa*X[Aa],Ga*=Wa,Qa*=Wa,Ba.vx-=Ga*(Wa=V[Aa]),Ba.vy-=Qa*Wa,pa.vx+=Ga*(Wa=1-Wa),pa.vy+=Qa*Wa}function J(){if(ra){var fa=ra.length,za=l.length,na=new Map(ra.map(function(Ba,pa){return[N(Ba,pa,ra),Ba]}));var Aa=0;for(xa=Array(fa);Aa<za;++Aa)fa=l[Aa],fa.index=Aa,"object"!==typeof fa.source&&
(fa.source=Vk(na,fa.source)),"object"!==typeof fa.target&&(fa.target=Vk(na,fa.target)),xa[fa.source.index]=(xa[fa.source.index]||0)+1,xa[fa.target.index]=(xa[fa.target.index]||0)+1;Aa=0;for(V=Array(za);Aa<za;++Aa)fa=l[Aa],V[Aa]=xa[fa.source.index]/(xa[fa.source.index]+xa[fa.target.index]);X=Array(za);I();ja=Array(za);K()}}function I(){if(ra)for(var fa=0,za=l.length;fa<za;++fa)X[fa]=+aa(l[fa],fa,l)}function K(){if(ra)for(var fa=0,za=l.length;fa<za;++fa)ja[fa]=+ha(l[fa],fa,l)}var N=is,aa=function(fa){return 1/
Math.min(xa[fa.source.index],xa[fa.target.index])},X,ha=Bb(30),ja,ra,xa,V,ea,sa=1;null==l&&(l=[]);D.initialize=function(fa,za){ra=fa;ea=za;J()};D.links=function(fa){return arguments.length?(l=fa,J(),D):l};D.id=function(fa){return arguments.length?(N=fa,D):N};D.iterations=function(fa){return arguments.length?(sa=+fa,D):sa};D.strength=function(fa){return arguments.length?(aa="function"===typeof fa?fa:Bb(+fa),I(),D):aa};D.distance=function(fa){return arguments.length?(ha="function"===typeof fa?fa:Bb(+fa),
K(),D):ha};return D};c.forceManyBody=function(){function l(ea){var sa=K.length,fa=Jf(K,ls,ms).visitAfter(J);X=ea;for(ea=0;ea<sa;++ea)N=K[ea],fa.visit(I)}function D(){if(K){var ea,sa=K.length;ja=Array(sa);for(ea=0;ea<sa;++ea){var fa=K[ea];ja[fa.index]=+ha(fa,ea,K)}}}function J(ea){var sa=0,fa,za,na=0,Aa,Ba,pa;if(ea.length){for(Aa=Ba=pa=0;4>pa;++pa)(fa=ea[pa])&&(za=Math.abs(fa.value))&&(sa+=fa.value,na+=za,Aa+=za*fa.x,Ba+=za*fa.y);ea.x=Aa/na;ea.y=Ba/na}else{fa=ea;fa.x=fa.data.x;fa.y=fa.data.y;do sa+=
ja[fa.data.index];while(fa=fa.next)}ea.value=sa}function I(ea,sa,fa,za){if(!ea.value)return!0;fa=ea.x-N.x;var na=ea.y-N.y;sa=za-sa;za=fa*fa+na*na;if(sa*sa/V<za)return za<xa&&(0===fa&&(fa=1E-6*(aa()-.5),za+=fa*fa),0===na&&(na=1E-6*(aa()-.5),za+=na*na),za<ra&&(za=Math.sqrt(ra*za)),N.vx+=fa*ea.value*X/za,N.vy+=na*ea.value*X/za),!0;if(!(ea.length||za>=xa)){if(ea.data!==N||ea.next)0===fa&&(fa=1E-6*(aa()-.5),za+=fa*fa),0===na&&(na=1E-6*(aa()-.5),za+=na*na),za<ra&&(za=Math.sqrt(ra*za));do ea.data!==N&&(sa=
ja[ea.data.index]*X/za,N.vx+=fa*sa,N.vy+=na*sa);while(ea=ea.next)}}var K,N,aa,X,ha=Bb(-30),ja,ra=1,xa=Infinity,V=.81;l.initialize=function(ea,sa){K=ea;aa=sa;D()};l.strength=function(ea){return arguments.length?(ha="function"===typeof ea?ea:Bb(+ea),D(),l):ha};l.distanceMin=function(ea){return arguments.length?(ra=ea*ea,l):Math.sqrt(ra)};l.distanceMax=function(ea){return arguments.length?(xa=ea*ea,l):Math.sqrt(xa)};l.theta=function(ea){return arguments.length?(V=ea*ea,l):Math.sqrt(V)};return l};c.forceRadial=
function(l,D,J){function I(ja){for(var ra=0,xa=N.length;ra<xa;++ra){var V=N[ra],ea=V.x-D||1E-6,sa=V.y-J||1E-6,fa=Math.sqrt(ea*ea+sa*sa);fa=(ha[ra]-fa)*X[ra]*ja/fa;V.vx+=ea*fa;V.vy+=sa*fa}}function K(){if(N){var ja,ra=N.length;X=Array(ra);ha=Array(ra);for(ja=0;ja<ra;++ja)ha[ja]=+l(N[ja],ja,N),X[ja]=isNaN(ha[ja])?0:+aa(N[ja],ja,N)}}var N,aa=Bb(.1),X,ha;"function"!==typeof l&&(l=Bb(+l));null==D&&(D=0);null==J&&(J=0);I.initialize=function(ja){N=ja;K()};I.strength=function(ja){return arguments.length?
(aa="function"===typeof ja?ja:Bb(+ja),K(),I):aa};I.radius=function(ja){return arguments.length?(l="function"===typeof ja?ja:Bb(+ja),K(),I):l};I.x=function(ja){return arguments.length?(D=+ja,I):D};I.y=function(ja){return arguments.length?(J=+ja,I):J};return I};c.forceSimulation=function(l){function D(){J();ea.call("tick",N);aa<X&&(V.stop(),ea.call("end",N))}function J(fa){var za,na=l.length;void 0===fa&&(fa=1);for(var Aa=0;Aa<fa;++Aa)for(aa+=(ja-aa)*ha,xa.forEach(function(pa){pa(aa)}),za=0;za<na;++za){var Ba=
l[za];null==Ba.fx?Ba.x+=Ba.vx*=ra:(Ba.x=Ba.fx,Ba.vx=0);null==Ba.fy?Ba.y+=Ba.vy*=ra:(Ba.y=Ba.fy,Ba.vy=0)}return N}function I(){for(var fa=0,za=l.length,na;fa<za;++fa){na=l[fa];na.index=fa;null!=na.fx&&(na.x=na.fx);null!=na.fy&&(na.y=na.fy);if(isNaN(na.x)||isNaN(na.y)){var Aa=10*Math.sqrt(.5+fa),Ba=fa*Lv;na.x=Aa*Math.cos(Ba);na.y=Aa*Math.sin(Ba)}if(isNaN(na.vx)||isNaN(na.vy))na.vx=na.vy=0}}function K(fa){fa.initialize&&fa.initialize(l,sa);return fa}var N,aa=1,X=.001,ha=1-Math.pow(X,1/300),ja=0,ra=.6,
xa=new Map,V=yf(D),ea=id("tick","end"),sa=ks();null==l&&(l=[]);I();return N={tick:J,restart:function(){return V.restart(D),N},stop:function(){return V.stop(),N},nodes:function(fa){return arguments.length?(l=fa,I(),xa.forEach(K),N):l},alpha:function(fa){return arguments.length?(aa=+fa,N):aa},alphaMin:function(fa){return arguments.length?(X=+fa,N):X},alphaDecay:function(fa){return arguments.length?(ha=+fa,N):+ha},alphaTarget:function(fa){return arguments.length?(ja=+fa,N):ja},velocityDecay:function(fa){return arguments.length?
(ra=1-fa,N):1-ra},randomSource:function(fa){return arguments.length?(sa=fa,xa.forEach(K),N):sa},force:function(fa,za){return 1<arguments.length?(null==za?xa.delete(fa):xa.set(fa,K(za)),N):xa.get(fa)},find:function(fa,za,na){var Aa,Ba=l.length;na=null==na?Infinity:na*na;for(Aa=0;Aa<Ba;++Aa){var pa=l[Aa];var Ga=fa-pa.x;var Qa=za-pa.y;Ga=Ga*Ga+Qa*Qa;if(Ga<na){var Wa=pa;na=Ga}}return Wa},on:function(fa,za){return 1<arguments.length?(ea.on(fa,za),N):ea.on(fa)}}};c.forceX=function(l){function D(X){for(var ha=
0,ja=K.length,ra;ha<ja;++ha)ra=K[ha],ra.vx+=(aa[ha]-ra.x)*N[ha]*X}function J(){if(K){var X,ha=K.length;N=Array(ha);aa=Array(ha);for(X=0;X<ha;++X)N[X]=isNaN(aa[X]=+l(K[X],X,K))?0:+I(K[X],X,K)}}var I=Bb(.1),K,N,aa;"function"!==typeof l&&(l=Bb(null==l?0:+l));D.initialize=function(X){K=X;J()};D.strength=function(X){return arguments.length?(I="function"===typeof X?X:Bb(+X),J(),D):I};D.x=function(X){return arguments.length?(l="function"===typeof X?X:Bb(+X),J(),D):l};return D};c.forceY=function(l){function D(X){for(var ha=
0,ja=K.length,ra;ha<ja;++ha)ra=K[ha],ra.vy+=(aa[ha]-ra.y)*N[ha]*X}function J(){if(K){var X,ha=K.length;N=Array(ha);aa=Array(ha);for(X=0;X<ha;++X)N[X]=isNaN(aa[X]=+l(K[X],X,K))?0:+I(K[X],X,K)}}var I=Bb(.1),K,N,aa;"function"!==typeof l&&(l=Bb(null==l?0:+l));D.initialize=function(X){K=X;J()};D.strength=function(X){return arguments.length?(I="function"===typeof X?X:Bb(+X),J(),D):I};D.y=function(X){return arguments.length?(l="function"===typeof X?X:Bb(+X),J(),D):l};return D};c.formatDefaultLocale=cl;c.formatLocale=
Yk;c.formatSpecifier=Ce;c.fsum=function(l,D){var J=new yb;if(void 0===D){l=$jscomp.makeIterator(l);for(var I=l.next();!I.done;I=l.next())D=I.value,(D=+D)&&J.add(D)}else{var K=-1,N=$jscomp.makeIterator(l);for(I=N.next();!I.done;I=N.next())I=I.value,(I=+D(I,++K,l))&&J.add(I)}return+J};c.geoAlbers=mm;c.geoAlbersUsa=function(){function l(V){var ea=V[0];V=V[1];return ra=null,(N.point(ea,V),ra)||(X.point(ea,V),ra)||(ja.point(ea,V),ra)}function D(){J=I=null;return l}var J,I,K=mm(),N,aa=kg().rotate([154,
0]).center([-2,58.5]).parallels([55,65]),X,ha=kg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ja,ra,xa={point:function(V,ea){ra=[V,ea]}};l.invert=function(V){var ea=K.scale(),sa=K.translate(),fa=(V[0]-sa[0])/ea;ea=(V[1]-sa[1])/ea;return(.12<=ea&&.234>ea&&-.425<=fa&&-.214>fa?aa:.166<=ea&&.234>ea&&-.214<=fa&&-.115>fa?ha:K).invert(V)};l.stream=function(V){return J&&I===V?J:J=Xs([K.stream(I=V),aa.stream(V),ha.stream(V)])};l.precision=function(V){if(!arguments.length)return K.precision();K.precision(V);
aa.precision(V);ha.precision(V);return D()};l.scale=function(V){if(!arguments.length)return K.scale();K.scale(V);aa.scale(.35*V);ha.scale(V);return l.translate(K.translate())};l.translate=function(V){if(!arguments.length)return K.translate();var ea=K.scale(),sa=+V[0],fa=+V[1];N=K.translate(V).clipExtent([[sa-.455*ea,fa-.238*ea],[sa+.455*ea,fa+.238*ea]]).stream(xa);X=aa.translate([sa-.307*ea,fa+.201*ea]).clipExtent([[sa-.425*ea+1E-6,fa+.12*ea+1E-6],[sa-.214*ea-1E-6,fa+.234*ea-1E-6]]).stream(xa);ja=
ha.translate([sa-.205*ea,fa+.212*ea]).clipExtent([[sa-.214*ea+1E-6,fa+.166*ea+1E-6],[sa-.115*ea-1E-6,fa+.234*ea-1E-6]]).stream(xa);return D()};l.fitExtent=function(V,ea){return Wd(l,V,ea)};l.fitSize=function(V,ea){return Wd(l,[[0,0],V],ea)};l.fitWidth=function(V,ea){return ui(l,V,ea)};l.fitHeight=function(V,ea){return vi(l,V,ea)};return l.scale(1070)};c.geoArea=function(l){Kg=new yb;oc(l,wc);return 2*Kg};c.geoAzimuthalEqualArea=function(){return zc(rj).scale(124.75).clipAngle(179.999)};c.geoAzimuthalEqualAreaRaw=
rj;c.geoAzimuthalEquidistant=function(){return zc(sj).scale(79.4188).clipAngle(179.999)};c.geoAzimuthalEquidistantRaw=sj;c.geoBounds=function(l){var D,J,I;cc=wb=-(ub=ac=Infinity);Yc=[];oc(l,Jc);if(D=Yc.length){Yc.sort(vs);l=1;var K=Yc[0];for(J=[K];l<D;++l){var N=Yc[l];vl(K,N[0])||vl(K,N[1])?(dc(K[0],N[1])>dc(K[0],K[1])&&(K[1]=N[1]),dc(N[0],K[1])>dc(K[0],K[1])&&(K[0]=N[0])):J.push(K=N)}var aa=-Infinity;D=J.length-1;l=0;for(K=J[D];l<=D;K=N,++l)N=J[l],(I=dc(K[1],N[0]))>aa&&(aa=I,ub=N[0],wb=K[1])}Yc=
Ic=null;return Infinity===ub||Infinity===ac?[[NaN,NaN],[NaN,NaN]]:[[ub,ac],[wb,cc]]};c.geoCentroid=function(l){Fe=Xf=Uf=Vf=Wf=Yf=Zf=$f=0;ai=new yb;bi=new yb;ci=new yb;oc(l,pc);l=+ai;var D=+bi,J=+ci,I=$h(l,D,J);return 1E-12>I&&(l=Yf,D=Zf,J=$f,1E-6>Xf&&(l=Uf,D=Vf,J=Wf),I=$h(l,D,J),1E-12>I)?[NaN,NaN]:[Tb(D,l)*nb,Sb(J/I)*nb]};c.geoCircle=function(){function l(){var X=D.apply(this,arguments),ha=J.apply(this,arguments)*Xa,ja=I.apply(this,arguments)*Xa;K=[];N=fi(-X[0]*Xa,-X[1]*Xa,0).invert;Fl(aa,ha,ja,1);
X={type:"Polygon",coordinates:[K]};K=N=null;return X}var D=Td([0,0]),J=Td(90),I=Td(6),K,N,aa={point:function(X,ha){K.push(X=N(X,ha));X[0]*=nb;X[1]*=nb}};l.center=function(X){return arguments.length?(D="function"===typeof X?X:Td([+X[0],+X[1]]),l):D};l.radius=function(X){return arguments.length?(J="function"===typeof X?X:Td(+X),l):J};l.precision=function(X){return arguments.length?(I="function"===typeof X?X:Td(+X),l):I};return l};c.geoClipAntimeridian=xi;c.geoClipCircle=Ml;c.geoClipExtent=function(){var l=
0,D=0,J=960,I=500,K,N,aa;return aa={stream:function(X){return K&&N===X?K:K=cg(l,D,J,I)(N=X)},extent:function(X){return arguments.length?(l=+X[0][0],D=+X[0][1],J=+X[1][0],I=+X[1][1],K=N=null,aa):[[l,D],[J,I]]}}};c.geoClipRectangle=cg;c.geoConicConformal=function(){return yi(pm).scale(109.5).parallels([30,30])};c.geoConicConformalRaw=pm;c.geoConicEqualArea=kg;c.geoConicEqualAreaRaw=lm;c.geoConicEquidistant=function(){return yi(qm).scale(131.154).center([0,13.9389])};c.geoConicEquidistantRaw=qm;c.geoContains=
function(l,D){return(l&&lo.hasOwnProperty(l.type)?lo[l.type]:fg)(l,D)};c.geoDistance=Ge;c.geoEqualEarth=function(){return zc(Ai).scale(177.158)};c.geoEqualEarthRaw=Ai;c.geoEquirectangular=function(){return zc(Qe).scale(152.63)};c.geoEquirectangularRaw=Qe;c.geoGnomonic=function(){return zc(Bi).scale(144.049).clipAngle(60)};c.geoGnomonicRaw=Bi;c.geoGraticule=Ul;c.geoGraticule10=function(){return Ul()()};c.geoIdentity=function(){function l(){sa=J*N;fa=J*aa;Aa=Ba=null;return D}function D(pa){var Ga=pa[0]*
sa;pa=pa[1]*fa;if(X){var Qa=pa*ha-Ga*ja;Ga=Ga*ha+pa*ja;pa=Qa}return[Ga+I,pa+K]}var J=1,I=0,K=0,N=1,aa=1,X=0,ha,ja,ra=null,xa,V,ea,sa=1,fa=1,za=Me({point:function(pa,Ga){pa=D([pa,Ga]);this.stream.point(pa[0],pa[1])}}),na=Ne,Aa,Ba;D.invert=function(pa){var Ga=pa[0]-I;pa=pa[1]-K;if(X){var Qa=pa*ha+Ga*ja;Ga=Ga*ha-pa*ja;pa=Qa}return[Ga/sa,pa/fa]};D.stream=function(pa){return Aa&&Ba===pa?Aa:Aa=za(na(Ba=pa))};D.postclip=function(pa){return arguments.length?(na=pa,ra=xa=V=ea=null,l()):na};D.clipExtent=function(pa){return arguments.length?
(na=null==pa?(ra=xa=V=ea=null,Ne):cg(ra=+pa[0][0],xa=+pa[0][1],V=+pa[1][0],ea=+pa[1][1]),l()):null==ra?null:[[ra,xa],[V,ea]]};D.scale=function(pa){return arguments.length?(J=+pa,l()):J};D.translate=function(pa){return arguments.length?(I=+pa[0],K=+pa[1],l()):[I,K]};D.angle=function(pa){return arguments.length?(X=pa%360*Xa,ja=Ra(X),ha=Ua(X),l()):X*nb};D.reflectX=function(pa){return arguments.length?(N=pa?-1:1,l()):0>N};D.reflectY=function(pa){return arguments.length?(aa=pa?-1:1,l()):0>aa};D.fitExtent=
function(pa,Ga){return Wd(D,pa,Ga)};D.fitSize=function(pa,Ga){return Wd(D,[[0,0],pa],Ga)};D.fitWidth=function(pa,Ga){return ui(D,pa,Ga)};D.fitHeight=function(pa,Ga){return vi(D,pa,Ga)};return D};c.geoInterpolate=function(l,D){var J=l[0]*Xa,I=l[1]*Xa;l=D[0]*Xa;D=D[1]*Xa;var K=Ua(I),N=Ra(I),aa=Ua(D),X=Ra(D),ha=K*Ua(J),ja=K*Ra(J),ra=aa*Ua(l),xa=aa*Ra(l),V=2*Sb(Gb(hl(D-I)+K*aa*hl(l-J))),ea=Ra(V);l=V?function(sa){var fa=Ra(sa*=V)/ea,za=Ra(V-sa)/ea;sa=za*ha+fa*ra;var na=za*ja+fa*xa;fa=za*N+fa*X;return[Tb(na,
sa)*nb,Tb(fa,Gb(sa*sa+na*na))*nb]}:function(){return[J*nb,I*nb]};l.distance=V;return l};c.geoLength=Nl;c.geoMercator=function(){return om(Pe).scale(961/Xb)};c.geoMercatorRaw=Pe;c.geoNaturalEarth1=function(){return zc(Ci).scale(175.295)};c.geoNaturalEarth1Raw=Ci;c.geoOrthographic=function(){return zc(Di).scale(249.5).clipAngle(90.000001)};c.geoOrthographicRaw=Di;c.geoPath=function(l,D){function J(aa){aa&&("function"===typeof I&&N.pointRadius(+I.apply(this,arguments)),oc(aa,K(N)));return N.result()}
var I=4.5,K,N;J.area=function(aa){oc(aa,K(Kc));return Kc.result()};J.measure=function(aa){oc(aa,K(Je));return Je.result()};J.bounds=function(aa){oc(aa,K(jg));return jg.result()};J.centroid=function(aa){oc(aa,K(hc));return hc.result()};J.projection=function(aa){return arguments.length?(K=null==aa?(l=null,Ne):(l=aa).stream,J):l};J.context=function(aa){if(!arguments.length)return D;N=null==aa?(D=null,new gm):new cm(D=aa);"function"!==typeof I&&N.pointRadius(I);return J};J.pointRadius=function(aa){if(!arguments.length)return I;
I="function"===typeof aa?aa:(N.pointRadius(+aa),+aa);return J};return J.projection(l).context(D)};c.geoProjection=zc;c.geoProjectionMutator=wi;c.geoRotation=El;c.geoStereographic=function(){return zc(Ei).scale(250).clipAngle(142)};c.geoStereographicRaw=Ei;c.geoStream=oc;c.geoTransform=function(l){return{stream:Me(l)}};c.geoTransverseMercator=function(){var l=om(Fi),D=l.center,J=l.rotate;l.center=function(I){return arguments.length?D([-I[1],I[0]]):(I=D(),[I[1],-I[0]])};l.rotate=function(I){return arguments.length?
J([I[0],I[1],2<I.length?I[2]+90:90]):(I=J(),[I[0],I[1],I[2]-90])};return J([0,0,90]).scale(159.155)};c.geoTransverseMercatorRaw=Fi;c.gray=function(l,D){return new lc(l,0,0,null==D?1:D)};c.greatest=function(l,D){D=void 0===D?n:D;var J=!1;if(1===D.length){l=$jscomp.makeIterator(l);for(var I=l.next();!I.done;I=l.next()){I=I.value;var K=D(I);if(J?0<n(K,aa):0===n(K,K)){var N=I;var aa=K;J=!0}}}else for(aa=$jscomp.makeIterator(l),l=aa.next();!l.done;l=aa.next())if(l=l.value,J?0<D(l,N):0===D(l,l))N=l,J=!0;
return N};c.greatestIndex=function(l,D){D=void 0===D?n:D;if(1===D.length)return gd(l,D);var J=-1,I=-1;l=$jscomp.makeIterator(l);for(var K=l.next();!K.done;K=l.next())if(K=K.value,++I,0>J?0===D(K,K):0<D(K,N)){var N=K;J=I}return J};c.group=Fa;c.groupSort=function(l,D,J){return(1===D.length?ab(Ma(l,D,J),function(I,K){var N=$jscomp.makeIterator(I);I=N.next().value;N=N.next().value;var aa=$jscomp.makeIterator(K);K=aa.next().value;aa=aa.next().value;return n(N,aa)||n(I,K)}):ab(Fa(l,J),function(I,K){var N=
$jscomp.makeIterator(I);I=N.next().value;N=N.next().value;var aa=$jscomp.makeIterator(K);K=aa.next().value;aa=aa.next().value;return D(N,aa)||n(I,K)})).map(function(I){return $jscomp.makeIterator(I).next().value})};c.groups=function(l,D){for(var J=[],I=1;I<arguments.length;++I)J[I-1]=arguments[I];return Va(l,Array.from,va,J)};c.hcl=tf;c.hierarchy=Gi;c.histogram=ed;c.hsl=rf;c.html=Jv;c.image=function(l,D){return new Promise(function(J,I){var K=new Image,N;for(N in D)K[N]=D[N];K.onerror=I;K.onload=
function(){J(K)};K.src=l})};c.index=function(l,D){for(var J=[],I=1;I<arguments.length;++I)J[I-1]=arguments[I];return Va(l,va,Ka,J)};c.indexes=function(l,D){for(var J=[],I=1;I<arguments.length;++I)J[I-1]=arguments[I];return Va(l,Array.from,Ka,J)};c.interpolate=Uc;c.interpolateArray=function(l,D){return(fk(D)?uh:gk)(l,D)};c.interpolateBasis=bk;c.interpolateBasisClosed=ck;c.interpolateBlues=ax;c.interpolateBrBG=Gw;c.interpolateBuGn=Pw;c.interpolateBuPu=Qw;c.interpolateCividis=function(l){l=Math.max(0,
Math.min(1,l));return"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-l*(35.34-l*(2381.73-l*(6402.7-l*(7024.72-2710.57*l)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+l*(170.73+l*(52.82-l*(131.46-l*(176.58-67.37*l)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+l*(442.36-l*(2482.43-l*(6167.24-l*(6614.94-2475.67*l)))))))+")"};c.interpolateCool=ix;c.interpolateCubehelix=gv;c.interpolateCubehelixDefault=gx;c.interpolateCubehelixLong=Ig;c.interpolateDate=hk;c.interpolateDiscrete=function(l){var D=
l.length;return function(J){return l[Math.max(0,Math.min(D-1,Math.floor(J*D)))]}};c.interpolateGnBu=Rw;c.interpolateGreens=bx;c.interpolateGreys=cx;c.interpolateHcl=ev;c.interpolateHclLong=fv;c.interpolateHsl=cv;c.interpolateHslLong=dv;c.interpolateHue=function(l,D){var J=uf(+l,+D);return function(I){I=J(I);return I-360*Math.floor(I/360)}};c.interpolateInferno=nx;c.interpolateLab=function(l,D){var J=Fb((l=sf(l)).l,(D=sf(D)).l),I=Fb(l.a,D.a),K=Fb(l.b,D.b),N=Fb(l.opacity,D.opacity);return function(aa){l.l=
J(aa);l.a=I(aa);l.b=K(aa);l.opacity=N(aa);return l+""}};c.interpolateMagma=mx;c.interpolateNumber=fc;c.interpolateNumberArray=uh;c.interpolateObject=ik;c.interpolateOrRd=Sw;c.interpolateOranges=fx;c.interpolatePRGn=Hw;c.interpolatePiYG=Iw;c.interpolatePlasma=ox;c.interpolatePuBu=Uw;c.interpolatePuBuGn=Tw;c.interpolatePuOr=Jw;c.interpolatePuRd=Vw;c.interpolatePurples=dx;c.interpolateRainbow=function(l){if(0>l||1<l)l-=Math.floor(l);var D=Math.abs(l-.5);Tg.h=360*l-100;Tg.s=1.5-1.5*D;Tg.l=.8-.9*D;return Tg+
""};c.interpolateRdBu=Kw;c.interpolateRdGy=Lw;c.interpolateRdPu=Ww;c.interpolateRdYlBu=Mw;c.interpolateRdYlGn=Nw;c.interpolateReds=ex;c.interpolateRgb=se;c.interpolateRgbBasis=Xn;c.interpolateRgbBasisClosed=bv;c.interpolateRound=wf;c.interpolateSinebow=function(l){var D;l=(.5-l)*Math.PI;Ug.r=255*(D=Math.sin(l))*D;Ug.g=255*(D=Math.sin(l+jx))*D;Ug.b=255*(D=Math.sin(l+kx))*D;return Ug+""};c.interpolateSpectral=Ow;c.interpolateString=vh;c.interpolateTransformCss=Yn;c.interpolateTransformSvg=Zn;c.interpolateTurbo=
function(l){l=Math.max(0,Math.min(1,l));return"rgb("+Math.max(0,Math.min(255,Math.round(34.61+l*(1172.33-l*(10793.56-l*(33300.12-l*(38394.49-14825.05*l)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+l*(557.33+l*(1225.33-l*(3574.96-l*(1073.77+707.56*l)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+l*(3211.1-l*(15327.97-l*(27814-l*(22569.18-6838.66*l)))))))+")"};c.interpolateViridis=lx;c.interpolateWarm=hx;c.interpolateYlGn=Yw;c.interpolateYlGnBu=Xw;c.interpolateYlOrBr=Zw;c.interpolateYlOrRd=
$w;c.interpolateZoom=$n;c.interrupt=nd;c.intersection=function(l,D){for(var J=[],I=1;I<arguments.length;++I)J[I-1]=arguments[I];l=new Set(l);J=J.map(ah);I=$jscomp.makeIterator(l);var K=I.next();a:for(;!K.done;K=I.next()){K=K.value;for(var N=$jscomp.makeIterator(J),aa=N.next();!aa.done;aa=N.next())if(!aa.value.has(K)){l.delete(K);continue a}}return l};c.interval=function(l,D,J){var I=new ve,K=D;if(null==D)return I.restart(l,D,J),I;I._restart=I.restart;I.restart=function(N,aa,X){aa=+aa;X=null==X?te():
+X;I._restart(function ra(ja){ja+=K;I._restart(ra,K+=aa,X);N(ja)},aa,X)};I.restart(l,D,J);return I};c.isoFormat=uw;c.isoParse=vw;c.json=function(l,D){return fetch(l,D).then(ds)};c.lab=sf;c.lch=function(l,D,J,I){return 1===arguments.length?Wj(l):new tc(J,D,l,null==I?1:I)};c.least=function(l,D){D=void 0===D?n:D;var J=!1;if(1===D.length){l=$jscomp.makeIterator(l);for(var I=l.next();!I.done;I=l.next()){I=I.value;var K=D(I);if(J?0>n(K,aa):0===n(K,K)){var N=I;var aa=K;J=!0}}}else for(aa=$jscomp.makeIterator(l),
l=aa.next();!l.done;l=aa.next())if(l=l.value,J?0>D(l,N):0===D(l,l))N=l,J=!0;return N};c.leastIndex=Fd;c.line=dj;c.lineRadial=Bn;c.linkHorizontal=function(){return fj(Nu)};c.linkRadial=function(){var l=fj(Pu);l.angle=l.x;delete l.x;l.radius=l.y;delete l.y;return l};c.linkVertical=function(){return fj(Ou)};c.local=Ij;c.map=function(l,D){if("function"!==typeof l[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!==typeof D)throw new TypeError("mapper is not a function");return Array.from(l,
function(J,I){return D(J,I,l)})};c.matcher=hh;c.max=Ec;c.maxIndex=gd;c.mean=function(l,D){var J=0,I=0;if(void 0===D){l=$jscomp.makeIterator(l);for(var K=l.next();!K.done;K=l.next())D=K.value,null!=D&&(D=+D)>=D&&(++J,I+=D)}else{var N=-1,aa=$jscomp.makeIterator(l);for(K=aa.next();!K.done;K=aa.next())K=K.value,null!=(K=D(K,++N,l))&&(K=+K)>=K&&(++J,I+=K)}if(J)return I/J};c.median=function(l,D){return rc(l,.5,D)};c.merge=hd;c.min=Fc;c.minIndex=Ed;c.namespace=qe;c.namespaces=eh;c.nice=Pc;c.now=te;c.pack=
function(){function l(N){N.x=J/2;N.y=I/2;D?N.eachBefore(Am(D)).eachAfter(Ii(K,.5)).eachBefore(Bm(1)):N.eachBefore(Am(gt)).eachAfter(Ii(sd,1)).eachAfter(Ii(K,N.r/Math.min(J,I))).eachBefore(Bm(Math.min(J,I)/(2*N.r)));return N}var D=null,J=1,I=1,K=sd;l.radius=function(N){return arguments.length?(D=null==N?null:pg(N),l):D};l.size=function(N){return arguments.length?(J=+N[0],I=+N[1],l):[J,I]};l.padding=function(N){return arguments.length?(K="function"===typeof N?N:$d(+N),l):K};return l};c.packEnclose=
tm;c.packSiblings=function(l){zm(l);return l};c.pairs=function(l,D){D=void 0===D?oe:D;var J=[],I=!1;l=$jscomp.makeIterator(l);for(var K=l.next();!K.done;K=l.next()){K=K.value;I&&J.push(D(N,K));var N=K;I=!0}return J};c.partition=function(){function l(aa){var X=aa.height+1;aa.x0=aa.y0=K;aa.x1=J;aa.y1=I/X;aa.eachBefore(D(I,X));N&&aa.eachBefore(Cm);return aa}function D(aa,X){return function(ha){ha.children&&Se(ha,ha.x0,aa*(ha.depth+1)/X,ha.x1,aa*(ha.depth+2)/X);var ja=ha.x0,ra=ha.y0,xa=ha.x1-K,V=ha.y1-
K;xa<ja&&(ja=xa=(ja+xa)/2);V<ra&&(ra=V=(ra+V)/2);ha.x0=ja;ha.y0=ra;ha.x1=xa;ha.y1=V}}var J=1,I=1,K=0,N=!1;l.round=function(aa){return arguments.length?(N=!!aa,l):N};l.size=function(aa){return arguments.length?(J=+aa[0],I=+aa[1],l):[J,I]};l.padding=function(aa){return arguments.length?(K=+aa,l):K};return l};c.path=Wc;c.permute=Ya;c.pie=function(){function l(X){var ha,ja=(X=yg(X)).length;var ra=0;var xa=Array(ja),V=Array(ja),ea=+K.apply(this,arguments);var sa=Math.min(cd,Math.max(-cd,N.apply(this,arguments)-
ea));var fa=Math.min(Math.abs(sa)/ja,aa.apply(this,arguments)),za=fa*(0>sa?-1:1),na;for(ha=0;ha<ja;++ha)0<(na=V[xa[ha]=ha]=+D(X[ha],ha,X))&&(ra+=na);null!=J?xa.sort(function(Ba,pa){return J(V[Ba],V[pa])}):null!=I&&xa.sort(function(Ba,pa){return I(X[Ba],X[pa])});ha=0;for(sa=ra?(sa-ja*za)/ra:0;ha<ja;++ha,ea=Aa){ra=xa[ha];na=V[ra];var Aa=ea+(0<na?na*sa:0)+za;V[ra]={data:X[ra],index:ha,value:na,startAngle:ea,endAngle:Aa,padAngle:fa}}return V}var D=Ju,J=Iu,I=null,K=cb(0),N=cb(cd),aa=cb(0);l.value=function(X){return arguments.length?
(D="function"===typeof X?X:cb(+X),l):D};l.sortValues=function(X){return arguments.length?(J=X,I=null,l):J};l.sort=function(X){return arguments.length?(I=X,J=null,l):I};l.startAngle=function(X){return arguments.length?(K="function"===typeof X?X:cb(+X),l):K};l.endAngle=function(X){return arguments.length?(N="function"===typeof X?X:cb(+X),l):N};l.padAngle=function(X){return arguments.length?(aa="function"===typeof X?X:cb(+X),l):aa};return l};c.piecewise=qk;c.pointRadial=$e;c.pointer=bc;c.pointers=function(l,
D){l.target&&(l=Jj(l),void 0===D&&(D=l.currentTarget),l=l.touches||[l]);return Array.from(l,function(J){return bc(J,D)})};c.polygonArea=function(l){for(var D=-1,J=l.length,I,K=l[J-1],N=0;++D<J;)I=K,K=l[D],N+=I[1]*K[0]-I[0]*K[1];return N/2};c.polygonCentroid=function(l){for(var D=-1,J=l.length,I=0,K=0,N,aa=l[J-1],X,ha=0;++D<J;)N=aa,aa=l[D],ha+=X=N[0]*aa[1]-aa[0]*N[1],I+=(N[0]+aa[0])*X,K+=(N[1]+aa[1])*X;return ha*=3,[I/ha,K/ha]};c.polygonContains=function(l,D){var J=l.length,I=l[J-1],K=D[0];D=D[1];
for(var N=I[0],aa=I[1],X,ha=!1,ja=0;ja<J;++ja)I=l[ja],X=I[0],I=I[1],I>D!==aa>D&&K<(N-X)*(D-I)/(aa-I)+X&&(ha=!ha),N=X,aa=I;return ha};c.polygonHull=function(l){if(3>(J=l.length))return null;var D,J,I=Array(J),K=Array(J);for(D=0;D<J;++D)I[D]=[+l[D][0],+l[D][1],D];I.sort(mt);for(D=0;D<J;++D)K[D]=[I[D][0],-I[D][1]];J=Em(I);K=Em(K);var N=K[0]===J[0],aa=K[K.length-1]===J[J.length-1],X=[];for(D=J.length-1;0<=D;--D)X.push(l[I[J[D]][2]]);for(D=+N;D<K.length-aa;++D)X.push(l[I[K[D]][2]]);return X};c.polygonLength=
function(l){var D=-1,J=l.length,I=l[J-1],K=I[0];I=I[1];for(var N=0;++D<J;){var aa=K;var X=I;I=l[D];K=I[0];I=I[1];aa-=K;X-=I;N+=Math.hypot(aa,X)}return N};c.precisionFixed=dl;c.precisionPrefix=el;c.precisionRound=fl;c.quadtree=Jf;c.quantile=rc;c.quantileSorted=fd;c.quantize=function(l,D){for(var J=Array(D),I=0;I<D;++I)J[I]=l(I/(D-1));return J};c.quickselect=Rc;c.radialArea=Dn;c.radialLine=Bn;c.randomBates=Rv;c.randomBernoulli=Uv;c.randomBeta=ro;c.randomBinomial=so;c.randomCauchy=Wv;c.randomExponential=
Sv;c.randomGamma=uj;c.randomGeometric=qo;c.randomInt=Pv;c.randomIrwinHall=po;c.randomLcg=function(l){l=void 0===l?Math.random():l;var D=(0<=l&&1>l?l/to:Math.abs(l))|0;return function(){return D=1664525*D+1013904223|0,to*(D>>>0)}};c.randomLogNormal=Qv;c.randomLogistic=Xv;c.randomNormal=tj;c.randomPareto=Tv;c.randomPoisson=Yv;c.randomUniform=Ov;c.randomWeibull=Vv;c.range=Zb;c.reduce=function(l,D,J){if("function"!==typeof D)throw new TypeError("reducer is not a function");var I=l[Symbol.iterator](),
K,N=-1;if(3>arguments.length){var aa=I.next();var X=aa.done;J=aa.value;if(X)return;++N}for(;function(){var ha=I.next();X=ha.done;K=ha.value;return ha}(),!X;)J=D(J,K,++N,l);return J};c.reverse=function(l){if("function"!==typeof l[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(l).reverse()};c.rgb=Id;c.ribbon=function(){return Kk()};c.ribbonArrow=function(){return Kk(Nr)};c.rollup=Ma;c.rollups=function(l,D,J){for(var I=[],K=2;K<arguments.length;++K)I[K-2]=arguments[K];
return Va(l,Array.from,D,I)};c.scaleBand=Ni;c.scaleDiverging=un;c.scaleDivergingLog=vn;c.scaleDivergingPow=aj;c.scaleDivergingSqrt=function(){return aj.apply(null,arguments).exponent(.5)};c.scaleDivergingSymlog=wn;c.scaleIdentity=Jm;c.scaleImplicit=Mi;c.scaleLinear=Im;c.scaleLog=Om;c.scaleOrdinal=Li;c.scalePoint=function(){return Fm(Ni.apply(null,arguments).paddingInner(1))};c.scalePow=Si;c.scaleQuantile=Vm;c.scaleQuantize=Wm;c.scaleRadial=Um;c.scaleSequential=qn;c.scaleSequentialLog=rn;c.scaleSequentialPow=
$i;c.scaleSequentialQuantile=tn;c.scaleSequentialSqrt=function(){return $i.apply(null,arguments).exponent(.5)};c.scaleSequentialSymlog=sn;c.scaleSqrt=function(){return Si.apply(null,arguments).exponent(.5)};c.scaleSymlog=Rm;c.scaleThreshold=Xm;c.scaleTime=function(){return ic.apply(Zi(Ko,Lo,Ac,Pg,ee,de,Og,Ng,Mc,c.timeFormat).domain([new Date(2E3,0,1),new Date(2E3,0,2)]),arguments)};c.scaleUtc=function(){return ic.apply(Zi(Ho,Io,Bc,Sg,fe,ce,Rg,Qg,Mc,c.utcFormat).domain([Date.UTC(2E3,0,1),Date.UTC(2E3,
0,2)]),arguments)};c.scan=function(l,D){l=Fd(l,D);return 0>l?void 0:l};c.schemeAccent=xw;c.schemeBlues=gp;c.schemeBrBG=Mo;c.schemeBuGn=Vo;c.schemeBuPu=Wo;c.schemeCategory10=ww;c.schemeDark2=yw;c.schemeGnBu=Xo;c.schemeGreens=hp;c.schemeGreys=ip;c.schemeOrRd=Yo;c.schemeOranges=lp;c.schemePRGn=No;c.schemePaired=zw;c.schemePastel1=Aw;c.schemePastel2=Bw;c.schemePiYG=Oo;c.schemePuBu=$o;c.schemePuBuGn=Zo;c.schemePuOr=Po;c.schemePuRd=ap;c.schemePurples=jp;c.schemeRdBu=Qo;c.schemeRdGy=Ro;c.schemeRdPu=bp;c.schemeRdYlBu=
So;c.schemeRdYlGn=To;c.schemeReds=kp;c.schemeSet1=Cw;c.schemeSet2=Dw;c.schemeSet3=Ew;c.schemeSpectral=Uo;c.schemeTableau10=Fw;c.schemeYlGn=dp;c.schemeYlGnBu=cp;c.schemeYlOrBr=ep;c.schemeYlOrRd=fp;c.select=Lb;c.selectAll=function(l){return"string"===typeof l?new Kb([document.querySelectorAll(l)],[document.documentElement]):new Kb([null==l?[]:fh(l)],kh)};c.selection=kd;c.selector=mf;c.selectorAll=gh;c.shuffle=av;c.shuffler=pe;c.some=function(l,D){if("function"!==typeof D)throw new TypeError("test is not a function");
for(var J=-1,I=$jscomp.makeIterator(l),K=I.next();!K.done;K=I.next())if(D(K.value,++J,l))return!0;return!1};c.sort=ab;c.stack=function(){function l(N){var aa=Array.from(D.apply(this,arguments),Ru),X,ha=aa.length,ja=-1,ra=$jscomp.makeIterator(N);for(X=ra.next();!X.done;X=ra.next()){var xa=X.value;X=0;for(++ja;X<ha;++X)(aa[X][ja]=[0,+K(xa,aa[X].key,ja,N)]).data=xa}X=0;for(ja=yg(J(aa));X<ha;++X)aa[ja[X]].index=X;I(aa,ja);return aa}var D=cb([]),J=je,I=ie,K=Qu;l.keys=function(N){return arguments.length?
(D="function"===typeof N?N:cb(Array.from(N)),l):D};l.value=function(N){return arguments.length?(K="function"===typeof N?N:cb(+N),l):K};l.order=function(N){return arguments.length?(J=null==N?je:"function"===typeof N?N:cb(Array.from(N)),l):J};l.offset=function(N){return arguments.length?(I=null==N?ie:N,l):I};return l};c.stackOffsetDiverging=function(l,D){if(0<(ha=l.length))for(var J,I=0,K,N,aa,X,ha,ja=l[D[0]].length;I<ja;++I)for(J=aa=X=0;J<ha;++J)0<(N=(K=l[D[J]][I])[1]-K[0])?(K[0]=aa,K[1]=aa+=N):0>
N?(K[1]=X,K[0]=X+=N):(K[0]=0,K[1]=N)};c.stackOffsetExpand=function(l,D){if(0<(I=l.length)){for(var J,I,K=0,N=l[0].length,aa;K<N;++K){for(aa=J=0;J<I;++J)aa+=l[J][K][1]||0;if(aa)for(J=0;J<I;++J)l[J][K][1]/=aa}ie(l,D)}};c.stackOffsetNone=ie;c.stackOffsetSilhouette=function(l,D){if(0<(K=l.length)){for(var J=0,I=l[D[0]],K,N=I.length;J<N;++J){for(var aa=0,X=0;aa<K;++aa)X+=l[aa][J][1]||0;I[J][1]+=I[J][0]=-X/2}ie(l,D)}};c.stackOffsetWiggle=function(l,D){if(0<(aa=l.length)&&0<(N=(K=l[D[0]]).length)){for(var J=
0,I=1,K,N,aa;I<N;++I){for(var X=0,ha=0,ja=0;X<aa;++X){var ra=l[D[X]],xa=ra[I][1]||0;ra=(xa-(ra[I-1][1]||0))/2;for(var V=0;V<X;++V){var ea=l[D[V]];ra+=(ea[I][1]||0)-(ea[I-1][1]||0)}ha+=xa;ja+=ra*xa}K[I-1][1]+=K[I-1][0]=J;ha&&(J-=ja/ha)}K[I-1][1]+=K[I-1][0]=J;ie(l,D)}};c.stackOrderAppearance=Rn;c.stackOrderAscending=Sn;c.stackOrderDescending=function(l){return Sn(l).reverse()};c.stackOrderInsideOut=function(l){var D=l.length,J=l.map(Tn),I=Rn(l),K=0,N=0,aa=[],X=[];for(l=0;l<D;++l){var ha=I[l];K<N?(K+=
J[ha],aa.push(ha)):(N+=J[ha],X.push(ha))}return X.reverse().concat(aa)};c.stackOrderNone=je;c.stackOrderReverse=function(l){return je(l).reverse()};c.stratify=function(){function l(I){var K=Array.from(I),N=K.length,aa,X,ha=new Map;for(aa=0;aa<N;++aa){var ja=K[aa];var ra=K[aa]=new Zd(ja);if(null!=(X=D(ja,aa,I))&&(X+="")){var xa=ra.id=X;ha.set(xa,ha.has(xa)?mo:ra)}null!=(X=J(ja,aa,I))&&(X+="")&&(ra.parent=X)}for(aa=0;aa<N;++aa)if(ra=K[aa],X=ra.parent){I=ha.get(X);if(!I)throw Error("missing: "+X);if(I===
mo)throw Error("ambiguous: "+X);I.children?I.children.push(ra):I.children=[ra];ra.parent=I}else{if(V)throw Error("multiple roots");var V=ra}if(!V)throw Error("no root");V.parent=Mv;V.eachBefore(function(ea){ea.depth=ea.parent.depth+1;--N}).eachBefore(sm);V.parent=null;if(0<N)throw Error("cycle");return V}var D=ht,J=it;l.id=function(I){return arguments.length?(D=pg(I),l):D};l.parentId=function(I){return arguments.length?(J=pg(I),l):J};return l};c.style=jd;c.subset=function(l,D){return ef(D,l)};c.sum=
function(l,D){var J=0;if(void 0===D){l=$jscomp.makeIterator(l);for(var I=l.next();!I.done;I=l.next())if(D=I.value,D=+D)J+=D}else{var K=-1,N=$jscomp.makeIterator(l);for(I=N.next();!I.done;I=N.next())if(I=I.value,I=+D(I,++K,l))J+=I}return J};c.superset=ef;c.svg=Kv;c.symbol=function(l,D){function J(){var K;I||(I=K=Wc());l.apply(this,arguments).draw(I,+D.apply(this,arguments));if(K)return I=null,K+""||null}var I=null;l="function"===typeof l?l:cb(l||wj);D="function"===typeof D?D:cb(void 0===D?64:+D);J.type=
function(K){return arguments.length?(l="function"===typeof K?K:cb(K),J):l};J.size=function(K){return arguments.length?(D="function"===typeof K?K:cb(+K),J):D};J.context=function(K){return arguments.length?(I=null==K?null:K,J):I};return J};c.symbolCircle=wj;c.symbolCross=np;c.symbolDiamond=pp;c.symbolSquare=sp;c.symbolStar=rp;c.symbolTriangle=tp;c.symbolWye=up;c.symbols=tx;c.text=If;c.thresholdFreedmanDiaconis=function(l,D,J){return Math.ceil((J-D)/(2*(rc(l,.75)-rc(l,.25))*Math.pow(L(l),-1/3)))};c.thresholdScott=
function(l,D,J){return Math.ceil((J-D)/(3.5*ba(l)*Math.pow(L(l),-1/3)))};c.thresholdSturges=Dc;c.tickFormat=Hm;c.tickIncrement=vb;c.tickStep=sb;c.ticks=Eb;c.timeDay=de;c.timeDays=aw;c.timeFormatDefaultLocale=pn;c.timeFormatLocale=$m;c.timeFriday=yo;c.timeFridays=fw;c.timeHour=Og;c.timeHours=$v;c.timeInterval=Db;c.timeMillisecond=be;c.timeMilliseconds=uo;c.timeMinute=Ng;c.timeMinutes=Zv;c.timeMonday=We;c.timeMondays=bw;c.timeMonth=Pg;c.timeMonths=hw;c.timeSaturday=zo;c.timeSaturdays=gw;c.timeSecond=
Mc;c.timeSeconds=vo;c.timeSunday=ee;c.timeSundays=Ao;c.timeThursday=vd;c.timeThursdays=ew;c.timeTickInterval=Lo;c.timeTicks=Ko;c.timeTuesday=wo;c.timeTuesdays=cw;c.timeWednesday=xo;c.timeWednesdays=dw;c.timeWeek=ee;c.timeWeeks=Ao;c.timeYear=Ac;c.timeYears=iw;c.timeout=zh;c.timer=yf;c.timerFlush=sk;c.transition=wk;c.transpose=df;c.tree=function(){function l(ha){var ja=kt(ha);ja.eachAfter(D);ja.parent.m=-ja.z;ja.eachBefore(J);if(X)ha.eachBefore(I);else{var ra=ha,xa=ha,V=ha;ha.eachBefore(function(za){za.x<
ra.x&&(ra=za);za.x>xa.x&&(xa=za);za.depth>V.depth&&(V=za)});ja=ra===xa?1:K(ra,xa)/2;var ea=ja-ra.x,sa=N/(xa.x+ja+ea),fa=aa/(V.depth||1);ha.eachBefore(function(za){za.x=(za.x+ea)*sa;za.y=za.depth*fa})}return ha}function D(ha){var ja=ha.children,ra=ha.parent.children,xa=ha.i?ra[ha.i-1]:null;if(ja){for(var V=0,ea=0,sa=ha.children,fa=sa.length,za;0<=--fa;)za=sa[fa],za.z+=V,za.m+=V,V+=za.s+(ea+=za.c);ja=(ja[0].z+ja[ja.length-1].z)/2;xa?(ha.z=xa.z+K(ha._,xa._),ha.m=ha.z-ja):ha.z=ja}else xa&&(ha.z=xa.z+
K(ha._,xa._));ja=ha.parent;ra=ha.parent.A||ra[0];if(xa){ea=V=ha;sa=V.parent.children[0];fa=V.m;za=ea.m;for(var na=xa.m,Aa=sa.m,Ba;xa=Ki(xa),V=Ji(V),xa&&V;){sa=Ji(sa);ea=Ki(ea);ea.a=ha;Ba=xa.z+na-V.z-fa+K(xa._,V._);if(0<Ba){var pa=xa.a.parent===ha.parent?xa.a:ra,Ga=ha,Qa=Ba,Wa=Qa/(Ga.i-pa.i);Ga.c-=Wa;Ga.s+=Qa;pa.c+=Wa;Ga.z+=Qa;Ga.m+=Qa;fa+=Ba;za+=Ba}na+=xa.m;fa+=V.m;Aa+=sa.m;za+=ea.m}xa&&!Ki(ea)&&(ea.t=xa,ea.m+=na-za);V&&!Ji(sa)&&(sa.t=V,sa.m+=fa-Aa,ra=ha)}ja.A=ra}function J(ha){ha._.x=ha.z+ha.parent.m;
ha.m+=ha.parent.m}function I(ha){ha.x*=N;ha.y=ha.depth*aa}var K=jt,N=1,aa=1,X=null;l.separation=function(ha){return arguments.length?(K=ha,l):K};l.size=function(ha){return arguments.length?(X=!1,N=+ha[0],aa=+ha[1],l):X?null:[N,aa]};l.nodeSize=function(ha){return arguments.length?(X=!0,N=+ha[0],aa=+ha[1],l):X?[N,aa]:null};return l};c.treemap=function(){function l(V){V.x0=V.y0=0;V.x1=K;V.y1=N;V.eachBefore(D);aa=[0];I&&V.eachBefore(Cm);return V}function D(V){var ea=aa[V.depth],sa=V.x0+ea,fa=V.y0+ea,
za=V.x1-ea,na=V.y1-ea;za<sa&&(sa=za=(sa+za)/2);na<fa&&(fa=na=(fa+na)/2);V.x0=sa;V.y0=fa;V.x1=za;V.y1=na;V.children&&(ea=aa[V.depth+1]=X(V)/2,sa+=xa(V)-ea,fa+=ha(V)-ea,za-=ja(V)-ea,na-=ra(V)-ea,za<sa&&(sa=za=(sa+za)/2),na<fa&&(fa=na=(fa+na)/2),J(V,sa,fa,za,na))}var J=oo,I=!1,K=1,N=1,aa=[0],X=sd,ha=sd,ja=sd,ra=sd,xa=sd;l.round=function(V){return arguments.length?(I=!!V,l):I};l.size=function(V){return arguments.length?(K=+V[0],N=+V[1],l):[K,N]};l.tile=function(V){return arguments.length?(J=pg(V),l):
J};l.padding=function(V){return arguments.length?l.paddingInner(V).paddingOuter(V):l.paddingInner()};l.paddingInner=function(V){return arguments.length?(X="function"===typeof V?V:$d(+V),l):X};l.paddingOuter=function(V){return arguments.length?l.paddingTop(V).paddingRight(V).paddingBottom(V).paddingLeft(V):l.paddingTop()};l.paddingTop=function(V){return arguments.length?(ha="function"===typeof V?V:$d(+V),l):ha};l.paddingRight=function(V){return arguments.length?(ja="function"===typeof V?V:$d(+V),l):
ja};l.paddingBottom=function(V){return arguments.length?(ra="function"===typeof V?V:$d(+V),l):ra};l.paddingLeft=function(V){return arguments.length?(xa="function"===typeof V?V:$d(+V),l):xa};return l};c.treemapBinary=function(l,D,J,I,K){function N(xa,V,ea,sa,fa,za,na){if(xa>=V-1)xa=aa[xa],xa.x0=sa,xa.y0=fa,xa.x1=za,xa.y1=na;else{for(var Aa=ra[xa],Ba=ea/2+Aa,pa=xa+1,Ga=V-1;pa<Ga;){var Qa=pa+Ga>>>1;ra[Qa]<Ba?pa=Qa+1:Ga=Qa}Ba-ra[pa-1]<ra[pa]-Ba&&xa+1<pa&&--pa;Aa=ra[pa]-Aa;Ba=ea-Aa;za-sa>na-fa?(ea=ea?
(sa*Ba+za*Aa)/ea:za,N(xa,pa,Aa,sa,fa,ea,na),N(pa,V,Ba,ea,fa,za,na)):(ea=ea?(fa*Ba+na*Aa)/ea:na,N(xa,pa,Aa,sa,fa,za,ea),N(pa,V,Ba,sa,ea,za,na))}}var aa=l.children,X,ha=aa.length,ja,ra=Array(ha+1);for(ra[0]=ja=X=0;X<ha;++X)ra[X+1]=ja+=aa[X].value;N(0,ha,l.value,D,J,I,K)};c.treemapDice=Se;c.treemapResquarify=Nv;c.treemapSlice=rg;c.treemapSliceDice=function(l,D,J,I,K){(l.depth&1?rg:Se)(l,D,J,I,K)};c.treemapSquarify=oo;c.tsv=Hv;c.tsvFormat=Av;c.tsvFormatBody=Bv;c.tsvFormatRow=Dv;c.tsvFormatRows=Cv;c.tsvFormatValue=
Ev;c.tsvParse=jo;c.tsvParseRows=zv;c.union=function(l){for(var D=[],J=0;J<arguments.length;++J)D[J-0]=arguments[J];J=new Set;D=$jscomp.makeIterator(D);for(var I=D.next();!I.done;I=D.next()){I=$jscomp.makeIterator(I.value);for(var K=I.next();!K.done;K=I.next())J.add(K.value)}return J};c.utcDay=ce;c.utcDays=lw;c.utcFriday=Do;c.utcFridays=qw;c.utcHour=Rg;c.utcHours=kw;c.utcMillisecond=be;c.utcMilliseconds=uo;c.utcMinute=Qg;c.utcMinutes=jw;c.utcMonday=Ve;c.utcMondays=mw;c.utcMonth=Sg;c.utcMonths=sw;c.utcSaturday=
Eo;c.utcSaturdays=rw;c.utcSecond=Mc;c.utcSeconds=vo;c.utcSunday=fe;c.utcSundays=Fo;c.utcThursday=wd;c.utcThursdays=pw;c.utcTickInterval=Io;c.utcTicks=Ho;c.utcTuesday=Bo;c.utcTuesdays=nw;c.utcWednesday=Co;c.utcWednesdays=ow;c.utcWeek=fe;c.utcWeeks=Fo;c.utcYear=Bc;c.utcYears=tw;c.variance=O;c.version="6.7.0";c.window=ih;c.xml=Iv;c.zip=function(){return df(arguments)};c.zoom=function(){function l(ya){ya.property("__zoom",Vn).on("wheel.zoom",X).on("mousedown.zoom",ha).on("dblclick.zoom",ja).filter(na).on("touchstart.zoom",
ra).on("touchmove.zoom",xa).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function D(ya,Sa){Sa=Math.max(Aa[0],Math.min(Aa[1],Sa));return Sa===ya.k?ya:new Nc(Sa,ya.x,ya.y)}function J(ya,Sa,Ca){var Oa=Sa[0]-Ca[0]*ya.k;Sa=Sa[1]-Ca[1]*ya.k;return Oa===ya.x&&Sa===ya.y?ya:new Nc(ya.k,Oa,Sa)}function I(ya){return[(+ya[0][0]+ +ya[1][0])/2,(+ya[0][1]+ +ya[1][1])/2]}function K(ya,Sa,Ca,Oa){ya.on("start.zoom",function(){N(this,arguments).event(Oa).start()}).on("interrupt.zoom end.zoom",
function(){N(this,arguments).event(Oa).end()}).tween("zoom",function(){var Ja=arguments,db=N(this,Ja).event(Oa),$a=sa.apply(this,Ja),kb=null==Ca?I($a):"function"===typeof Ca?Ca.apply(this,Ja):Ca,Ab=Math.max($a[1][0]-$a[0][0],$a[1][1]-$a[0][1]);$a=this.__zoom;var xb="function"===typeof Sa?Sa.apply(this,Ja):Sa,Wg=Ga($a.invert(kb).concat(Ab/$a.k),xb.invert(kb).concat(Ab/xb.k));return function(kc){if(1===kc)kc=xb;else{kc=Wg(kc);var zj=Ab/kc[2];kc=new Nc(zj,kb[0]-kc[0]*zj,kb[1]-kc[1]*zj)}db.zoom(null,
kc)}})}function N(ya,Sa,Ca){return!Ca&&ya.__zooming||new aa(ya,Sa)}function aa(ya,Sa){this.that=ya;this.args=Sa;this.active=0;this.sourceEvent=null;this.extent=sa.apply(ya,Sa);this.taps=0}function X(ya,Sa){for(var Ca=[],Oa=1;Oa<arguments.length;++Oa)Ca[Oa-1]=arguments[Oa];if(ea.apply(this,arguments)){var Ja=N(this,Ca).event(ya);Ca=this.__zoom;Oa=Math.max(Aa[0],Math.min(Aa[1],Ca.k*Math.pow(2,za.apply(this,arguments))));var db=bc(ya);if(Ja.wheel){if(Ja.mouse[0][0]!==db[0]||Ja.mouse[0][1]!==db[1])Ja.mouse[1]=
Ca.invert(Ja.mouse[0]=db);clearTimeout(Ja.wheel)}else{if(Ca.k===Oa)return;Ja.mouse=[db,Ca.invert(db)];nd(this);Ja.start()}af(ya);Ja.wheel=setTimeout(function(){Ja.wheel=null;Ja.end()},150);Ja.zoom("mouse",fa(J(D(Ca,Oa),Ja.mouse[0],Ja.mouse[1]),Ja.extent,Ba))}}function ha(ya,Sa){for(var Ca=[],Oa=1;Oa<arguments.length;++Oa)Ca[Oa-1]=arguments[Oa];if(!bb&&ea.apply(this,arguments)){var Ja=N(this,Ca,!0).event(ya),db=Lb(ya.view).on("mousemove.zoom",function(xb){af(xb);if(!Ja.moved){var Wg=xb.clientX-kb,
kc=xb.clientY-Ab;Ja.moved=Wg*Wg+kc*kc>pb}Ja.event(xb).zoom("mouse",fa(J(Ja.that.__zoom,Ja.mouse[0]=bc(xb,$a),Ja.mouse[1]),Ja.extent,Ba))},!0).on("mouseup.zoom",function(xb){db.on("mousemove.zoom mouseup.zoom",null);pf(xb.view,Ja.moved);af(xb);Ja.event(xb).end()},!0);Ca=bc(ya,$a);var $a=ya.currentTarget,kb=ya.clientX,Ab=ya.clientY;of(ya.view);ya.stopImmediatePropagation();Ja.mouse=[Ca,this.__zoom.invert(Ca)];nd(this);Ja.start()}}function ja(ya,Sa){for(var Ca=[],Oa=1;Oa<arguments.length;++Oa)Ca[Oa-
1]=arguments[Oa];if(ea.apply(this,arguments)){var Ja=this.__zoom;Oa=bc(ya.changedTouches?ya.changedTouches[0]:ya,this);var db=Ja.invert(Oa);Ca=fa(J(D(Ja,Ja.k*(ya.shiftKey?.5:2)),Oa,db),sa.apply(this,Ca),Ba);af(ya);0<pa?Lb(this).transition().duration(pa).call(K,Ca,Oa,ya):Lb(this).call(l.transform,Ca,Oa,ya)}}function ra(ya,Sa){for(var Ca=[],Oa=1;Oa<arguments.length;++Oa)Ca[Oa-1]=arguments[Oa];if(ea.apply(this,arguments)){Oa=ya.touches;var Ja=Oa.length;Ca=N(this,Ca,ya.changedTouches.length===Ja).event(ya);
var db;ya.stopImmediatePropagation();for(db=0;db<Ja;++db){var $a=Oa[db];var kb=bc($a,this);kb=[kb,this.__zoom.invert(kb),$a.identifier];if(Ca.touch0)Ca.touch1||Ca.touch0[2]===kb[2]||(Ca.touch1=kb,Ca.taps=0);else{Ca.touch0=kb;var Ab=!0;Ca.taps=1+!!Wa}}Wa&&(Wa=clearTimeout(Wa));Ab&&(2>Ca.taps&&(fb=kb[0],Wa=setTimeout(function(){Wa=null},500)),nd(this),Ca.start())}}function xa(ya,Sa){for(var Ca=[],Oa=1;Oa<arguments.length;++Oa)Ca[Oa-1]=arguments[Oa];if(this.__zooming){Ca=N(this,Ca).event(ya);var Ja=
ya.changedTouches,db=Ja.length,$a;af(ya);for($a=0;$a<db;++$a){Oa=Ja[$a];var kb=bc(Oa,this);Ca.touch0&&Ca.touch0[2]===Oa.identifier?Ca.touch0[0]=kb:Ca.touch1&&Ca.touch1[2]===Oa.identifier&&(Ca.touch1[0]=kb)}Oa=Ca.that.__zoom;if(Ca.touch1){kb=Ca.touch0[0];Ja=Ca.touch0[1];$a=Ca.touch1[0];db=Ca.touch1[1];var Ab=(Ab=$a[0]-kb[0])*Ab+(Ab=$a[1]-kb[1])*Ab;var xb=(xb=db[0]-Ja[0])*xb+(xb=db[1]-Ja[1])*xb;Oa=D(Oa,Math.sqrt(Ab/xb));kb=[(kb[0]+$a[0])/2,(kb[1]+$a[1])/2];Ab=[(Ja[0]+db[0])/2,(Ja[1]+db[1])/2]}else if(Ca.touch0)kb=
Ca.touch0[0],Ab=Ca.touch0[1];else return;Ca.zoom("touch",fa(J(Oa,kb,Ab),Ca.extent,Ba))}}function V(ya,Sa){for(var Ca=[],Oa=1;Oa<arguments.length;++Oa)Ca[Oa-1]=arguments[Oa];if(this.__zooming){Ca=N(this,Ca).event(ya);Oa=ya.changedTouches;var Ja=Oa.length,db;ya.stopImmediatePropagation();bb&&clearTimeout(bb);bb=setTimeout(function(){bb=null},500);for(db=0;db<Ja;++db){var $a=Oa[db];Ca.touch0&&Ca.touch0[2]===$a.identifier?delete Ca.touch0:Ca.touch1&&Ca.touch1[2]===$a.identifier&&delete Ca.touch1}Ca.touch1&&
!Ca.touch0&&(Ca.touch0=Ca.touch1,delete Ca.touch1);Ca.touch0?Ca.touch0[1]=this.__zoom.invert(Ca.touch0[0]):(Ca.end(),2===Ca.taps&&($a=bc($a,this),Math.hypot(fb[0]-$a[0],fb[1]-$a[1])<rb&&($a=Lb(this).on("dblclick.zoom"))&&$a.apply(this,arguments)))}}var ea=Uu,sa=Vu,fa=Yu,za=Wu,na=Xu,Aa=[0,Infinity],Ba=[[-Infinity,-Infinity],[Infinity,Infinity]],pa=250,Ga=$n,Qa=id("start","zoom","end"),Wa,fb,bb,pb=0,rb=10;l.transform=function(ya,Sa,Ca,Oa){var Ja=ya.selection?ya.selection():ya;Ja.property("__zoom",Vn);
ya!==Ja?K(ya,Sa,Ca,Oa):Ja.interrupt().each(function(){N(this,arguments).event(Oa).start().zoom(null,"function"===typeof Sa?Sa.apply(this,arguments):Sa).end()})};l.scaleBy=function(ya,Sa,Ca,Oa){l.scaleTo(ya,function(){var Ja=this.__zoom.k,db="function"===typeof Sa?Sa.apply(this,arguments):Sa;return Ja*db},Ca,Oa)};l.scaleTo=function(ya,Sa,Ca,Oa){l.transform(ya,function(){var Ja=sa.apply(this,arguments),db=this.__zoom,$a=null==Ca?I(Ja):"function"===typeof Ca?Ca.apply(this,arguments):Ca,kb=db.invert($a),
Ab="function"===typeof Sa?Sa.apply(this,arguments):Sa;return fa(J(D(db,Ab),$a,kb),Ja,Ba)},Ca,Oa)};l.translateBy=function(ya,Sa,Ca,Oa){l.transform(ya,function(){return fa(this.__zoom.translate("function"===typeof Sa?Sa.apply(this,arguments):Sa,"function"===typeof Ca?Ca.apply(this,arguments):Ca),sa.apply(this,arguments),Ba)},null,Oa)};l.translateTo=function(ya,Sa,Ca,Oa,Ja){l.transform(ya,function(){var db=sa.apply(this,arguments),$a=this.__zoom,kb=null==Oa?I(db):"function"===typeof Oa?Oa.apply(this,
arguments):Oa;return fa(Fg.translate(kb[0],kb[1]).scale($a.k).translate("function"===typeof Sa?-Sa.apply(this,arguments):-Sa,"function"===typeof Ca?-Ca.apply(this,arguments):-Ca),db,Ba)},Oa,Ja)};aa.prototype={event:function(ya){ya&&(this.sourceEvent=ya);return this},start:function(){1===++this.active&&(this.that.__zooming=this,this.emit("start"));return this},zoom:function(ya,Sa){this.mouse&&"mouse"!==ya&&(this.mouse[1]=Sa.invert(this.mouse[0]));this.touch0&&"touch"!==ya&&(this.touch0[1]=Sa.invert(this.touch0[0]));
this.touch1&&"touch"!==ya&&(this.touch1[1]=Sa.invert(this.touch1[0]));this.that.__zoom=Sa;this.emit("zoom");return this},end:function(){0===--this.active&&(delete this.that.__zooming,this.emit("end"));return this},emit:function(ya){var Sa=Lb(this.that).datum();Qa.call(ya,this.that,new Tu(ya,{sourceEvent:this.sourceEvent,target:l,type:ya,transform:this.that.__zoom,dispatch:Qa}),Sa)}};l.wheelDelta=function(ya){return arguments.length?(za="function"===typeof ya?ya:Vg(+ya),l):za};l.filter=function(ya){return arguments.length?
(ea="function"===typeof ya?ya:Vg(!!ya),l):ea};l.touchable=function(ya){return arguments.length?(na="function"===typeof ya?ya:Vg(!!ya),l):na};l.extent=function(ya){return arguments.length?(sa="function"===typeof ya?ya:Vg([[+ya[0][0],+ya[0][1]],[+ya[1][0],+ya[1][1]]]),l):sa};l.scaleExtent=function(ya){return arguments.length?(Aa[0]=+ya[0],Aa[1]=+ya[1],l):[Aa[0],Aa[1]]};l.translateExtent=function(ya){return arguments.length?(Ba[0][0]=+ya[0][0],Ba[1][0]=+ya[1][0],Ba[0][1]=+ya[0][1],Ba[1][1]=+ya[1][1],
l):[[Ba[0][0],Ba[0][1]],[Ba[1][0],Ba[1][1]]]};l.constrain=function(ya){return arguments.length?(fa=ya,l):fa};l.duration=function(ya){return arguments.length?(pa=+ya,l):pa};l.interpolate=function(ya){return arguments.length?(Ga=ya,l):Ga};l.on=function(){var ya=Qa.on.apply(Qa,arguments);return ya===Qa?l:ya};l.clickDistance=function(ya){return arguments.length?(pb=(ya=+ya)*ya,l):Math.sqrt(pb)};l.tapDistance=function(ya){return arguments.length?(rb=+ya,l):rb};return l};c.zoomIdentity=Fg;c.zoomTransform=
Un;Object.defineProperty(c,"__esModule",{value:!0})});var WMSVersion={version100:"1.0.0",version111:"1.1.1",version130:"1.3.0"},js='<!DOCTYPE html><html><head><title>SONDEO</title><link rel="stylesheet" href="./apps/tddjs.css" />\x3c!-- ADAGUC viewer sounding app --\x3e<script type="module" src="webmapjs/tddjs.js">\x3c/script><script src="./sond/tddjs/dist/tdd.js">\x3c/script><script src="./sond/tddjs/vendor/d3-6.7.js">\x3c/script><script src="./sond/tddjs/vendor/moment-with-locales.min.js">\x3c/script><link rel="stylesheet" href="./sond/tddjs/dist/tdd.css" /><link rel="stylesheet" href="./apps/tddjs.css" /></head><body><div id="mitdd"></div></body></html>\n<script type="text/javascript">console.log("QUERY",myvar);var tdd = new TDD("mitdd");console.log("TDD",tdd);try{tdd.load_temp(myvar);} catch (e){window.alert("Exception occured:" + e);}  \x3c/script>',
tddjs=function(c,n){var x=!0,y=[];y.set=!1;var w=[],S,L=0,P=function(T){var R,O,ba,ia,la,ma,ua,Da,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){console.log("TAC",S);ba=0==w.length?"":document.getElementById("info").innerHTML;document.getElementById("info").innerHTML=ba;if(0==x)return Fa.return();y.x=T.x;y.y=T.y;y.set=!0;R=n.getLatLongFromPixelCoord({x:T.x,y:T.y});O=n.getLayers();if(!isDefined(O))return $("#info").html("No valid data received:<br/>"+data),Fa.return();info=n.getLayers().getFeatureInfoUrl;
ba="";0==n.layers.length&&(ba="No layer: Load a valid layer.",document.getElementById("info").innerHTML=ba);ia=[];for(la=0;la<n.layers.length;la++)ma=n.layers[n.layers.length-la-1].service,ua=n.layers[n.layers.length-la-1].name,ma.includes("TEMP")||ma.includes("KRR")||ma.includes("KRF")||ma.includes("ASV_FCT")||"sond_station"==ua?ia.push(n.layers[n.layers.length-la-1]):(ma.includes("ECMWF")||ma.includes("HARMONIE"))&&ia.push(n.layers[n.layers.length-la-1]);0==ia.length&&(ba="No Sounding valid Layer: Load a valid layer.",
document.getElementById("info").innerHTML=ba);Da={};for(va in ia){console.log(va,ia.length);if(ia[va].service.includes("HARMONIE")||ia[va].service.includes("ECMWF")||ia[va].service.includes("TEMP")||ia[va].service.includes("KRR")||ia[va].service.includes("KRF")||ia[va].service.includes("ASV_FCT")||"sond_station"==ia[va].name)console.log("MYLAYER_TEXT",ia[va].name),Da.$jscomp$loop$prop$myLayer$343=ia[va],getJSONdata(Da.$jscomp$loop$prop$myLayer$343,n,y.x,y.y,"text/plain",function(Ma){return function(Ka){if(null!=
Ka){if(console.log(Ka),null!=Ka.data){document.getElementById("load").innerHTML="";var Va=Ka.meta;if(Ma.$jscomp$loop$prop$myLayer$343.service.includes("TEMP")||"sond_station"==Ma.$jscomp$loop$prop$myLayer$343.name)Va="Station";else if(Ma.$jscomp$loop$prop$myLayer$343.service.includes("ECMWF")||Ma.$jscomp$loop$prop$myLayer$343.service.includes("HARMONIE")){var Ya=Ma.$jscomp$loop$prop$myLayer$343.service.split("=")[1];Ya=Ya.replace("&","");Va.model=Ya;Va.name=Ya;Va="MODEL"}else Va="SAT-PROFILE";var ab=
L;L++;Ya=window.open(ab,"SOND"+ab,'itemId="sonda'+ab+'",toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=1,width=1040,height=600');Ya.myvar=Ka;var mb=Ya.document;mb.write(js);mb.close();w.push([Ya,"SOND"+ab]);mb=Va+" : "+Ka.meta.name;mb+="Profile for location ["+Math.round(100*R.x)/100+","+Math.round(100*R.y)/100+"]";ab='<div id="SOND'+ab+'"class="sonding">Profile for location ['+Math.round(100*R.x)/100+","+Math.round(100*R.y)/100+"]";ab+=" - "+Va+" : "+Ka.meta.name+"</div>";Ya.document.title=
mb;document.getElementById("info").innerHTML+=ab}}else document.getElementById("load").innerHTML="",window.alert("SOND: No valid data")}}(Da));Da={$jscomp$loop$prop$myLayer$343:Da.$jscomp$loop$prop$myLayer$343}}Fa.jumpToEnd()})};n.addListener("mouseclicked",P,!0);var G=function(){c.html('<div id="load"></div><div id="info"></div><div id="table"></div>');$("#info").html("Click on the map to load a profile.<br/> A Sounding,ECMWF Model or IASI-KRR/F layer loaded is necessary");document.getElementById("info").addEventListener("click",
function(T){T=T.target.getAttribute("id");console.log(T);for(var R=0;R<w.length;R++)if(w[R][1]==T&&!w[R][0].closed){w[R][0].focus();break}},!1);isDefined(S)&&null!=S||(S=window.setInterval(function(){for(var T=0;T<w.length;T++)if(w[T][0].closed){var R=document.getElementById(w[T][1]);console.log(R);w.splice(T,1);R.remove();0==w.length&&$("#info").html("Click on the map to load a profile.<br/> A Sounding,ECMWF Model or IASI-KRR/F layer loaded is necessary")}},1E3),console.log(S));n.enableInlineGetFeatureInfo(!1)};
this.enable=function(){G();x=!0};this.disable=function(){x=!1;n.enableInlineGetFeatureInfo(!0);y.set=!1;for(var T=0;T<w.length;T++)console.log("CLOSE"),w[T].close();window.clearInterval(S);w=[];L=0};this.resize=function(T,R){$("#mitdd").width(T);y.set&&P(y)};this.enable()};try{WMJSExtApplications.Sondeo=tddjs,WMJSExtApplications.VertProfiles=tddjs}catch(c){}
function createXHR(){try{return new XMLHttpRequest}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}return!1}
function MakeHTTPRequest_s(c,n,x,y){function w(L){errorfunction?errorfunction(L,pointer):n(void 0,pointer)}c=-1===c.indexOf("?")?c+"?":c+"&";c+="rand="+Math.random();x||(x=!1);try{var S=createXHR();S.open("GET",c,!0);S.onreadystatechange=function(){if(4===S.readyState)if(200===S.status){try{var L=S.responseText}catch(P){w("Exception occured:"+P);return}void 0===L||""===L?w("request returned no data"):n(null,S.response)}else console.log("ERROR",c),n(null,S.response)};S.send(null)}catch(L){window.alert("AQUI"),
!1===x?(c=y+"REQUEST="+URLEncode(c),MakeHTTPRequest_s(c,n,errorfunction,pointer,!0,y)):w("status("+S.status+") to "+c)}}
function getJSONdata(c,n,x,y,w,S){var L=c.service.split("=")[1];L=L.replace("&","");document.getElementById("load").innerHTML+="Procesando<br>";document.getElementById("load").innerHTML+='<img src="./img/ajax-loader.gif" alt="Loading..."/>';document.getElementById("table").innerHTML="";var P=WMJScheckURL(c.service);P+="&SERVICE=WMS&REQUEST=GetFeatureInfo&VERSION="+c.version;P+="&LAYERS="+URLEncode(c.name);c.name.split(",");var G=P;w="";L.includes("ECMWF")&&(G+="&QUERY_LAYERS=mean_sea_level_pressure&INFO_FORMAT=application/json",
P+="&QUERY_LAYERS=geopotential_height,temperature,relative_humidity,wind_barbs_vectors&INFO_FORMAT=application/json");L.includes("TEMP")&&(P+="&QUERY_LAYERS=p,z,t,td,windSpd,windDir,eVSS&INFO_FORMAT=application/json",G+="&QUERY_LAYERS=station_name,ps,alt,station_cname&INFO_FORMAT=application/json");if(L.includes("KRR")||L.includes("KRF")||L.includes("ASV_FCT"))P+="&QUERY_LAYERS=air_temperature,dew_point_temperature&INFO_FORMAT=application/json",G+="&QUERY_LAYERS=surface_air_pressure,surface_air_temperature,surface_dew_point_temperature&INFO_FORMAT=application/json";
L.includes("HARMONIE")&&(G+="&QUERY_LAYERS=medium_sea_level_pressure&INFO_FORMAT=application/json",P+="&QUERY_LAYERS=geopotential_height,air_temperature,relative_humidity,wind_barbs_vectors&INFO_FORMAT=application/json");w+="&"+getBBOXandProjString(c,n);w+="WIDTH="+n.width;w+="&HEIGHT="+n.height;if(c.version===WMSVersion.version100||c.version===WMSVersion.version111)w=w+("&X="+x)+("&Y="+y);c.version===WMSVersion.version130&&(w=w+("&I="+x)+("&J="+y));w+="&FORMAT=image/gif&STYLES=";try{w+="&"+n._getMapDimURL(c),
P+=w,G+=w}catch(R){S(null,void 0)}debug('<a target="_blank" href="'+P+'">'+P+"</a>",!1);var T=c.service+"&SERVICE=WMS&REQUEST=getCapabilities&VERSION="+c.version;getMeta(G,function(R){if(null!=R)if(console.log("META",R),G.includes("TEMP"))getData(T,R,P,function(O){null!=O?S({meta:R,data:O}):S(null)});else if(G.includes("KRR")||G.includes("KRF")||G.includes("ASV_FCT"))getData_IASI(T,R,P,function(O){null!=O?S({meta:R,data:O}):S(null)});else{if(G.includes("ECMWF")||G.includes("HARMONIE"))req_list=[],
getAllLevels(T,function(O){if(null==O)window.errorMessage("No hay niveles!"),S(null);else{O=O.split(",");for(var ba=0;ba<O.length;ba++)req_list.push(P+"&elevation="+O[ba]);req_list.reverse();R.model=L;getDataN_Model(req_list,[],0,function(ia){null!=ia?S({meta:R,data:ia}):S(null)})}})}else S(null)})}function WMJScheckURL(c){if(!isDefined(c))return"?";c=c.trim();-1===c.indexOf("?")&&(c+="?");return c}function isDefined(c){return"undefined"===typeof c?!1:!0}
function URLEncode(c){if(!c||void 0===c||""===c||"string"!==typeof c)return c;c=c.replace(/%/g,"%25");c=c.replace(/\+/g,"%2B");c=c.replace(/ /g,"%20");c=c.replace(/\^/g,"%5E");c=c.replace(/&/g,"%26");c=c.replace(/\?/g,"%3F");c=c.replace(/>/g,"%3E");c=c.replace(/</g,"%3C");c=c.replace(/\\/g,"%5C");for(var n="",x=0;x<c.length;x++){var y=c.charAt(x);if(" "===y)n+="%20";else if(-1!=="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz%-_.!~*'()".indexOf(y))n+=y;else{var w=y.charCodeAt(0);255<
w?(alert("Unicode Character '"+y+"' cannot be encoded using standard URL encoding.\n(URL encoding only supports 8-bit characters.)\nA space (+) will be substituted."),n+="+"):(n+="%",n+="0123456789ABCDEF".charAt(w>>4&15),n+="0123456789ABCDEF".charAt(w&15))}}return n}
function getBBOXandProjString(c,n){var x="";if(c.version===WMSVersion.version100||c.version===WMSVersion.version111)x+="SRS="+URLEncode(n.srs)+"&",x+="BBOX="+n.bbox.left+","+n.bbox.bottom+","+n.bbox.right+","+n.bbox.top+"&";c.version===WMSVersion.version130&&(x+="CRS="+URLEncode(n.srs)+"&",x="EPSG:4326"===n.srs&&!1===c.wms130bboxcompatibilitymode?x+("BBOX="+n.bbox.bottom+","+n.bbox.left+","+n.bbox.top+","+n.bbox.right+"&"):x+("BBOX="+n.bbox.left+","+n.bbox.bottom+","+n.bbox.right+","+n.bbox.top+"&"));
return x}function getLevels(c,n){var x=new ol.format.WMSCapabilities;fetch(c).then(function(y){return y.text()}).then(function(y){y=x.read(y).Capability.Layer.Layer;y=$jscomp.makeIterator(y);for(var w=y.next();!w.done;w=y.next())if(w=w.value,"t"==w.Name||"temperature"==w.Name||"air_temperature_profile"==w.Name||"air_temperature"==w.Name){w=$jscomp.makeIterator(w.Dimension);for(var S=w.next();!S.done;S=w.next())S=S.value,"elevation"==S.name&&n(S.default)}})}
function getAllLevels(c,n){var x=new ol.format.WMSCapabilities;fetch(c).then(function(y){return y.text()}).then(function(y){y=x.read(y).Capability.Layer.Layer;y=$jscomp.makeIterator(y);for(var w=y.next();!w.done;w=y.next())if(w=w.value,"t"==w.Name||"temperature"==w.Name||"air_temperature"==w.Name||"air_temperature_profile"==w.Name){w=$jscomp.makeIterator(w.Dimension);for(var S=w.next();!S.done;S=w.next())S=S.value,"elevation"==S.name&&n(S.values)}})}
function getMeta(c,n){console.log("REQ META",c);MakeHTTPRequest_s(c,function(x,y){if(null!=x)console.error(x);else{x=[];try{var w=JSON.parse(y),S=w[0].point.coords;S=S.split(",");var L=parseFloat(S[0]),P=parseFloat(S[1]);for(y=0;y<w.length;y++){var G=Object.keys(w[y].data).toString();if(G.includes("T")&&G.includes("-")&&G.includes(":"))break}if(c.includes("ECMWF")||c.includes("HARMONIE")){var T=G;var R=(new Date(T)).getTime();var O=w[0].data[G];G=Object.keys(O).toString();ff=(new Date(G)).getTime();
var ba=(ff-R)/36E5;G=Object.keys(O).toString()}var ia=c.includes("ECMWF")||c.includes("HARMONIE")?T.toString():G.toString();ia=ia.split("T");var la=ia[0].replaceAll("-","");la=parseInt(la);var ma=parseInt(ia[1].substring(0,2)),ua;T="OBSERVACION";if(c.includes("KRR")||c.includes("KRF")||c.includes("ASV_FCT")){ma=ia[1].substring(0,5);var Da="";T="SAT-PROFILE"}c.includes("KRR")&&(ua="sSHAI IASI-KRR");c.includes("KRF")&&(ua="sSHAI IASI-KRF");c.includes("ASV_FCT")&&(ua="ECMWF forecast");c.includes("ECMWF")&&
(ua="ECMWF",Da="",T="MODEL");c.includes("HARMONIE")&&(ua="HARMONIE",Da="",T="MODEL");for(ia=0;ia<w.length;ia++){console.log(w[ia].standard_name);if("station_name_backup"==w[ia].name){if(isDefined(ua))continue;ua=w[ia].data[G]}if("ps"==w[ia].name){if(isDefined(va))continue;var va=w[ia].data[G]/100;isNaN(va)&&(va=w[ia].data[0]/100)}if("air_pressure_at_mean_sea_level"==w[ia].standard_name||"medium_sea_level_pressure"==w[ia].standard_name){if(isDefined(va))continue;va=parseFloat(O[G]);isNaN(va)&&(va=
parseFloat(O[G]))}if("surface_air_pressure"==w[ia].name){if(isDefined(va))continue;va=w[ia].data[G]/100;isNaN(va)&&(va=w[ia].data[0]/100)}if("surface_air_temperature"==w[ia].standard_name){if(isDefined(Fa))continue;var Fa=isDefined(w[ia].data[2])?w[ia].data[2][G]-273.15:w[ia].data[G]-273.15;isNaN(Fa)&&(Fa=w[ia].data[2][G]-273.15)}if("surface_dew_point_temperature"==w[ia].standard_name){if(isDefined(Ma))continue;var Ma=isDefined(w[ia].data[2])?w[ia].data[2][G]-273.15:w[ia].data[G]-273.15;isNaN(Ma)&&
(Ma=w[ia].data[2][G]-273.15)}if("alt"==w[ia].name){if(isDefined(Ka))continue;var Ka=parseFloat(w[ia].data[G]);isNaN(Ka)&&(Ka=parseFloat(w[ia].data[0]))}"station_cname_backup"!=w[ia].name||isDefined(Da)||(Da=w[ia].data[G])}if(isDefined(ua)&&"nodata"!=ua){isNaN(Ka)&&(Ka=0);x={model:T,index:ua,date:la,run:ma,step:0,lon:L,lat:P,ps:va,zs:Ka,name:ua+" "+Da,ts:Fa,tds:Ma};if(c.includes("ECMWF")||c.includes("HARMONIE"))x={model:"ECMWF",index:"MODEL",date:la,run:ma,step:ba,lon:L,lat:P,ps:va,zs:0,name:"MODEL"};
n(x)}else n(null)}catch(Va){n(null)}}})}
function getDataN_Model(c,n,x,y){0<c.length?(rml=c.pop(),$("#tableinfo").html(""),$("#table").html(""),$("#tableM").html(""),$("#tableS").html(""),MakeHTTPRequest_s(rml,function(w,S){if(null!=w)console.error(w);else{var L=JSON.parse(S),P=Object.keys(L[0].data)[0],G=Object.keys(L[0].data[P])[0],T=Object.keys(L[0].data[P][G])[0];w=parseFloat(L[0].data[P][G][T]);S=parseFloat(L[1].data[P][G][T]);var R=parseFloat(L[2].data[P][G][T]),O=-1*parseFloat(L[3].data[P][G][T]);L=-1*parseFloat(L[4].data[P][G][T]);
G=parseFloat(G);n.push({n:x,p:G,z:w,t:S,RH:R,u:L,v:O});n.sort(function(ba,ia){return ba.p-ia.p})}x++;getDataN_Model(c,n,x,y)})):y(n)}
function getData_IASI(c,n,x,y){getAllLevels(c,function(w){w=w.split(",");for(var S=[],L=0;L<w.length;L++){var P=parseFloat(w[L])/100;100<=P&&P<=parseFloat(n.ps)&&S.push(w[L])}w=x+"&elevation="+S[0]+"/"+S[S.length-1];var G=[],T={n:0,p:n.ps,z:0,t:n.ts,td:n.tds,wD:NaN,wS:NaN};G.push(T);$("#tableinfo").html("");$("#table").html("");$("#tableM").html("");$("#tableS").html("");MakeHTTPRequest_s(w,function(R,O){if(null!=R)console.error(R);else{if(!O.includes("ServiceException")){R=JSON.parse(O);R=$jscomp.makeIterator(R);
for(O=R.next();!O.done;O=R.next()){T=O.value;console.log(T);if("air_temperature"==T.standard_name)var ba=T.data;if("dew_point_temperature"==T.standard_name)var ia=T.data}for(var la in S){ind=S[la];R=parseFloat(ind)/100;var ma=Object.keys(ba[ind]);O=parseFloat(ba[ind][ma]);O-=273.15;ma=parseFloat(ia[ind][ma]);ma-=273.15;G.push({n:la,p:R,z:NaN,t:O,td:ma,wD:NaN,wS:NaN})}}y(G)}})})}
function getData(c,n,x,y){getLevels(c,function(w){console.log("LEV",w);null==w&&(window.errorMessage("No hay niveles!"),y(null));var S=parseInt(w);console.log("LEVEL",S);var L=Math.floor(S/100);S%=100;for(var P=0,G=0,T=[],R=0;R<L;R++)G=P+99,T.push(x+"&elevation="+P+"/"+G),P=G+1;T.push(x+"&elevation="+P+"/"+(P+S));T=T.reverse();var O=[];getDataN(T,w,n,O,function(ba){null==ba&&(window.errorMessage("No hay niveles!"),y(null));if(0==O.length)window.alert("El sondeo no tiene datos validos para este diagrama"),
y(null);else{ba=parseFloat(O[O.length-1].p);var ia=parseFloat(O[0].p);850>=ia?(window.alert("El primer nivel esta demasiado alto! - P0: "+ia+"hpa\n\n El primer nivel debe ser mayor de 850hPa"),y(null)):300<ba?(window.alert("Ultimo nivel demasiado bajo! - Pn: "+ba+"hpa\n\n El ultimo nivel debe ser menor de 300hPa"),y(null)):y(O)}})})}
function getDataN(c,n,x,y,w){if(0!=c.length){var S=c.pop(),L=S.indexOf("elevation");L=S.slice(L);var P=L.indexOf("=")+1,G=L.indexOf("/"),T=L.slice(P,G);console.log("Procesando nivles",T,"a",parseInt(T)+99,"de",n);$("#tableinfo").html("");$("#table").html("");$("#tableM").html("");$("#tableS").html("");MakeHTTPRequest_s(S,function(R,O){if(null!=R)console.error(R);else if(!O.includes("ServiceException")){R=x.zs;var ba=100;150>x.ps&&(ba=100);O=JSON.parse(O);O=$jscomp.makeIterator(O);for(var ia=O.next();!ia.done;ia=
O.next()){dat=ia.value;if("p"==dat.name)var la=dat.data;if("z"==dat.name)var ma=dat.data;if("t"==dat.name)var ua=dat.data;if("td"==dat.name)var Da=dat.data;if("windSpd"==dat.name)var va=dat.data;if("windDir"==dat.name)var Fa=dat.data;if("eVSS"==dat.name)var Ma=dat.data}O=parseInt(T);isDefined(la[O])||(O+=1);O=Object.keys(la[O]);ia=y.length;for(var Ka in la){var Va=la[Ka],Ya=ma[Ka],ab=ua[Ka],mb=Da[Ka],Eb=va[Ka],vb=Fa[Ka],sb=Ma[Ka];sb=sb[O];parseFloat(sb);Va=Va[O];Va=parseFloat(Va);Va/=ba;999999999<
Va||0>Va||(Ya=parseFloat(Ya[O]),ab=parseFloat(ab[O]),ab-=273.15,mb=parseFloat(mb[O])-273.15,Eb=parseFloat(Eb[O]),sb=vb=parseFloat(vb[O]),vb*=Math.PI/180,vb%=2*Math.PI,Ya<R||isNaN(ab)||isNaN(mb)||0>sb||(Va={n:ia,p:Va,z:Ya,t:ab,td:mb,wD:vb,wS:Eb},ia+=1,y.push(Va)))}}getDataN(c,n,x,y,w)})}else w(y)}var wsond=function(c){};var table="",wmjsond,yradar=function(c,n){function x(ba,ia){if(ba.length!=ia.length)return!1;for(var la=0;la<ba.length;la++)if(!ia.includes(ba[la]))return!1;for(la=0;la<ia.length;la++)if(!ba.includes(ia[la]))return!1;return!0}function y(){for(var ba=[],ia=0;ia<n.layers.length;ia++)n.layers[n.layers.length-ia-1].service.includes("YRAD")&&ba.push(n.layers[n.layers.length-ia-1].name);return ba}wmjsond=n;var w=!0,S="",L=[],P=!1,G=[];L.set=!1;var T=null,R=function(ba){P&&(T.close(),P=!1);var ia=[];la=
"";document.getElementById("info").innerHTML=la;if(0!=w)if(L.x=ba.x,L.y=ba.y,L.set=!0,n.getLatLongFromPixelCoord({x:ba.x,y:ba.y}),ba=n.getLayers(),isDefined(ba)){info=n.getLayers().getFeatureInfoUrl;var la="";0==n.layers.length&&(la="No layer: Load a valid YRADAR layer.",document.getElementById("info").innerHTML=la);ba=[];for(la=0;la<n.layers.length;la++)n.layers[n.layers.length-la-1].service.includes("YRAD")&&ba.push(n.layers[n.layers.length-la-1]);la=null;for(var ma in ba)la=ba[ma],null!=la&&""!==
la.getFeatureInfoUrl?!1===la.queryable?n.featureInfoRequestReady("Layer is not queryable.",la):(document.getElementById("table").innerHTML="",la.name.includes("2D")?ia.push(la):la.name.includes("3D")&&ia.push(la)):(la="Wrong layer: Load a valid yradar layer.",document.getElementById("info").innerHTML=la,P&&T.close());console.log("YR",ia);if(0<ia.length){T=window.open("YRADAR.html","YRADAR",'itemId="sond",toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=1,width=800,height=600');for(ma=
0;ma<ia.length;ma++)la=ia[ma],getCells(la,n,L.x,L.y,function(ua){null!=ua&&(T.document.getElementById("info").insertAdjacentHTML("afterbegin",ua),T.focus())});P=!0}}else $("#info").html("No valid data received:<br/>"+data)};n.addListener("mouseclicked",R,!0);n.addListener("ondimchange",function(ba){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){if(1==ia.nextAddress)return P&&T.close(),$("#tableinfo").html(""),$("#info").html(""),$("#table").html(""),document.getElementById("info").innerHTML=
"",document.getElementById("info").innerHTML='<img src="./img/ajax-loader.gif" alt="Loading..."/>',ia.yield(new Promise(function(la){return setTimeout(la,500)}),2);console.log("DIM REFRESH!!!");O();ia.jumpToEnd()})},!0);n.addListener("onimageload",function(ba){var ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){ia=y();x(ia,G)||(console.log("IMG REFRESH!!!"),O());la.jumpToEnd()})},!0);var O=function(){G=y();c.html('<div id="tableinfo"></div><div id="info"></div><div id="table"></div>');
$("#tableinfo").html("");$("#info").html("");$("#table").html("");var ba='<img src="./img/ajax-loader.gif" alt="Loading..."/>';document.getElementById("info").innerHTML=ba;var ia=[];for(ba=0;ba<n.layers.length;ba++)n.layers[n.layers.length-ba-1].service.includes("YRAD")&&ia.push(n.layers[n.layers.length-ba-1]);0==ia.length&&(ba="No YRADAR Layer: Load a valid YRADAR layer.",document.getElementById("info").innerHTML=ba);ba={};for(var la in ia){var ma=ia[la];if(null!=ma&&""!==ma.getFeatureInfoUrl)if(!1===
ma.queryable)n.featureInfoRequestReady("Layer is not queryable.",ma);else if(ma.name.includes("2D")||ma.name.includes("3D")){var ua=ia[la];ba.$jscomp$loop$prop$path$346="";ba.$jscomp$loop$prop$rad$347=ua.name.substr(-3,3);ba.$jscomp$loop$prop$dim$345="2D";ua.name.includes("3D")&&(ba.$jscomp$loop$prop$dim$345="3D");ma=WMJScheckURL(ua.service).split("/");var Da=ma[0];ma=ma[2];ba.$jscomp$loop$prop$path$346=Da+"//"+ma+"/";getJSONdate(ua,n,"text/plain",function(va){return function(Fa){var Ma=Fa.substring(0,
Fa.indexOf("T"));Fa=Fa.substring(Fa.indexOf("T")+1,Fa.indexOf("Z")-2);S!=Ma+Fa&&(S=Ma+Fa);"3D"==va.$jscomp$loop$prop$dim$345?va.$jscomp$loop$prop$path$346+="yradar/"+Ma+Fa+"REG3D":ua.name.includes("NAC")?va.$jscomp$loop$prop$path$346+="yradar/"+Ma+Fa+"NAC2D":va.$jscomp$loop$prop$path$346+="yradar/"+Ma+Fa+"REG2D";$.ajax({url:va.$jscomp$loop$prop$path$346,dataType:"text",success:function(Ka){document.getElementById("info").innerHTML="";var Va=Ka.split(/\r?\n|\r/);Ka="<b> RADAR: "+va.$jscomp$loop$prop$rad$347+
"</b><br>";table="3D"==va.$jscomp$loop$prop$dim$345?"<b>YRADAR3D</b><br>":"<b>YRADAR2D</b><br>";if("COM"!=va.$jscomp$loop$prop$rad$347&&"NAC"!=va.$jscomp$loop$prop$rad$347){for(var Ya=[],ab=0;ab<Va.length;ab++)0===ab&&Ya.push(Va[ab]),Va[ab].includes(va.$jscomp$loop$prop$rad$347)&&Ya.push(Va[ab]);Va=Ya}Va=getTable(Va,va.$jscomp$loop$prop$rad$347,va.$jscomp$loop$prop$dim$345,n);$("#tableinfo").append(table+Ka+Va);$("#info").html("Click on cell num to zoom it.<br>")},error:function(Ka,Va,Ya){console.log(Ka,
Va,Ya);"No encontrado"==Ya||"Not find"==Ya?window.alert("No esta disponible el fichero: "+va.$jscomp$loop$prop$path$346):window.alert("Se ha producido un error al cargar"+va.$jscomp$loop$prop$path$346);document.getElementById("info").innerHTML="Error al cargar las caracteristicas de las celulas."}})}}(ba))}ba={$jscomp$loop$prop$dim$345:ba.$jscomp$loop$prop$dim$345,$jscomp$loop$prop$path$346:ba.$jscomp$loop$prop$path$346,$jscomp$loop$prop$rad$347:ba.$jscomp$loop$prop$rad$347}}n.enableInlineGetFeatureInfo(!1)};
this.enable=function(){O();w=!0};this.disable=function(){w=!1;n.enableInlineGetFeatureInfo(!0);L.set=!1;P&&(T.close(),P=!1)};this.resize=function(ba,ia){$("#mitdd").width(ba);L.set&&R(L)}};try{WMJSExtApplications.Yradar=yradar}catch(c){}
function createXHR(){try{return new XMLHttpRequest}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}return!1}
function MakeHTTPRequest(c,n,x,y){function w(P){errorfunction?errorfunction(P,pointer):n(void 0,pointer)}function S(){!1===x?(c=y+"REQUEST="+URLEncode(c),MakeHTTPRequest(c,n,errorfunction,pointer,!0,y)):w("status("+L.status+") to "+c)}c=-1===c.indexOf("?")?c+"?":c+"&";c+="rand="+Math.random();x||(x=!1);try{var L=createXHR();L.open("GET",c,!0);L.onreadystatechange=function(){if(4===L.readyState)if(200===L.status){try{var P=L.responseText}catch(G){w("Exception occured:"+G);return}void 0===P||""===P?
w("request returned no data"):n(null,L.response)}else S()};L.send(null)}catch(P){S()}}
function getCells(c,n,x,y,w){var S=c.name;S.includes("2D")&&getJSONdata2D(c,n,x,y,"text/plain",function(L){document.getElementById("info").innerHTML="";if(null!=L){var P=L.ANA,G=L.RAYOS,T=L.MOV;L="<br>CENTROIDE 2D <b>"+(P.ID+"</b> : ["+P.LATCEN+","+P.LONCEN+"]");var R="<TABLE BORDER><TR> <TD>ID</TD> <TD>NUPIX</TD> <TD>ZMAX</TD> <TD>ZMED</TD> <TD>RADIOE</TD> <TD>ECTOP</TD> <TD>VIL</TD> </TR><TR><TD><b>"+(P.ID+"</b></TD> <TD>"+P.NUPIX+"</TD> <TD>"+P.ZMAX+"</TD> <TD>"+P.ZMED+"</TD> <TD>"+P.RADIOE+"</TD> <TD>"+
P.ECTOP+"</TD> <TD>"+P.VIL+"</TD></TR>");R+="</TABLE>";var O="<div><p><b>RAYOS TOTALES:</b>"+G.RAY+"<br>";O+="<b>POSITIVOS:</b>"+G.POS+"<br>";O+="<b>NEGATIVOS:</b>"+G.NEG+"<br>";O+="<b>INTRANUBE:</b>"+G.INT+"<br>";O+="<b>LATCENR:</b>"+G.LATCENR+"<b> LONCENR:</b>"+G.LONCENR+"<br>";O+="<b>DISTMAX:</b>"+G.DISTMAX+"<b> DISTMED:</b>"+G.DISTMED+"<b> RAYOS/KM2:</b>"+G["RY/KM"]+"<br></p>";O+="</div>";G="<div><p><b>MOVIMIENTO:</b> V(Km/h):"+T.VKMH+" DIRN:"+T.DIRN+"</p></div>";T="";isDefined(P.ADV)&&(T="<div><p><b>ADVERSIDAD: </b>"+
P.ADV+"</p></div>");w(L+(R+O+G+T))}else L="<br>"+(S+" Wrong point!!! <b>"),w(L)});S.includes("3D")&&getJSONdata3D(c,n,x,y,"text/plain",function(L){document.getElementById("info").innerHTML="";if(null!=L){var P=L.ANA,G=L.GRANIZO;L=L.MOV;var T="CENTROIDE 3D <b>"+P.ID+"</b> : ["+P.LATCEN+","+P.LONCEN+"]";var R="<TABLE BORDER><TR> <TD>ID</TD> <TD>ZMAX</TD> <TD>ESPE</TD> <TD>ECTOP</TD> <TD>DVIL</TD> <TD>DVGR</TD> <TD>HB45</TD> <TD>HBAS</TD> <TD>DVCE</TD> </TR><TR><TD><b>"+(P.ID+"</b></TD> <TD>"+P.ZMAX+
"</TD> <TD>"+P.ESPE+"</TD> <TD>"+P.ECTOP+"</TD> <TD>"+P.DVIL+"</TD> <TD>"+P.DVGR+"</TD> <TD>"+P.HB45+"</TD> <TD>"+P.HBAS+"</TD> <TD>"+P.DVCE+"</TD></TR>");R+="</TABLE>";var O=G.GRA,ba="color:#00FF00";"g"==O&&(ba="color:#AAAA00");"G"==O&&(ba="color:#FF0000");O="<div><p><b>GRANIZO:</b><b style="+ba+">"+O+"</b><br><b>ORG-PER:</b>"+(G.ORG+"<br>");O+="<b>PGR:</b>"+G.PGR+"<br>";O+="<b>TAM(mm):</b>"+G.TAM+"<br>";O+="</p></div>";G=parseInt(P.ADV);ba="color:#00FF00";var ia="Sin Pot. Adv.";1==G&&(ba="color:#AAAA00",
ia="Alto Pot. Adv.");2==G&&(ba="color:#FF0000",ia="Muy alto Pot. Adv");P="<div><p><b>ADVERSIDAD: </b><b style="+ba+">"+ia+"</b><br><b>CELULA 2D: </b>"+(parseInt(P.N2D)+"<br>");T+=R+("<div><p><b>MOVIMIENTO:</b></br><b>V(Km/h):</b>"+(L.VKMH+"<b> DIRN:</b>"+L.DIRN+"</p></div>"))+O+(P+"</p></div></br>")}else T="<br>"+(S+" wrong point!!!<b>");w(T)})}
function getJSONdate(c,n,x,y){x=WMJScheckURL(c.service);x+="&SERVICE=WMS&REQUEST=GetFeatureInfo&VERSION="+c.version;x+="&LAYERs="+URLEncode(c.name);x+="&QUERY_LAYERS="+URLEncode(c.name)+"&INFO_FORMAT=application/json&FORMAT=application/json";x+="&"+getBBOXandProjString(c,n)+"&WIDTH=400";x+="&"+n._getMapDimURL(c);MakeHTTPRequest(x,function(w,S){null!=w?(console.error(w),y(null)):(w=JSON.parse(S),w=Object.keys(w[0].data)[0],w=w.replaceAll(":",""),w=w.replaceAll("-",""),y(w))})}
function getJSONdata2D(c,n,x,y,w,S){document.getElementById("info").innerHTML="Procesando<br>";document.getElementById("table").innerHTML="";w=WMJScheckURL(c.service);w+="&SERVICE=WMS&REQUEST=GetFeatureInfo&VERSION="+c.version;w+="&LAYERS="+URLEncode(c.name);c.name.split(",");var L="";w+="&QUERY_LAYERS="+URLEncode(c.name)+"&INFO_FORMAT=application/json";L+="&"+getBBOXandProjString(c,n);L+="WIDTH="+n.width;L+="&HEIGHT="+n.height;if(c.version===WMSVersion.version100||c.version===WMSVersion.version111)L=
L+("&X="+x)+("&Y="+y);c.version===WMSVersion.version130&&(L=L+("&I="+x)+("&J="+y));L+="&FORMAT=image/gif&STYLES=";try{L+="&"+n._getMapDimURL(c),w+=L}catch(P){S(null)}MakeHTTPRequest(w,function(P,G){if(null!=P)console.error(P),S(null);else{P=JSON.parse(G);var T;for(T in P){G=P[T];if("RADIOE"==G.name&&(!isDefined(R)||"nodata"==R[Object.keys(R)]))var R=G.data;if("NUPIX"==G.name)var O=G.data;if("LATCEN"==G.name)var ba=G.data;if("LONCEN"==G.name)var ia=G.data;if("ECTOP"==G.name)var la=G.data;if("VIL"==
G.name)var ma=G.data;if("id"==G.name&&(!isDefined(ua)||"nodata"==ua[Object.keys(ua)]||"nan"==ua[Object.keys(ua)]))var ua=G.data;if("ZMAX"==G.name&&(!isDefined(Da)||"nodata"==Da[Object.keys(Da)]||isNaN(parseFloat(Da[Object.keys(Da)]))))var Da=G.data;if("ZMED"==G.name)var va=G.data;if("ADV"==G.name)var Fa=G.data;if("RAY"==G.name)var Ma=G.data;if("POS"==G.name)var Ka=G.data;if("NEG"==G.name)var Va=G.data;if("RAYo"==G.name)var Ya=G.data;if("DISTMAX"==G.name)var ab=G.data;if("DISTME"==G.name)var mb=G.data;
if("RY/K"==G.name)var Eb=G.data;if("LATCENR"==G.name)var vb=G.data;if("LONCENR"==G.name)var sb=G.data;if("DIRN"==G.name)var Pc=G.data;if("V(KMH)"==G.name)var Dc=G.data}try{var ed=R[Object.keys(R)],Ec=O[Object.keys(O)];if(isDefined(ba))var Fc=ba[Object.keys(ba)];if(isDefined(ia))var Rc=ia[Object.keys(ia)];if(isDefined(la))var qc=la[Object.keys(la)];if(isDefined(ma))var rc=ma[Object.keys(ma)];var fd=Da[Object.keys(Da)],gd=va[Object.keys(va)],Dd=Ma[Object.keys(Ma)],hd=Ka[Object.keys(Ka)],Ed=Va[Object.keys(Va)],
oe=Ya[Object.keys(Ya)],Zb=ab[Object.keys(ab)],Fd=mb[Object.keys(mb)],pe=Eb[Object.keys(Eb)];if(isDefined(vb))var df=vb[Object.keys(vb)];if(isDefined(sb))var $g=sb[Object.keys(sb)];if(isDefined(Pc))var ah=Pc[Object.keys(Pc)];if(isDefined(Dc))var ef=Dc[Object.keys(Dc)];var gf=ua[Object.keys(ua)];if(isDefined(Fa)){var bh=Fa[Object.keys(Fa)];var hf={LATCEN:Fc,LONCEN:Rc,ID:gf,NUPIX:Ec,ZMAX:fd,ZMED:gd,RADIOE:ed,ADV:bh,ECTOP:qc,VIL:rc}}else hf={LATCEN:Fc,LONCEN:Rc,ID:gf,NUPIX:Ec,ZMAX:fd,ZMED:gd,RADIOE:ed,
ECTOP:qc,VIL:rc};S({ANA:hf,RAYOS:{RAY:Dd,POS:hd,NEG:Ed,INT:oe,DISTMAX:Zb,DISTMED:Fd,"RY/KM":pe,LATCENR:df,LONCENR:$g},MOV:{DIRN:ah,VKMH:ef}})}catch(ch){console.log(ch),S(null)}}});debug('<a target="_blank" href="'+w+'">'+w+"</a>",!1)}
function getJSONdata3D(c,n,x,y,w,S){document.getElementById("info").innerHTML="Procesando<br>";document.getElementById("table").innerHTML="";w=WMJScheckURL(c.service);w+="&SERVICE=WMS&REQUEST=GetFeatureInfo&VERSION="+c.version;w+="&LAYERS="+URLEncode(c.name);c.name.split(",");var L="";w+="&QUERY_LAYERS="+URLEncode(c.name)+"&INFO_FORMAT=application/json";L+="&"+getBBOXandProjString(c,n);L+="WIDTH="+n.width;L+="&HEIGHT="+n.height;if(c.version===WMSVersion.version100||c.version===WMSVersion.version111)L=
L+("&X="+x)+("&Y="+y);c.version===WMSVersion.version130&&(L=L+("&I="+x)+("&J="+y));L+="&FORMAT=image/gif&STYLES=";try{L+="&"+n._getMapDimURL(c),w+=L}catch(P){S(null)}MakeHTTPRequest(w,function(P,G){if(null!=P)console.error(P),S(null);else{P=JSON.parse(G);var T;for(T in P){G=P[T];if("ID_backup"==G.name)var R=G.data;if("LATCEN"==G.name)var O=G.data;if("LONCEN"==G.name)var ba=G.data;if("DVCE"==G.name)var ia=G.data;if("DVGR"==G.name)var la=G.data;if("ECTOP"==G.name)var ma=G.data;if("ESPE"==G.name&&(!isDefined(ua)||
"nodata"==ua[Object.keys(ua)]))var ua=G.data;if("GRA"==G.name)var Da=G.data;if("HB45"==G.name)var va=G.data;if("HBAS"==G.name)var Fa=G.data;if("DVIL"==G.name&&(!isDefined(Ma)||"nodata"==Ma[Object.keys(Ma)]))var Ma=G.data;if("ZMAX"==G.name&&(!isDefined(Ka)||"nodata"==Ka[Object.keys(Ka)]||Ka[Object.keys(Ka)]==R[Object.keys(R)]))var Ka=G.data;if("ADV"==G.name)var Va=G.data;if("NUM2D"==G.name)var Ya=G.data;if("ORG-PER"==G.name)var ab=G.data;if("PGR"==G.name)var mb=G.data;if("TAM(mm)"==G.name)var Eb=G.data;
if("DIRN"==G.name)var vb=G.data;if("V(KMH)"==G.name)var sb=G.data}try{var Pc=O[Object.keys(O)],Dc=ba[Object.keys(ba)],ed=ia[Object.keys(ia)],Ec=la[Object.keys(la)],Fc=ma[Object.keys(ma)],Rc=ua[Object.keys(ua)];ia="0";isDefined(Da)&&(ia=Da[Object.keys(Da)]);var qc=va[Object.keys(va)],rc=Fa[Object.keys(Fa)],fd=Ma[Object.keys(Ma)],gd=Ka[Object.keys(Ka)];Ma="0";isDefined(Ya)&&(Ma=Ya[Object.keys(Ya)]);Ya="0";isDefined(ab)&&(Ya=ab[Object.keys(ab)]);var Dd=mb[Object.keys(mb)],hd=Eb[Object.keys(Eb)],Ed=vb[Object.keys(vb)],
oe=sb[Object.keys(sb)],Zb=R[Object.keys(R)];R="0";isDefined(Va)&&(R=Va[Object.keys(Va)]);var Fd={LATCEN:Pc,LONCEN:Dc,ID:Zb,DVCE:ed,DVGR:Ec,ESPE:Rc,HB45:qc,HBAS:rc,ECTOP:Fc,DVIL:fd,ZMAX:gd,N2D:Ma,ADV:R};granizo={GRA:ia,ORG:Ya,PGR:Dd,TAM:hd};S({ANA:Fd,GRANIZO:granizo,MOV:{DIRN:Ed,VKMH:oe}})}catch(pe){S(null)}}});debug('<a target="_blank" href="'+w+'">'+w+"</a>",!1)}function WMJScheckURL(c){if(!isDefined(c))return"?";c=c.trim();-1===c.indexOf("?")&&(c+="?");return c}
function isDefined(c){return"undefined"===typeof c?!1:!0}
function URLEncode(c){if(!c||void 0===c||""===c||"string"!==typeof c)return c;var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz%-_.!~*'()",x="0123456789ABCDEF";c=c.replace(/%/g,"%25");c=c.replace(/\+/g,"%2B");c=c.replace(/ /g,"%20");c=c.replace(/\^/g,"%5E");c=c.replace(/&/g,"%26");c=c.replace(/\?/g,"%3F");c=c.replace(/>/g,"%3E");c=c.replace(/</g,"%3C");c=c.replace(/\\/g,"%5C");for(var y="",w=0;w<c.length;w++){var S=c.charAt(w);if(" "===S)y+="%20";else if(-1!==n.indexOf(S))y+=S;
else{var L=S.charCodeAt(0);255<L?(alert("Unicode Character '"+S+"' cannot be encoded using standard URL encoding.\n(URL encoding only supports 8-bit characters.)\nA space (+) will be substituted."),y+="+"):(y+="%",y+=x.charAt(L>>4&15),y+=x.charAt(L&15))}}return y}
function getBBOXandProjString(c,n){var x="";if(c.version===WMSVersion.version100||c.version===WMSVersion.version111)x+="SRS="+URLEncode(n.srs)+"&",x+="BBOX="+n.bbox.left+","+n.bbox.bottom+","+n.bbox.right+","+n.bbox.top+"&";c.version===WMSVersion.version130&&(x+="CRS="+URLEncode(n.srs)+"&",x="EPSG:4326"===n.srs&&!1===c.wms130bboxcompatibilitymode?x+("BBOX="+n.bbox.bottom+","+n.bbox.left+","+n.bbox.top+","+n.bbox.right+"&"):x+("BBOX="+n.bbox.left+","+n.bbox.bottom+","+n.bbox.right+","+n.bbox.top+"&"));
return x}function getnum(c,n){console.log(wmjsond);console.log("PULSE!!",c,n,5E4);wmjsond.calculateBoundingBoxAndZoom(c,-1*n,1E5)}
function getTable(c,n,x,y){var w="NUM RAD NUPIX ZMAX ZMED VIL ZMXV DIRN V(KMH) NEG POS RAYo RAY ADV".split(" "),S="NUM NUPIX ZMAX ZMED VIL DIRN V(KMH) NEG POS RAYo RAY".split(" "),L="NUM RAD ZMAX ESPE ECTOP DVIL ADV GRA".split(" ");y=["LATCEN","LONCEN"];S="2D"==x?"NAC"==n?S:w:L;n=c[0].split(",");x=[];for(w=0;w<S.length;w++)n.includes(S[w])&&x.push(n.indexOf(S[w]));S=[];for(w=0;w<y.length;w++)n.includes(y[w])&&S.push(n.indexOf(y[w]));y=[];n=[];for(w=0;w<c.length;w++){L=c[w].split(",");var P=[];n.push([L[S[0]],
L[S[1]]]);for(var G=0;G<x.length;G++)P.push(L[x[G]]);isDefined(P[1])&&y.push(P)}c='<table id="my-table">';for(x=0;x<y.length;x++){0===x&&(c+="<thead>");c+="<tr>";w=y[x];S=n[x];for(L=0;L<w.length;L++)0===x?(c+="<th>",c+=w[L],c+="</th>"):(c=0===L?c+('<td style="cursor:pointer;color:#00f" onclick="getnum('+S[0]+","+S[1]+')">'):c+"<td>",c+=w[L],c+="</td>");0===x?(c+="</tr>",c+="</thead>",c+="<tbody>"):c+="</tr>"}c+="</tbody></table>";1==y.length&&(c="<b>NO CELLS</b></br>");return c};var gfiapp_point_interest=function(c,n){var x=this,y=[],w=!0,S=function(L,P){var G=null,T=null,R=null;setflags=function(){G&&T&&R?(lon=G,lat=T,name=R,fullUrl=knmiFlagURL+"file="+pointInterestFileName+"&location="+lon+","+lat+"&name="+name,$.ajax({type:"GET",url:fullUrl,success:function(ba){"OK"===ba.status?(ba=Ext.getCmp("webmapjs_add_point_interest"),ba.getEl().dom.style.background="#BCED91",n.getImageStore().clear(),n.draw("draw")):(ba=Ext.getCmp("webmapjs_add_point_interest"),ba.getEl().dom.style.background=
"#FF4040")},dataType:"jsonp",contentType:"application/jsonp",jsonpCallback:"resultSetFlag",crossDomain:!0})):(R||$("#webmapjs_point_interest_name").css("border","2px solid red"),G||$("#webmapjs_point_interest_lon").css("border","2px solid red"),T||$("#webmapjs_point_interest_lat").css("border","2px solid red"))};delete_flag=function(){Ext.MessageBox.show({title:I18n.delete_title_confirm.text,msg:I18n.are_you_sure.text,buttons:Ext.MessageBox.YESNO,icon:Ext.MessageBox.WARNING,fn:function(ba){"yes"==
ba&&(name=$(".webmapjs_label_selected_point_interest").text(),fullUrl=knmiFlagURL+"file="+pointInterestFileName+"&name="+name,$.ajax({type:"GET",url:fullUrl,success:function(ia){Ext.getCmp("webmapjs_delete_point_interest").getEl().dom.style.background="#BCED91";n.getImageStore().clear();n.draw()},dataType:"jsonp",contentType:"application/jsonp",jsonpCallback:"resultSetFlag",crossDomain:!0}))}})};c.html("<label class='webmapjs_label_point_interest' for='webmapjs_div_point_interest'>"+I18n.add_point_interest_abstract.text+
"</label><div id='webmapjs_div_point_interest' class='webmapjs_div_point_interest'><input type='number' step='0.01' id='webmapjs_point_interest_lat' class='webmapjs_input_point_interest' placeholder='Lat:'/><input type='number' step='0.01' id='webmapjs_point_interest_lon' class='webmapjs_input_point_interest' placeholder='Lon:'/><input type='text' id='webmapjs_point_interest_name' class='webmapjs_input_point_interest' placeholder='"+I18n.insert_name.text+"' /></div><div class='webmapjs_point_added'></div><div class='webmapjs_point_not_added'></div><label class='webmapjs_label_selected_point_interest_abstract' for='webmapjs_div_selected_point_interest'>"+
I18n.selected_flag.text+"</label><div id='webmapjs_div_selected_point_interest' class='webmapjs_div_selected_point_interest'><label class='webmapjs_label_selected_point_interest'>"+I18n.default_selected_flag.text+"</label></div>");Ext.create("Ext.Button",{text:I18n.add_point_interest.text,id:"webmapjs_add_point_interest",tooltip:I18n.add_flag_tooltip.tooltip,renderTo:"webmapjs_div_point_interest",handler:function(){setflags()}});Ext.create("Ext.Button",{text:I18n.delete.text,id:"webmapjs_delete_point_interest",
tooltip:I18n.delete_selected_flag_tooltip.tooltip,renderTo:"webmapjs_div_selected_point_interest",cls:"webmapjs_button_delete_point_interest",handler:function(){delete_flag()}});$("#webmapjs_point_interest_name, #webmapjs_point_interest_lon, #webmapjs_point_interest_lat").keypress(function(ba){if(13==ba.which)return setflags(),!1});var O=function(){var ba=c.find(".gfiapp_point_interest");ba.empty();for(var ia=n.getLayers(),la=0;la<ia.length;la++){var ma=ia[la],ua=jQuery("<div />",{css:{margin:8}});
ba.append(ua);ua.html("LAYER "+ma.service)}x.resize(L,P)};O();n.addListener("onlayeradd",O,!0);n.addListener("mouseclicked",function(ba){if(0!=w){var ia=n.getLatLongFromPixelCoord({x:ba.x,y:ba.y});G=ia.x;T=ia.y;$("#webmapjs_point_interest_lon").val(ia.x.toFixed(5));$("#webmapjs_point_interest_lat").val(ia.y.toFixed(5));$("#webmapjs_point_interest_lon, #webmapjs_point_interest_lat").css("border","1px solid grey");ia=n.getLayers();ba=n.getWMSGetFeatureInfoRequestURL(ia[0],ba.x,ba.y).replace("&INFO_FORMAT=text/html",
"&INFO_FORMAT=application/json")+"&JSONP=featureInfoCallback";$.ajax({dataType:"jsonp",jsonpCallback:"featureInfoCallback",type:"GET",cache:!1,url:ba,success:function(la){la[1]&&"nodata"!==la[1].data?($(".webmapjs_label_selected_point_interest").text(la[1].data),$(".webmapjs_button_delete_point_interest").css("display","inline")):($(".webmapjs_label_selected_point_interest").text(I18n.default_selected_flag.text),$(".webmapjs_button_delete_point_interest").css("display","none"))},error:function(la,
ma,ua){debug(ma+", "+ua)}})}},!0);$("#webmapjs_point_interest_name").on("input",function(ba){onChangeEvents("name",ba)});$("#webmapjs_point_interest_lon").on("input",function(ba){onChangeEvents("lon",ba);changeMapPin()});$("#webmapjs_point_interest_lat").on("input",function(ba){onChangeEvents("lat",ba);changeMapPin()});this.onChangeEvents=function(ba,ia){var la=Ext.getCmp("webmapjs_add_point_interest");la.getEl().dom.style.background="";la=Ext.getCmp("webmapjs_delete_point_interest");la.getEl().dom.style.background=
"";switch(ba){case "name":R=ia.target.value;break;case "lon":G=ia.target.value;break;case "lat":T=ia.target.value}$("#webmapjs_point_interest_"+ba).css("border","1px solid grey")};this.changeMapPin=function(){n.positionMapPinByLatLon({x:G,y:T})};n.enableInlineGetFeatureInfo(!1)};this.enable=function(L,P){S(L,P);w=!0};this.disable=function(){w=!1;n.enableInlineGetFeatureInfo(!0)};this.resize=function(L,P){for(var G=0;G<y.length;G++)y[G].setSize(L,P/y.length);for(G=0;G<y.length;G++);};x.enable()};
WMJSExtApplications["Points of interest"]=gfiapp_point_interest;var gfiapp_eprofile=function(c,n){var x=this,y=[],w=function(S,L){c.html('<div id="info"></div><div class="gfiapp_eprofile">bla</div>');var P=function(R,O){O=O.id;for(var ba=0;ba<y.length;ba++){var ia=y[ba].getWebMapJS();ia.suspendEvent("onupdatebbox");ba!=O&&0==R.equals(y[ba].getWebMapJS().getProjection().bbox)&&(ia.zoomTo(R),y[ba].updateBBOX(R));ia.resumeEvent("onupdatebbox")}},G=function(R,O){R=O.id;for(O=0;O<y.length;O++){var ba=y[O].getWebMapJS();ba.suspendEvent("onupdatebbox");ba.suspendEvent("onloadingcomplete");
O!=R&&ba.draw();ba.resumeEvent("onloadingcomplete");ba.resumeEvent("onupdatebbox")}},T=function(){var R=c.find(".gfiapp_eprofile");R.empty();for(var O=n.getLayers(),ba=0;ba<O.length;ba++){var ia=O[ba],la=jQuery("<div />",{css:{margin:8}});R.append(la);y[ba]=new GFITimeElevationWindow(la);y[ba].getWebMapJS().addLayer(ia);y[ba].getWebMapJS().getListener().id=ba;y[ba].getWebMapJS().addListener("onupdatebbox",P,!0);y[ba].getWebMapJS().addListener("onloadingcomplete",G,!0)}x.resize(S,L)};T();n.addListener("ondimchange",
function(){var R=y[0].getWebMapJS(),O=R.getProjection().bbox.clone();R=R.getProjection().bbox.right-R.getProjection().bbox.left;var ba=(new Date(n.getDimension("time").currentValue)).getTime();O.left=ba;O.right=ba+R;for(R=0;R<y.length;R++)y[R].getWebMapJS().zoomTo(O)},!0);n.addListener("onlayeradd",T,!0);console.log(y[0]);y[0].getWebMapJS().addListener("onloadingcomplete",function(){var R=y[0].getWebMapJS().getProjection().bbox.clone();$("#info").html("Displaying dates "+n.dateToISO8601(new Date(R.left))+
" till "+n.dateToISO8601(new Date(R.right)))},!0);n.enableInlineGetFeatureInfo(!1)};this.enable=function(S,L){w(S,L)};this.disable=function(){n.enableInlineGetFeatureInfo(!0)};this.resize=function(S,L){for(var P=0;P<y.length;P++)y[P].setSize(S,L/y.length);for(P=0;P<y.length;P++);};x.enable()};WMJSExtApplications.EProfile=gfiapp_eprofile;var autowms_app=function(c,n){initWMJS();c.addClass("autowms_app_container");var x="https://geoservices.knmi.nl/autowms?";try{x=autowmsURL}catch(O){}var y={},w=[],S=function(O){var ba=G();c.html(ba+JSON.stringify(O));$(".autowms_app_fileitem_return").attr("onclick","").click(function(ia){w=[];R("")});$(".autowms_app_fileitem_refresh").attr("onclick","").click(function(ia){var la=$(this).attr("name");$(".autowms_app_fileitem").remove();$(".autowms_app_layeritem").remove();setTimeout(function(){R(la)},
100)})},L=function(O){var ba=O.name;return O.leaf?"<span class='autowms_app_fileitem' name='"+O.name+"'>&#128451;&nbsp;"+ba+"</span>":"<span class='autowms_app_fileitem autowms_app_diritem' name='"+O.name+"'>&#128448;&nbsp;"+ba+"</span>"},P=function(O,ba){console.log("WMS",ba);var ia="<span class='autowms_app_layeritem' title='Click to add to viewer' name='"+O.name+"'><span class='autowms_app_layeritem_text'>Layer "+O.text+" - ("+O.name+")</span>";return ia+="<span class='autowms_app_layeritem_image'><img src=\""+
(ba+"&service=WMS&request=getmap&format=image/png&layers="+O.name+"&width=400&CRS=EPSG:4326&STYLES=&EXCEPTIONS=INIMAGE&showlegend=true&"+Math.random())+'" /></span></span>'},G=function(O,ba){return"<span class='autowms_app_currentpath'>AutoWMS link: <span class='autowms_app_request_container'><input class='autowms_app_request_input' type=\"text\" value=\""+x+"\"></input>  <span class='autowms_app_request_button'>-></span></span><hr/><span class='autowms_app_currentpath'>Current folder: ./"+(ba+'</span><span class="autowms_app_fileitem_header"><span class="autowms_app_fileitem_return">&#128193;&nbsp;<b>../ (&#8679;)</b></span><span class="autowms_app_fileitem_refresh" name="')+
(ba+'">&#8635;&nbsp;<b>Refresh</b></span></span>')},T=function(O,ba){c.html("... working ... ");var ia=WMJSGetServiceFromStore(ba,xml2jsonrequestURL);ia.getLayerObjectsFlat(function(la){var ma=""+G(O,ba);ma+="<span class='autowms_app_serviceabstract'><b>"+ia.title.replace(/!/g,"<br/>")+"</b><hr/>"+ia.abstract.replace(/!/g,"<br/>");if(ba&&(ma+='<hr/>WMS: <a target="_blank" href="'+ba+'&service=WMS&request=GetCapabilities">'+ba+"</a>",1<ba.split("?").length)){var ua=new WMJSKVP(ba.split("?")[1]),Da=
ba.split("?")[0].replace("adagucserver","adagucopendap/");Da=Da.replace(/([^:]\/)\/+/g,"$1");ua.source&&(Da+=ua.source);ua.dataset&&(Da+=ua.dataset+"/");ma=ma+('<hr/>OpenDAP: <span class=\'autowms_app_opendaplinks\'><a target="_blank" href="'+Da+'">'+Da+'</a><a target="_blank" href="')+(Da+'.das">DAS</a><a target="_blank" href="')+(Da+'.dds">DDS</a></span>')}ma+="</span>";c.html("... working ... ");y={};for(ua=0;ua<la.length;ua++)ma+=P(la[ua],ba),y[la[ua].name]=la[ua];c.html(ma);$(".autowms_app_layeritem").attr("onclick",
"").click(function(va){va=y[$(this).attr("name")];window.location.hash="addlayer('"+ba+"','"+va.name+"')"});$(".autowms_app_fileitem_return").attr("onclick","").click(function(va){R(w.pop())});$(".autowms_app_fileitem_refresh").attr("onclick","").click(function(va){var Fa=$(this).attr("name");$(".autowms_app_fileitem").remove();$(".autowms_app_layeritem").remove();setTimeout(function(){T(O,Fa)},100)});$(".autowms_app_request_button").attr("onclick","").click(function(va){R("")});$(".autowms_app_request_input").keyup(function(va){13==
va.keyCode&&R("")})},function(la){la=G();la=la+"<span class='autowms_app_error_container'><span class='autowms_app_error_container_header'>Unable to get WMS GetCapabilities</span><a target='_blank' href=\""+(ba+'service=WMS&request=GetCapabilities">'+ba+"</a>");c.html(la+"</span>");$(".autowms_app_fileitem_return").attr("onclick","").click(function(ma){w=[];R("")})},!0)},R=function(O){O&&"undefined"!==O||(O="");var ba=$(".autowms_app_request_input").first().val();ba&&0<ba.length&&(x=ba.trim().split("?")[0],
x.endsWith("?")||(x+="?"));var ia=function(ma){if(ma.error)c.html("Error from server: "+ma.error);else{y={};w[w.length-1]!==O&&w.push(O);var ua=G(ma,O);c.html("... working ... ");ma.result.sort(function(va,Fa){if(va.name<=Fa.name)return-1;if(va.name>Fa.name)return 1;if(va.name==Fa.name)return 0});for(var Da=0;Da<ma.result.length;Da++)ua+=L(ma.result[Da]),y[ma.result[Da].name]=ma.result[Da];c.html(ua);$(".autowms_app_fileitem_return").attr("onclick","").click(function(va){w.pop();R(w[w.length-1])});
$(".autowms_app_fileitem_refresh").attr("onclick","").click(function(va){var Fa=$(this).attr("name");$(".autowms_app_fileitem").remove();$(".autowms_app_layeritem").remove();setTimeout(function(){R(Fa)},100)});$(".autowms_app_fileitem").attr("onclick","").click(function(va){va=y[$(this).attr("name")];!1===va.leaf?R(va.path):T(ma,va.adaguc)});$(".autowms_app_request_button").attr("onclick","").click(function(va){R("")});$(".autowms_app_request_input").keyup(function(va){13==va.keyCode&&R("")})}},la=
x+"request=getfiles&path="+O;c.html('... Reading <a href="'+la+'">'+la+"</a> ... ");try{$.ajax({contentType:"application/json",crossDomain:!0,type:"GET",url:la,success:ia,error:function(ma){console.error("Request failed without jsonp, trying jsonp");ia({result:[]});$.ajax({dataType:"jsonp",contentType:"application/jsonp",crossDomain:!0,type:"GET",url:la,success:ia,error:function(ua){S("Unable to do ajax call")}})}})}catch(ma){console.error(ma),S(ma)}};this.enable=function(){c.html("<div>Initializing...</div>");
R("")};this.disable=function(){};this.resize=function(O,ba){}};try{WMJSExtApplications.AutoWMS=autowms_app}catch(c){};var hipatia_app=function(c,n){function x(la){$.ajax({url:"./hipatia/project.ls",type:"GET",dataType:"text",success:function(ma){datalist=ma.split("\n");for(ma=0;ma<datalist.length;ma++)""!=datalist[ma]&&L.push(datalist[ma].trim());hipatiaURL&&""!==hipatiaURL||(hipatiaURL=L[0]);ia("")},error:function(ma,ua,Da){console.log(Da)},cache:!1})}initWMJS();c.addClass("autowms_app_container");var y="https://geoservices.knmi.nl/autowms?";try{y=autowmsURL,serverURL=autowmsURL.replace("autowms","adaguc-server")}catch(la){}var w=
{},S=[],L=[],P=function(la){var ma=O();c.html(ma+JSON.stringify(la));$(".autowms_app_fileitem_return").attr("onclick","").click(function(ua){ia("")})},G=function(la,ma,ua){console.log("FOLD",ma);$.ajax({url:la,dataType:"text",success:function(Da){lines=Da.split("\n");for(var va=Da=!1,Fa=0;Fa<lines.length;Fa++)line=lines[Fa],line.includes("BEGIN "+ma)&&(Da=!0),line.includes("END")&&(Da=!1),line.includes("<Layer")&&(va=!0),line.includes("</Layer")&&(va=!1),Da&&va&&line.includes("<Name>")&&(nombre=line.substring(line.indexOf(">")+
1,line.indexOf("</")),ua.push(nombre))},error:function(Da,va,Fa){},cache:!1})},T=function(la){return"<span class='autowms_app_fileitem' name='"+la+"'>&#128451;&nbsp;"+la+"</span>"},R=function(la,ma){console.log("WMS",ma);var ua="<span class='autowms_app_layeritem' title='Click to add to viewer' name='"+la.name+"'><span class='autowms_app_layeritem_text'>Layer "+la.text+" - ("+la.name+")</span>";return ua+="<span class='autowms_app_layeritem_image'><img src=\""+(ma+"&service=WMS&request=getmap&format=image/png&layers="+
la.name+"&width=400&CRS=EPSG:4326&STYLES=&EXCEPTIONS=INIMAGE&showlegend=true&"+Math.random())+'" /></span></span>'},O=function(la){var ma="<span class='autowms_app_currentpath_hipa'>Project: <span class='autowms_app_request_container'><span class='dropdown'>  <button class='dropbtn'>Search</button> <span id=\"myDropdown\" class=\"dropdown-content\">";for(var ua=0;ua<L.length;ua++)ma+='<a href="index.'+L[ua]+'.html">'+L[ua]+"</a>";ma=ma+'</span></span><input class=\'autowms_app_request_input\' type="text" value="'+
(hipatiaURL+'"></input>');la&&""!=la&&"undefined"!==la||(la=hipatiaURL);return ma+"</span><hr/><span class='autowms_app_currentpath'> Current Data: ./"+(la+'</span><span class="autowms_app_fileitem_header"><span class="autowms_app_fileitem_return">&#128193;&nbsp;<b>../ (&#8679;)</b></span><span class="autowms_app_fileitem_refresh" name="')+(la+'">&#8635;&nbsp;<b>Refresh</b></span></span>')},ba=function(la){c.html("... working ... ");var ma=serverURL+"dataset="+hipatiaURL;console.log("SERVICES",ma);
var ua=WMJSGetServiceFromStore(ma,xml2jsonrequestURL),Da=[];G("hipatia/"+hipatiaURL+".xml",la,Da);ua.getLayerObjectsFlat(function(va){var Fa=""+O(hipatiaURL+"/"+la);Fa+="</span>";c.html("... working ... ");w={};for(var Ma=0;Ma<va.length;Ma++)Da.includes(va[Ma].name)&&(console.log(va[Ma].name),Fa+=R(va[Ma],ma),w[va[Ma].name]=va[Ma]);console.log("LAYER",w);c.html(Fa);$(".autowms_app_layeritem").attr("onclick","").click(function(Ka){Ka=w[$(this).attr("name")];window.location.hash="addlayer('"+ma+"','"+
Ka.name+"')"});$(".autowms_app_fileitem_return").attr("onclick","").click(function(Ka){ia("")});$(".autowms_app_request_button").attr("onclick","").click(function(Ka){ia("")});$(".autowms_app_request_input").keyup(function(Ka){13==Ka.keyCode&&ia("")})},function(va){console.log("HOLA");va=O();va=va+"<span class='autowms_app_error_container'><span class='autowms_app_error_container_header'>Unable to get WMS GetCapabilities</span><a target='_blank' href=\""+(ma+'service=WMS&request=GetCapabilities">'+
ma+"</a>");c.html(va+"</span>");$(".autowms_app_fileitem_return").attr("onclick","").click(function(Fa){ia("")})},!0)},ia=function(la){la&&"undefined"!==la||(la=hipatiaURL&&"undefined"!==hipatiaURL?hipatiaURL:L[0]);var ma=$(".autowms_app_request_input").first().val();ma&&0<ma.length&&(hipatiaURL=ma);ma=function(va){if(va.error)c.html("Error from server: "+va.error);else{w={};S=[];lines=va.split("\n");for(va=0;va<lines.length;va++)line=lines[va],line.includes("BEGIN ")&&(folder=line.substring(line.indexOf("BEGIN ")+
6,line.indexOf("--\x3e")),S.push(folder));var Fa=O(la);c.html("... working ... ");S.sort(function(Ma,Ka){if(Ma.name<=Ka.name)return-1;if(Ma.name>Ka.name)return 1;if(Ma.name==Ka.name)return 0});for(va=0;va<S.length;va++)Fa+=T(S[va]),w[S[va]]=S[va];c.html(Fa);$(".autowms_app_fileitem_return").attr("onclick","").click(function(Ma){ia("")});$(".autowms_app_fileitem_refresh").attr("onclick","").click(function(Ma){var Ka=$(this).attr("name");$(".autowms_app_fileitem").remove();$(".autowms_app_layeritem").remove();
setTimeout(function(){ia(Ka)},100)});$(".autowms_app_fileitem").attr("onclick","").click(function(Ma){Ma=w[$(this).attr("name")];console.log("FILEOBJ",Ma);ba(Ma)});$(".autowms_app_request_button").attr("onclick","").click(function(Ma){ia(hipatiaURL)});$(".autowms_app_request_input").keyup(function(Ma){13==Ma.keyCode&&ia(hipatiaURL)})}};var ua=y+"request=getfiles&path="+la,Da="hipatia/"+hipatiaURL+".xml";c.html('... Reading <a href="'+ua+'">'+ua+"</a> ... ");try{$.ajax({url:Da,dataType:"text",success:ma,
error:function(va,Fa,Ma){console.error("Request failed without jsonp, trying jsonp");P("Unable extract data list")},cache:!1})}catch(va){console.error(va),P(va)}};this.enable=function(){c.html("<div>Initializing...</div>");x("./hipatia")};this.disable=function(){};this.resize=function(la,ma){}};try{WMJSExtApplications.Hipatia=hipatia_app}catch(c){};
//# sourceMappingURL=WMJSExt.min.js.map
